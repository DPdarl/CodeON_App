import{A as qs,B as La,C as _a,D as Oa,E as Fa,F as Ba,a as gt,b as Gt,c as vt,d as Lt,e as ht,f as Pa,g as $s,h as Ea,i as Vs,j as Ws,k as Xs,l as Ce,m as ke,n as Pe,o as Be,p as Ee,q as Ue,r as Ta,s as Mr,t as Ks,u as Ir,v as jr,w as Ma,x as Ia,y as Aa,z as Ys}from"/build/_shared/chunk-UZW6IDI3.js";import{a as Jt,b as ne,c as As,d as Ls}from"/build/_shared/chunk-QUWDJBMH.js";import{a as H}from"/build/_shared/chunk-NRPYLUQ5.js";import{a as ie,b as ye,c as xe,d as Ht,e as ge,f as xa}from"/build/_shared/chunk-MWUWTNJM.js";import{a as we,b as Tr,c as ue,d as me}from"/build/_shared/chunk-YXIPPUDP.js";import{b as ae,c as er,d as wa,e as Na,f as cr,g as zt,h as To,i as Ca,j as ka,k as Ra,l as _s,m as Os,n as Fs,o as Bs,p as Sa,q as Da,r as Us,s as Hs,t as zs,u as Gs,v as js}from"/build/_shared/chunk-GQOCD34X.js";import{e as ee,g as Ge}from"/build/_shared/chunk-ERM4YBQE.js";import{$ as Sr,A as Qt,Aa as Ne,B as ma,Ba as Ts,C as fa,Ca as Ms,D as cs,Da as Is,E as pa,Ea as q,F as ds,Fa as O,H as us,I as ga,J as ms,K as fs,L as Fe,M as Mt,N as va,P as So,Q as ps,R as gs,S as ha,T as vs,U as kr,V as hs,W as bs,X as Rr,Y as ys,Z as It,_ as xs,a as Qn,aa as Zt,b as Zn,ba as ws,c as Jn,ca as Ns,d as Yt,da as Do,e as sr,f as es,fa as Cs,g as ts,h as rs,ha as Gr,i as as,ia as Dr,j as ir,k as qt,ka as ks,l as xr,la as Rs,m as Ct,ma as Po,n as Ro,na as ba,o as os,oa as Eo,pa as Pr,q as ns,qa as At,r as lr,ra as Ss,s as Ut,sa as Ds,t as ss,ta as Ps,u as is,ua as ya,v as wr,w as ls,wa as Es,x as Nr,y as ua,ya as dt,z as Cr,za as Er}from"/build/_shared/chunk-UEXE7SL4.js";import{a as J,b as bd,c as yr,j as qn,m as U}from"/build/_shared/chunk-UN5IVU4J.js";import{e as D}from"/build/_shared/chunk-ADMCF34Z.js";var Ft=D(J(),1);var dr=D(J(),1);var le=D(U(),1);function Qs({activeTab:e,onTabChange:t,onLogout:r,user:a,collapsed:o=!1}){let[n,s]=(0,dr.useState)(!1),[i,c]=(0,dr.useState)(!1),l=(0,dr.useRef)(null),u=["superadmin","admin","instructor","user"],d=["superadmin","admin","instructor"],m=[{id:"home",label:"Home",icon:Bs,roles:u},{id:"play",label:"Play",icon:Sa,roles:u},{id:"leaderboard",label:"Leaderboard",icon:Ca,roles:u},{id:"quest",label:"Quests",icon:Da,roles:u},{id:"streak",label:"Streak",icon:er,roles:u},{id:"store",label:"Store",icon:Ra,roles:u},{id:"student-management",label:"Students",icon:Us,roles:d},{id:"instructor-management",label:"Instructors",icon:Ss,roles:["superadmin","admin"]},{id:"admin-management",label:"Admins",icon:zs,roles:["superadmin"]},{id:"user-reports",label:"Reports",icon:Gs,roles:d},{id:"profile",label:"Profile",icon:Hs,roles:u},{id:"more",label:"More",icon:vs,hasDropdown:!0,roles:u}],g=a?.role||"user",y=m.filter(x=>x.roles.includes(g)),v=[{id:"settings",label:"Settings",icon:ws},{id:"about",label:"About",icon:ga},{id:"logout-trigger",label:"Logout",icon:va}];(0,dr.useEffect)(()=>{let x=_=>{l.current&&!l.current.contains(_.target)&&s(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);let N=()=>{s(!n)},k=x=>{x.id==="logout-trigger"?c(!0):t(x.id),s(!1)},I=()=>{c(!1),setTimeout(()=>{r()},100)};return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)("div",{className:`bg-white dark:bg-gray-900 border-r shadow-sm flex flex-col h-full transition-all duration-300 ${o?"w-24":"w-64"}`,children:[(0,le.jsx)("div",{className:"px-3 py-6 border-b",children:(0,le.jsxs)("div",{className:"flex items-center  ",children:[(0,le.jsx)(ka,{className:"h-8 w-8 mx-3"}),!o&&(0,le.jsxs)("div",{className:"flex flex-col",children:[(0,le.jsx)("h1",{className:"text-xl font-bold leading-tight font-pixelify dark:text-white",children:"CodeON"}),(0,le.jsxs)("span",{className:"text-xs text-muted-foreground leading-tight capitalize",children:[g," View"]})]})]})}),(0,le.jsx)("div",{className:"flex-1 py-4 overflow-y-auto custom-scrollbar",children:(0,le.jsx)("nav",{className:"space-y-1 px-3",children:y.map(x=>{let _=x.icon,S=x.id==="more";return(0,le.jsxs)("div",{className:"relative",ref:S?l:null,children:[(0,le.jsxs)("button",{className:`w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-left transition-colors group ${e===x.id?"bg-primary/10 text-primary font-medium":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"} ${o?"justify-center":""} ${S&&n?"bg-primary/10 text-primary":""}`,onClick:S?N:()=>t(x.id),title:o?x.label:"",children:[(0,le.jsx)(_,{className:"h-6 w-6 flex-shrink-0"}),!o&&(0,le.jsx)("span",{className:"truncate",children:x.label}),o&&(0,le.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50 pointer-events-none",children:x.label})]}),S&&n&&(0,le.jsx)("div",{className:`absolute ${o?"left-full ml-4 top-0":"left-0 top-full mt-1 w-full"} bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg py-1 z-50 min-w-48`,children:v.map(T=>{let B=T.icon,X=T.id==="logout-trigger";return(0,le.jsxs)("button",{className:`w-full flex items-center space-x-3 px-4 py-2 text-sm transition-colors ${X?"text-red-600 hover:bg-red-50 dark:hover:bg-red-950/20":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>k(T),children:[(0,le.jsx)(B,{className:"h-4 w-4"}),(0,le.jsx)("span",{children:T.label})]},T.id)})})]},x.id)})})})]}),(0,le.jsx)(Ce,{open:i,onOpenChange:c,children:(0,le.jsxs)(ke,{children:[(0,le.jsxs)(Pe,{children:[(0,le.jsx)(Ee,{children:"Sign out?"}),(0,le.jsx)(Ue,{children:"Are you sure you want to sign out? You will need to log back in to access your dashboard."})]}),(0,le.jsxs)(Be,{className:"gap-2 sm:gap-0",children:[(0,le.jsx)(O,{variant:"ghost",onClick:()=>c(!1),children:"Cancel"}),(0,le.jsx)(O,{variant:"destructive",onClick:I,className:"bg-red-600 hover:bg-red-700",children:"Sign out"})]})]})})]})}var ed=D(J(),1);var $t=D(J(),1);var ui=D(J(),1);var Io=D(J(),1);var jt=D(J(),1),Zs=D(U(),1);function Js(e,t=[]){let r=[];function a(n,s){let i=jt.createContext(s);i.displayName=n+"Context";let c=r.length;r=[...r,s];let l=d=>{let{scope:f,children:p,...m}=d,g=f?.[e]?.[c]||i,y=jt.useMemo(()=>m,Object.values(m));return(0,Zs.jsx)(g.Provider,{value:y,children:p})};l.displayName=n+"Provider";function u(d,f){let p=f?.[e]?.[c]||i,m=jt.useContext(p);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${n}\``)}return[l,u]}let o=()=>{let n=r.map(s=>jt.createContext(s));return function(i){let c=i?.[e]||n;return jt.useMemo(()=>({[`__scope${e}`]:{...i,[e]:c}}),[i,c])}};return o.scopeName=e,[a,yd(o,...t)]}function yd(...e){let t=e[0];if(e.length===1)return t;let r=()=>{let a=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(n){let s=a.reduce((i,{useScope:c,scopeName:l})=>{let d=c(n)[`__scope${l}`];return{...i,...d}},{});return jt.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}var ri=D(J(),1),Dd=D(bd(),1);var je=D(J(),1);var Ua=D(U(),1),xd=Symbol.for("react.lazy"),Ha=je[" use ".trim().toString()];function wd(e){return typeof e=="object"&&e!==null&&"then"in e}function ei(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===xd&&"_payload"in e&&wd(e._payload)}function ti(e){let t=Nd(e),r=je.forwardRef((a,o)=>{let{children:n,...s}=a;ei(n)&&typeof Ha=="function"&&(n=Ha(n._payload));let i=je.Children.toArray(n),c=i.find(kd);if(c){let l=c.props.children,u=i.map(d=>d===c?je.Children.count(l)>1?je.Children.only(null):je.isValidElement(l)?l.props.children:null:d);return(0,Ua.jsx)(t,{...s,ref:o,children:je.isValidElement(l)?je.cloneElement(l,void 0,u):null})}return(0,Ua.jsx)(t,{...s,ref:o,children:n})});return r.displayName=`${e}.Slot`,r}function Nd(e){let t=je.forwardRef((r,a)=>{let{children:o,...n}=r;if(ei(o)&&typeof Ha=="function"&&(o=Ha(o._payload)),je.isValidElement(o)){let s=Sd(o),i=Rd(n,o.props);return o.type!==je.Fragment&&(i.ref=a?Er(a,s):s),je.cloneElement(o,i)}return je.Children.count(o)>1?je.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Cd=Symbol("radix.slottable");function kd(e){return je.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Cd}function Rd(e,t){let r={...t};for(let a in t){let o=e[a],n=t[a];/^on[A-Z]/.test(a)?o&&n?r[a]=(...i)=>{let c=n(...i);return o(...i),c}:o&&(r[a]=o):a==="style"?r[a]={...o,...n}:a==="className"&&(r[a]=[o,n].filter(Boolean).join(" "))}return{...e,...r}}function Sd(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var ai=D(U(),1),Pd=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mo=Pd.reduce((e,t)=>{let r=ti(`Primitive.${t}`),a=ri.forwardRef((o,n)=>{let{asChild:s,...i}=o,c=s?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,ai.jsx)(c,{...i,ref:n})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});var za=D(U(),1),Ao="Progress",Lo=100,[Ed,yp]=Js(Ao),[Td,Md]=Ed(Ao),si=Io.forwardRef((e,t)=>{let{__scopeProgress:r,value:a=null,max:o,getValueLabel:n=Id,...s}=e;(o||o===0)&&!oi(o)&&console.error(Ad(`${o}`,"Progress"));let i=oi(o)?o:Lo;a!==null&&!ni(a,i)&&console.error(Ld(`${a}`,"Progress"));let c=ni(a,i)?a:null,l=Ga(c)?n(c,i):void 0;return(0,za.jsx)(Td,{scope:r,value:c,max:i,children:(0,za.jsx)(Mo.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":Ga(c)?c:void 0,"aria-valuetext":l,role:"progressbar","data-state":ci(c,i),"data-value":c??void 0,"data-max":i,...s,ref:t})})});si.displayName=Ao;var ii="ProgressIndicator",li=Io.forwardRef((e,t)=>{let{__scopeProgress:r,...a}=e,o=Md(ii,r);return(0,za.jsx)(Mo.div,{"data-state":ci(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...a,ref:t})});li.displayName=ii;function Id(e,t){return`${Math.round(e/t*100)}%`}function ci(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Ga(e){return typeof e=="number"}function oi(e){return Ga(e)&&!isNaN(e)&&e>0}function ni(e,t){return Ga(e)&&!isNaN(e)&&e<=t&&e>=0}function Ad(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Lo}\`.`}function Ld(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Lo} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var _o=si,di=li;var Oo=D(U(),1),Ar=ui.forwardRef(({className:e,value:t,indicatorClassName:r,...a},o)=>(0,Oo.jsx)(_o,{ref:o,className:q("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:(0,Oo.jsx)(di,{className:q("h-full w-full flex-1 bg-primary transition-all",r),style:{transform:`translateX(-${100-(t||0)}%)`}})}));Ar.displayName=_o.displayName;var He=D(J(),1);var bt=D(J(),1);function Od(e){return Object.prototype.toString.call(e)==="[object Object]"}function mi(e){return Od(e)||Array.isArray(e)}function pi(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function ja(e,t){let r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;let o=JSON.stringify(Object.keys(e.breakpoints||{})),n=JSON.stringify(Object.keys(t.breakpoints||{}));return o!==n?!1:r.every(s=>{let i=e[s],c=t[s];return typeof i=="function"?`${i}`==`${c}`:!mi(i)||!mi(c)?i===c:ja(i,c)})}function fi(e){return e.concat().sort((t,r)=>t.name>r.name?1:-1).map(t=>t.options)}function gi(e,t){if(e.length!==t.length)return!1;let r=fi(e),a=fi(t);return r.every((o,n)=>{let s=a[n];return ja(o,s)})}function Uo(e){return typeof e=="number"}function Fo(e){return typeof e=="string"}function $a(e){return typeof e=="boolean"}function vi(e){return Object.prototype.toString.call(e)==="[object Object]"}function Te(e){return Math.abs(e)}function Ho(e){return Math.sign(e)}function Vr(e,t){return Te(e-t)}function Fd(e,t){if(e===0||t===0||Te(e)<=Te(t))return 0;let r=Vr(Te(e),Te(t));return Te(r/e)}function Bd(e){return Math.round(e*100)/100}function Wr(e){return Xr(e).map(Number)}function kt(e){return e[Yr(e)]}function Yr(e){return Math.max(0,e.length-1)}function zo(e,t){return t===Yr(e)}function hi(e,t=0){return Array.from(Array(e),(r,a)=>t+a)}function Xr(e){return Object.keys(e)}function bi(e,t){return[e,t].reduce((r,a)=>(Xr(a).forEach(o=>{let n=r[o],s=a[o],i=vi(n)&&vi(s);r[o]=i?bi(n,s):s}),r),{})}function Bo(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function Ud(e,t){let r={start:a,center:o,end:n};function a(){return 0}function o(c){return n(c)/2}function n(c){return t-c}function s(c,l){return Fo(e)?r[e](c):e(t,c,l)}return{measure:s}}function Kr(){let e=[];function t(o,n,s,i={passive:!0}){let c;if("addEventListener"in o)o.addEventListener(n,s,i),c=()=>o.removeEventListener(n,s,i);else{let l=o;l.addListener(s),c=()=>l.removeListener(s)}return e.push(c),a}function r(){e=e.filter(o=>o())}let a={add:t,clear:r};return a}function Hd(e,t,r,a){let o=Kr(),n=1e3/60,s=null,i=0,c=0;function l(){o.add(e,"visibilitychange",()=>{e.hidden&&m()})}function u(){p(),o.clear()}function d(y){if(!c)return;s||(s=y,r(),r());let v=y-s;for(s=y,i+=v;i>=n;)r(),i-=n;let N=i/n;a(N),c&&(c=t.requestAnimationFrame(d))}function f(){c||(c=t.requestAnimationFrame(d))}function p(){t.cancelAnimationFrame(c),s=null,i=0,c=0}function m(){s=null,i=0}return{init:l,destroy:u,start:f,stop:p,update:r,render:a}}function zd(e,t){let r=t==="rtl",a=e==="y",o=a?"y":"x",n=a?"x":"y",s=!a&&r?-1:1,i=u(),c=d();function l(m){let{height:g,width:y}=m;return a?g:y}function u(){return a?"top":r?"right":"left"}function d(){return a?"bottom":r?"left":"right"}function f(m){return m*s}return{scroll:o,cross:n,startEdge:i,endEdge:c,measureSize:l,direction:f}}function ur(e=0,t=0){let r=Te(e-t);function a(l){return l<e}function o(l){return l>t}function n(l){return a(l)||o(l)}function s(l){return n(l)?a(l)?e:t:l}function i(l){return r?l-r*Math.ceil((l-t)/r):l}return{length:r,max:t,min:e,constrain:s,reachedAny:n,reachedMax:o,reachedMin:a,removeOffset:i}}function yi(e,t,r){let{constrain:a}=ur(0,e),o=e+1,n=s(t);function s(f){return r?Te((o+f)%o):a(f)}function i(){return n}function c(f){return n=s(f),d}function l(f){return u().set(i()+f)}function u(){return yi(e,i(),r)}let d={get:i,set:c,add:l,clone:u};return d}function Gd(e,t,r,a,o,n,s,i,c,l,u,d,f,p,m,g,y,v,N){let{cross:k,direction:I}=e,x=["INPUT","SELECT","TEXTAREA"],_={passive:!1},S=Kr(),T=Kr(),B=ur(50,225).constrain(p.measure(20)),X={mouse:300,touch:400},j={mouse:500,touch:600},oe=m?43:25,w=!1,L=0,se=0,be=!1,Qe=!1,De=!1,Y=!1;function tt($){if(!N)return;function pe(Je){($a(N)||N($,Je))&&at(Je)}let _e=t;S.add(_e,"dragstart",Je=>Je.preventDefault(),_).add(_e,"touchmove",()=>{},_).add(_e,"touchend",()=>{}).add(_e,"touchstart",pe).add(_e,"mousedown",pe).add(_e,"touchcancel",Oe).add(_e,"contextmenu",Oe).add(_e,"click",M,!0)}function ze(){S.clear(),T.clear()}function rt(){let $=Y?r:t;T.add($,"touchmove",de,_).add($,"touchend",Oe).add($,"mousemove",de,_).add($,"mouseup",Oe)}function ct($){let pe=$.nodeName||"";return x.includes(pe)}function Ze(){return(m?j:X)[Y?"mouse":"touch"]}function Et($,pe){let _e=d.add(Ho($)*-1),Je=u.byDistance($,!m).distance;return m||Te($)<B?Je:y&&pe?Je*.5:u.byIndex(_e.get(),0).distance}function at($){let pe=Bo($,a);Y=pe,De=m&&pe&&!$.buttons&&w,w=Vr(o.get(),s.get())>=2,!(pe&&$.button!==0)&&(ct($.target)||(be=!0,n.pointerDown($),l.useFriction(0).useDuration(0),o.set(s),rt(),L=n.readPoint($),se=n.readPoint($,k),f.emit("pointerDown")))}function de($){if(!Bo($,a)&&$.touches.length>=2)return Oe($);let _e=n.readPoint($),Je=n.readPoint($,k),Tt=Vr(_e,L),Bt=Vr(Je,se);if(!Qe&&!Y&&(!$.cancelable||(Qe=Tt>Bt,!Qe)))return Oe($);let or=n.pointerMove($);Tt>g&&(De=!0),l.useFriction(.3).useDuration(.75),i.start(),o.add(I(or)),$.preventDefault()}function Oe($){let _e=u.byDistance(0,!1).index!==d.get(),Je=n.pointerUp($)*Ze(),Tt=Et(I(Je),_e),Bt=Fd(Je,Tt),or=oe-10*Bt,Kt=v+Bt/50;Qe=!1,be=!1,T.clear(),l.useDuration(or).useFriction(Kt),c.distance(Tt,!m),Y=!1,f.emit("pointerUp")}function M($){De&&($.stopPropagation(),$.preventDefault(),De=!1)}function ve(){return be}return{init:tt,destroy:ze,pointerDown:ve}}function jd(e,t){let a,o;function n(d){return d.timeStamp}function s(d,f){let m=`client${(f||e.scroll)==="x"?"X":"Y"}`;return(Bo(d,t)?d:d.touches[0])[m]}function i(d){return a=d,o=d,s(d)}function c(d){let f=s(d)-s(o),p=n(d)-n(a)>170;return o=d,p&&(a=d),f}function l(d){if(!a||!o)return 0;let f=s(o)-s(a),p=n(d)-n(a),m=n(d)-n(o)>170,g=f/p;return p&&!m&&Te(g)>.1?g:0}return{pointerDown:i,pointerMove:c,pointerUp:l,readPoint:s}}function $d(){function e(r){let{offsetTop:a,offsetLeft:o,offsetWidth:n,offsetHeight:s}=r;return{top:a,right:o+n,bottom:a+s,left:o,width:n,height:s}}return{measure:e}}function Vd(e){function t(a){return e*(a/100)}return{measure:t}}function Wd(e,t,r,a,o,n,s){let i=[e].concat(a),c,l,u=[],d=!1;function f(y){return o.measureSize(s.measure(y))}function p(y){if(!n)return;l=f(e),u=a.map(f);function v(N){for(let k of N){if(d)return;let I=k.target===e,x=a.indexOf(k.target),_=I?l:u[x],S=f(I?e:a[x]);if(Te(S-_)>=.5){y.reInit(),t.emit("resize");break}}}c=new ResizeObserver(N=>{($a(n)||n(y,N))&&v(N)}),r.requestAnimationFrame(()=>{i.forEach(N=>c.observe(N))})}function m(){d=!0,c&&c.disconnect()}return{init:p,destroy:m}}function Xd(e,t,r,a,o,n){let s=0,i=0,c=o,l=n,u=e.get(),d=0;function f(){let _=a.get()-e.get(),S=!c,T=0;return S?(s=0,r.set(a),e.set(a),T=_):(r.set(e),s+=_/c,s*=l,u+=s,e.add(s),T=u-d),i=Ho(T),d=u,x}function p(){let _=a.get()-t.get();return Te(_)<.001}function m(){return c}function g(){return i}function y(){return s}function v(){return k(o)}function N(){return I(n)}function k(_){return c=_,x}function I(_){return l=_,x}let x={direction:g,duration:m,velocity:y,seek:f,settled:p,useBaseFriction:N,useBaseDuration:v,useFriction:I,useDuration:k};return x}function Kd(e,t,r,a,o){let n=o.measure(10),s=o.measure(50),i=ur(.1,.99),c=!1;function l(){return!(c||!e.reachedAny(r.get())||!e.reachedAny(t.get()))}function u(p){if(!l())return;let m=e.reachedMin(t.get())?"min":"max",g=Te(e[m]-t.get()),y=r.get()-t.get(),v=i.constrain(g/s);r.subtract(y*v),!p&&Te(y)<n&&(r.set(e.constrain(r.get())),a.useDuration(25).useBaseFriction())}function d(p){c=!p}return{shouldConstrain:l,constrain:u,toggleActive:d}}function Yd(e,t,r,a,o){let n=ur(-t+e,0),s=d(),i=u(),c=f();function l(m,g){return Vr(m,g)<=1}function u(){let m=s[0],g=kt(s),y=s.lastIndexOf(m),v=s.indexOf(g)+1;return ur(y,v)}function d(){return r.map((m,g)=>{let{min:y,max:v}=n,N=n.constrain(m),k=!g,I=zo(r,g);return k?v:I||l(y,N)?y:l(v,N)?v:N}).map(m=>parseFloat(m.toFixed(3)))}function f(){if(t<=e+o)return[n.max];if(a==="keepSnaps")return s;let{min:m,max:g}=i;return s.slice(m,g)}return{snapsContained:c,scrollContainLimit:i}}function qd(e,t,r){let a=t[0],o=r?a-e:kt(t);return{limit:ur(o,a)}}function Qd(e,t,r,a){let n=t.min+.1,s=t.max+.1,{reachedMin:i,reachedMax:c}=ur(n,s);function l(f){return f===1?c(r.get()):f===-1?i(r.get()):!1}function u(f){if(!l(f))return;let p=e*(f*-1);a.forEach(m=>m.add(p))}return{loop:u}}function Zd(e){let{max:t,length:r}=e;function a(n){let s=n-t;return r?s/-r:0}return{get:a}}function Jd(e,t,r,a,o){let{startEdge:n,endEdge:s}=e,{groupSlides:i}=o,c=d().map(t.measure),l=f(),u=p();function d(){return i(a).map(g=>kt(g)[s]-g[0][n]).map(Te)}function f(){return a.map(g=>r[n]-g[n]).map(g=>-Te(g))}function p(){return i(l).map(g=>g[0]).map((g,y)=>g+c[y])}return{snaps:l,snapsAligned:u}}function eu(e,t,r,a,o,n){let{groupSlides:s}=o,{min:i,max:c}=a,l=u();function u(){let f=s(n),p=!e||t==="keepSnaps";return r.length===1?[n]:p?f:f.slice(i,c).map((m,g,y)=>{let v=!g,N=zo(y,g);if(v){let k=kt(y[0])+1;return hi(k)}if(N){let k=Yr(n)-kt(y)[0]+1;return hi(k,kt(y)[0])}return m})}return{slideRegistry:l}}function tu(e,t,r,a,o){let{reachedAny:n,removeOffset:s,constrain:i}=a;function c(m){return m.concat().sort((g,y)=>Te(g)-Te(y))[0]}function l(m){let g=e?s(m):i(m),y=t.map((N,k)=>({diff:u(N-g,0),index:k})).sort((N,k)=>Te(N.diff)-Te(k.diff)),{index:v}=y[0];return{index:v,distance:g}}function u(m,g){let y=[m,m+r,m-r];if(!e)return m;if(!g)return c(y);let v=y.filter(N=>Ho(N)===g);return v.length?c(v):kt(y)-r}function d(m,g){let y=t[m]-o.get(),v=u(y,g);return{index:m,distance:v}}function f(m,g){let y=o.get()+m,{index:v,distance:N}=l(y),k=!e&&n(y);if(!g||k)return{index:v,distance:m};let I=t[v]-N,x=m+u(I,0);return{index:v,distance:x}}return{byDistance:f,byIndex:d,shortcut:u}}function ru(e,t,r,a,o,n,s){function i(d){let f=d.distance,p=d.index!==t.get();n.add(f),f&&(a.duration()?e.start():(e.update(),e.render(1),e.update())),p&&(r.set(t.get()),t.set(d.index),s.emit("select"))}function c(d,f){let p=o.byDistance(d,f);i(p)}function l(d,f){let p=t.clone().set(d),m=o.byIndex(p.get(),f);i(m)}return{distance:c,index:l}}function au(e,t,r,a,o,n,s,i){let c={passive:!0,capture:!0},l=0;function u(p){if(!i)return;function m(g){if(new Date().getTime()-l>10)return;s.emit("slideFocusStart"),e.scrollLeft=0;let N=r.findIndex(k=>k.includes(g));Uo(N)&&(o.useDuration(0),a.index(N,0),s.emit("slideFocus"))}n.add(document,"keydown",d,!1),t.forEach((g,y)=>{n.add(g,"focus",v=>{($a(i)||i(p,v))&&m(y)},c)})}function d(p){p.code==="Tab"&&(l=new Date().getTime())}return{init:u}}function $r(e){let t=e;function r(){return t}function a(c){t=s(c)}function o(c){t+=s(c)}function n(c){t-=s(c)}function s(c){return Uo(c)?c:c.get()}return{get:r,set:a,add:o,subtract:n}}function xi(e,t){let r=e.scroll==="x"?s:i,a=t.style,o=null,n=!1;function s(f){return`translate3d(${f}px,0px,0px)`}function i(f){return`translate3d(0px,${f}px,0px)`}function c(f){if(n)return;let p=Bd(e.direction(f));p!==o&&(a.transform=r(p),o=p)}function l(f){n=!f}function u(){n||(a.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:u,to:c,toggleActive:l}}function ou(e,t,r,a,o,n,s,i,c){let u=Wr(o),d=Wr(o).reverse(),f=v().concat(N());function p(S,T){return S.reduce((B,X)=>B-o[X],T)}function m(S,T){return S.reduce((B,X)=>p(B,T)>0?B.concat([X]):B,[])}function g(S){return n.map((T,B)=>({start:T-a[B]+.5+S,end:T+t-.5+S}))}function y(S,T,B){let X=g(T);return S.map(j=>{let oe=B?0:-r,w=B?r:0,L=B?"end":"start",se=X[j][L];return{index:j,loopPoint:se,slideLocation:$r(-1),translate:xi(e,c[j]),target:()=>i.get()>se?oe:w}})}function v(){let S=s[0],T=m(d,S);return y(T,r,!1)}function N(){let S=t-s[0]-1,T=m(u,S);return y(T,-r,!0)}function k(){return f.every(({index:S})=>{let T=u.filter(B=>B!==S);return p(T,t)<=.1})}function I(){f.forEach(S=>{let{target:T,translate:B,slideLocation:X}=S,j=T();j!==X.get()&&(B.to(j),X.set(j))})}function x(){f.forEach(S=>S.translate.clear())}return{canLoop:k,clear:x,loop:I,loopPoints:f}}function nu(e,t,r){let a,o=!1;function n(c){if(!r)return;function l(u){for(let d of u)if(d.type==="childList"){c.reInit(),t.emit("slidesChanged");break}}a=new MutationObserver(u=>{o||($a(r)||r(c,u))&&l(u)}),a.observe(e,{childList:!0})}function s(){a&&a.disconnect(),o=!0}return{init:n,destroy:s}}function su(e,t,r,a){let o={},n=null,s=null,i,c=!1;function l(){i=new IntersectionObserver(m=>{c||(m.forEach(g=>{let y=t.indexOf(g.target);o[y]=g}),n=null,s=null,r.emit("slidesInView"))},{root:e.parentElement,threshold:a}),t.forEach(m=>i.observe(m))}function u(){i&&i.disconnect(),c=!0}function d(m){return Xr(o).reduce((g,y)=>{let v=parseInt(y),{isIntersecting:N}=o[v];return(m&&N||!m&&!N)&&g.push(v),g},[])}function f(m=!0){if(m&&n)return n;if(!m&&s)return s;let g=d(m);return m&&(n=g),m||(s=g),g}return{init:l,destroy:u,get:f}}function iu(e,t,r,a,o,n){let{measureSize:s,startEdge:i,endEdge:c}=e,l=r[0]&&o,u=m(),d=g(),f=r.map(s),p=y();function m(){if(!l)return 0;let N=r[0];return Te(t[i]-N[i])}function g(){if(!l)return 0;let N=n.getComputedStyle(kt(a));return parseFloat(N.getPropertyValue(`margin-${c}`))}function y(){return r.map((N,k,I)=>{let x=!k,_=zo(I,k);return x?f[k]+u:_?f[k]+d:I[k+1][i]-N[i]}).map(Te)}return{slideSizes:f,slideSizesWithGaps:p,startGap:u,endGap:d}}function lu(e,t,r,a,o,n,s,i,c){let{startEdge:l,endEdge:u,direction:d}=e,f=Uo(r);function p(v,N){return Wr(v).filter(k=>k%N===0).map(k=>v.slice(k,k+N))}function m(v){return v.length?Wr(v).reduce((N,k,I)=>{let x=kt(N)||0,_=x===0,S=k===Yr(v),T=o[l]-n[x][l],B=o[l]-n[k][u],X=!a&&_?d(s):0,j=!a&&S?d(i):0,oe=Te(B-j-(T+X));return I&&oe>t+c&&N.push(k),S&&N.push(v.length),N},[]).map((N,k,I)=>{let x=Math.max(I[k-1]||0);return v.slice(x,N)}):[]}function g(v){return f?p(v,r):m(v)}return{groupSlides:g}}function cu(e,t,r,a,o,n,s){let{align:i,axis:c,direction:l,startIndex:u,loop:d,duration:f,dragFree:p,dragThreshold:m,inViewThreshold:g,slidesToScroll:y,skipSnaps:v,containScroll:N,watchResize:k,watchSlides:I,watchDrag:x,watchFocus:_}=n,S=2,T=$d(),B=T.measure(t),X=r.map(T.measure),j=zd(c,l),oe=j.measureSize(B),w=Vd(oe),L=Ud(i,oe),se=!d&&!!N,be=d||!!N,{slideSizes:Qe,slideSizesWithGaps:De,startGap:Y,endGap:tt}=iu(j,B,X,r,be,o),ze=lu(j,oe,y,d,B,X,Y,tt,S),{snaps:rt,snapsAligned:ct}=Jd(j,L,B,X,ze),Ze=-kt(rt)+kt(De),{snapsContained:Et,scrollContainLimit:at}=Yd(oe,Ze,ct,N,S),de=se?Et:ct,{limit:Oe}=qd(Ze,de,d),M=yi(Yr(de),u,d),ve=M.clone(),he=Wr(r),$=({dragHandler:br,scrollBody:Co,scrollBounds:ko,options:{loop:da}})=>{da||ko.constrain(br.pointerDown()),Co.seek()},pe=({scrollBody:br,translate:Co,location:ko,offsetLocation:da,previousLocation:dd,scrollLooper:ud,slideLooper:md,dragHandler:fd,animation:pd,eventHandler:$n,scrollBounds:gd,options:{loop:Vn}},Wn)=>{let Xn=br.settled(),vd=!gd.shouldConstrain(),Kn=Vn?Xn:Xn&&vd,Yn=Kn&&!fd.pointerDown();Yn&&pd.stop();let hd=ko.get()*Wn+dd.get()*(1-Wn);da.set(hd),Vn&&(ud.loop(br.direction()),md.loop()),Co.to(da.get()),Yn&&$n.emit("settle"),Kn||$n.emit("scroll")},_e=Hd(a,o,()=>$(No),br=>pe(No,br)),Je=.68,Tt=de[M.get()],Bt=$r(Tt),or=$r(Tt),Kt=$r(Tt),nr=$r(Tt),zr=Xd(Bt,Kt,or,nr,f,Je),xo=tu(d,de,Ze,Oe,nr),wo=ru(_e,M,ve,zr,xo,nr,s),zn=Zd(Oe),Gn=Kr(),ld=su(t,r,s,g),{slideRegistry:jn}=eu(se,N,de,at,ze,he),cd=au(e,r,jn,wo,zr,Gn,s,_),No={ownerDocument:a,ownerWindow:o,eventHandler:s,containerRect:B,slideRects:X,animation:_e,axis:j,dragHandler:Gd(j,e,a,o,nr,jd(j,o),Bt,_e,wo,zr,xo,M,s,w,p,m,v,Je,x),eventStore:Gn,percentOfView:w,index:M,indexPrevious:ve,limit:Oe,location:Bt,offsetLocation:Kt,previousLocation:or,options:n,resizeHandler:Wd(t,s,o,r,j,k,T),scrollBody:zr,scrollBounds:Kd(Oe,Kt,nr,zr,w),scrollLooper:Qd(Ze,Oe,Kt,[Bt,Kt,or,nr]),scrollProgress:zn,scrollSnapList:de.map(zn.get),scrollSnaps:de,scrollTarget:xo,scrollTo:wo,slideLooper:ou(j,oe,Ze,Qe,De,rt,de,Kt,r),slideFocus:cd,slidesHandler:nu(t,s,I),slidesInView:ld,slideIndexes:he,slideRegistry:jn,slidesToScroll:ze,target:nr,translate:xi(j,t)};return No}function du(){let e={},t;function r(l){t=l}function a(l){return e[l]||[]}function o(l){return a(l).forEach(u=>u(t,l)),c}function n(l,u){return e[l]=a(l).concat([u]),c}function s(l,u){return e[l]=a(l).filter(d=>d!==u),c}function i(){e={}}let c={init:r,emit:o,off:s,on:n,clear:i};return c}var uu={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function mu(e){function t(n,s){return bi(n,s||{})}function r(n){let s=n.breakpoints||{},i=Xr(s).filter(c=>e.matchMedia(c).matches).map(c=>s[c]).reduce((c,l)=>t(c,l),{});return t(n,i)}function a(n){return n.map(s=>Xr(s.breakpoints||{})).reduce((s,i)=>s.concat(i),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:r,optionsMediaQueries:a}}function fu(e){let t=[];function r(n,s){return t=s.filter(({options:i})=>e.optionsAtMedia(i).active!==!1),t.forEach(i=>i.init(n,e)),s.reduce((i,c)=>Object.assign(i,{[c.name]:c}),{})}function a(){t=t.filter(n=>n.destroy())}return{init:r,destroy:a}}function qr(e,t,r){let a=e.ownerDocument,o=a.defaultView,n=mu(o),s=fu(n),i=Kr(),c=du(),{mergeOptions:l,optionsAtMedia:u,optionsMediaQueries:d}=n,{on:f,off:p,emit:m}=c,g=j,y=!1,v,N=l(uu,qr.globalOptions),k=l(N),I=[],x,_,S;function T(){let{container:he,slides:$}=k;_=(Fo(he)?e.querySelector(he):he)||e.children[0];let _e=Fo($)?_.querySelectorAll($):$;S=[].slice.call(_e||_.children)}function B(he){let $=cu(e,_,S,a,o,he,c);if(he.loop&&!$.slideLooper.canLoop()){let pe=Object.assign({},he,{loop:!1});return B(pe)}return $}function X(he,$){y||(N=l(N,he),k=u(N),I=$||I,T(),v=B(k),d([N,...I.map(({options:pe})=>pe)]).forEach(pe=>i.add(pe,"change",j)),k.active&&(v.translate.to(v.location.get()),v.animation.init(),v.slidesInView.init(),v.slideFocus.init(ve),v.eventHandler.init(ve),v.resizeHandler.init(ve),v.slidesHandler.init(ve),v.options.loop&&v.slideLooper.loop(),_.offsetParent&&S.length&&v.dragHandler.init(ve),x=s.init(ve,I)))}function j(he,$){let pe=ze();oe(),X(l({startIndex:pe},he),$),c.emit("reInit")}function oe(){v.dragHandler.destroy(),v.eventStore.clear(),v.translate.clear(),v.slideLooper.clear(),v.resizeHandler.destroy(),v.slidesHandler.destroy(),v.slidesInView.destroy(),v.animation.destroy(),s.destroy(),i.clear()}function w(){y||(y=!0,i.clear(),oe(),c.emit("destroy"),c.clear())}function L(he,$,pe){!k.active||y||(v.scrollBody.useBaseFriction().useDuration($===!0?0:k.duration),v.scrollTo.index(he,pe||0))}function se(he){let $=v.index.add(1).get();L($,he,-1)}function be(he){let $=v.index.add(-1).get();L($,he,1)}function Qe(){return v.index.add(1).get()!==ze()}function De(){return v.index.add(-1).get()!==ze()}function Y(){return v.scrollSnapList}function tt(){return v.scrollProgress.get(v.offsetLocation.get())}function ze(){return v.index.get()}function rt(){return v.indexPrevious.get()}function ct(){return v.slidesInView.get()}function Ze(){return v.slidesInView.get(!1)}function Et(){return x}function at(){return v}function de(){return e}function Oe(){return _}function M(){return S}let ve={canScrollNext:Qe,canScrollPrev:De,containerNode:Oe,internalEngine:at,destroy:w,off:p,on:f,emit:m,plugins:Et,previousScrollSnap:rt,reInit:g,rootNode:de,scrollNext:se,scrollPrev:be,scrollProgress:tt,scrollSnapList:Y,scrollTo:L,selectedScrollSnap:ze,slideNodes:M,slidesInView:ct,slidesNotInView:Ze};return X(t,r),setTimeout(()=>c.emit("init"),0),ve}qr.globalOptions=void 0;function Va(e={},t=[]){let r=(0,bt.useRef)(e),a=(0,bt.useRef)(t),[o,n]=(0,bt.useState)(),[s,i]=(0,bt.useState)(),c=(0,bt.useCallback)(()=>{o&&o.reInit(r.current,a.current)},[o]);return(0,bt.useEffect)(()=>{ja(r.current,e)||(r.current=e,c())},[e,c]),(0,bt.useEffect)(()=>{gi(a.current,t)||(a.current=t,c())},[t,c]),(0,bt.useEffect)(()=>{if(pi()&&s){qr.globalOptions=Va.globalOptions;let l=qr(s,r.current,a.current);return n(l),()=>l.destroy()}else n(void 0)},[s,n]),[i,o]}Va.globalOptions=void 0;var ut=D(U(),1),wi=He.createContext(null);function Wa(){let e=He.useContext(wi);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}var Go=He.forwardRef(({orientation:e="horizontal",opts:t,setApi:r,plugins:a,className:o,children:n,...s},i)=>{let[c,l]=Va({...t,axis:e==="horizontal"?"x":"y"},a),[u,d]=He.useState(!1),[f,p]=He.useState(!1),m=He.useCallback(N=>{N&&(d(N.canScrollPrev()),p(N.canScrollNext()))},[]),g=He.useCallback(()=>{l?.scrollPrev()},[l]),y=He.useCallback(()=>{l?.scrollNext()},[l]),v=He.useCallback(N=>{N.key==="ArrowLeft"?(N.preventDefault(),g()):N.key==="ArrowRight"&&(N.preventDefault(),y())},[g,y]);return He.useEffect(()=>{!l||!r||r(l)},[l,r]),He.useEffect(()=>{if(l)return m(l),l.on("reInit",m),l.on("select",m),()=>{l?.off("select",m)}},[l,m]),(0,ut.jsx)(wi.Provider,{value:{carouselRef:c,api:l,opts:t,orientation:e||(t?.axis==="y"?"vertical":"horizontal"),scrollPrev:g,scrollNext:y,canScrollPrev:u,canScrollNext:f},children:(0,ut.jsx)("div",{ref:i,onKeyDownCapture:v,className:q("relative",o),role:"region","aria-roledescription":"carousel",...s,children:n})})});Go.displayName="Carousel";var jo=He.forwardRef(({className:e,...t},r)=>{let{carouselRef:a,orientation:o}=Wa();return(0,ut.jsx)("div",{ref:a,className:"overflow-hidden",children:(0,ut.jsx)("div",{ref:r,className:q("flex",o==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...t})})});jo.displayName="CarouselContent";var $o=He.forwardRef(({className:e,...t},r)=>{let{orientation:a}=Wa();return(0,ut.jsx)("div",{ref:r,role:"group","aria-roledescription":"slide",className:q("min-w-0 shrink-0 grow-0 basis-full",a==="horizontal"?"pl-4":"pt-4",e),...t})});$o.displayName="CarouselItem";var Vo=He.forwardRef(({className:e,variant:t="outline",size:r="icon",...a},o)=>{let{orientation:n,scrollPrev:s,canScrollPrev:i}=Wa();return(0,ut.jsxs)(O,{ref:o,variant:t,size:r,className:q("absolute  h-8 w-8 rounded-full",n==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!i,onClick:s,...a,children:[(0,ut.jsx)(Jn,{className:"h-4 w-4"}),(0,ut.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});Vo.displayName="CarouselPrevious";var Wo=He.forwardRef(({className:e,variant:t="outline",size:r="icon",...a},o)=>{let{orientation:n,scrollNext:s,canScrollNext:i}=Wa();return(0,ut.jsxs)(O,{ref:o,variant:t,size:r,className:q("absolute h-8 w-8 rounded-full",n==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!i,onClick:s,...a,children:[(0,ut.jsx)(Yt,{className:"h-4 w-4"}),(0,ut.jsx)("span",{className:"sr-only",children:"Next slide"})]})});Wo.displayName="CarouselNext";var re=D(U(),1),pu=e=>{let t=e?.toLowerCase()||"";return t.includes("python")?{icon:ba,bgGradient:"from-blue-500 to-yellow-400",shadow:"shadow-blue-500/25",text:"text-blue-600 dark:text-blue-400",border:"border-blue-200 dark:border-blue-900"}:t.includes("javascript")||t.includes("js")?{icon:Ut,bgGradient:"from-yellow-400 to-orange-500",shadow:"shadow-yellow-500/25",text:"text-yellow-600 dark:text-yellow-400",border:"border-yellow-200 dark:border-yellow-900"}:t.includes("html")||t.includes("css")?{icon:Ut,bgGradient:"from-orange-500 to-red-500",shadow:"shadow-orange-500/25",text:"text-orange-600 dark:text-orange-400",border:"border-orange-200 dark:border-orange-900"}:t.includes("react")?{icon:ls,bgGradient:"from-cyan-400 to-blue-600",shadow:"shadow-cyan-500/25",text:"text-cyan-600 dark:text-cyan-400",border:"border-cyan-200 dark:border-cyan-900"}:{icon:ts,bgGradient:"from-indigo-500 to-purple-600",shadow:"shadow-indigo-500/25",text:"text-indigo-600 dark:text-indigo-400",border:"border-indigo-200 dark:border-indigo-900"}};function Ni({challenges:e,onSelectChallenge:t,completedChallenges:r}){return(0,re.jsxs)(Go,{opts:{align:"start",loop:!1},className:"w-full py-4",children:[(0,re.jsxs)("div",{className:"flex justify-end gap-2 mb-4 px-1",children:[(0,re.jsx)(Vo,{className:"static translate-y-0 translate-x-0 h-10 w-10 border-indigo-200 dark:border-indigo-800 bg-white dark:bg-gray-800 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/50 shadow-sm",variant:"outline"}),(0,re.jsx)(Wo,{className:"static translate-y-0 translate-x-0 h-10 w-10 border-indigo-200 dark:border-indigo-800 bg-white dark:bg-gray-800 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/50 shadow-sm",variant:"outline"})]}),(0,re.jsx)(jo,{className:"-ml-4",children:e.map((a,o)=>{let n=o>0?e[o-1]:null,i=!(n?r.includes(n.id):!0),c=r.includes(a.id);return(0,re.jsx)($o,{className:"pl-4 md:basis-1/2 lg:basis-1/3 xl:basis-1/3",children:(0,re.jsx)(gu,{challenge:a,onSelect:()=>t(a),isLocked:i,isCompleted:c,index:o+1})},a.id)})})]})}function gu({challenge:e,onSelect:t,isLocked:r,isCompleted:a,index:o}){let n=pu(e.language||"General"),s=n.icon;return(0,re.jsxs)("div",{className:`
        group relative h-[420px] w-full flex flex-col rounded-[2rem] overflow-hidden 
        transition-all duration-500 ease-out
        ${r?"scale-[0.98] opacity-90":"hover:-translate-y-3 hover:shadow-2xl hover:shadow-indigo-500/20"}
        bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800
      `,children:[(0,re.jsx)("div",{className:`absolute -top-24 -right-24 w-64 h-64 rounded-full bg-gradient-to-br ${n.bgGradient} opacity-20 blur-3xl transition-opacity duration-500 group-hover:opacity-30`}),(0,re.jsx)("div",{className:`absolute -bottom-24 -left-24 w-64 h-64 rounded-full bg-gradient-to-tr ${n.bgGradient} opacity-10 blur-3xl`}),r&&(0,re.jsxs)("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-white/30 dark:bg-black/40 backdrop-blur-md transition-all duration-500",children:[(0,re.jsx)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-full shadow-2xl mb-4 animate-in zoom-in duration-300 border border-gray-100 dark:border-gray-700",children:(0,re.jsx)(Mt,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),(0,re.jsx)("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-1",children:"Locked"}),(0,re.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 px-8 text-center leading-relaxed",children:"Complete the previous challenge to unlock this level."})]}),(0,re.jsxs)("div",{className:"relative z-10 flex flex-col h-full p-6",children:[(0,re.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,re.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,re.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-400",children:"Challenge"}),(0,re.jsx)("span",{className:"text-4xl font-black text-gray-900 dark:text-white font-pixelify",children:o.toString().padStart(2,"0")})]}),(0,re.jsx)("div",{className:`
            px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border
            ${n.border} ${n.text} bg-white dark:bg-gray-800 shadow-sm
          `,children:e.difficulty})]}),(0,re.jsxs)("div",{className:"relative h-32 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-500",children:[(0,re.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br ${n.bgGradient} opacity-20 blur-xl rounded-full scale-75`}),(0,re.jsx)(s,{className:`w-20 h-20 ${n.text} drop-shadow-md relative z-10`}),a&&!r&&(0,re.jsx)("div",{className:"absolute -right-2 -bottom-2 bg-green-500 text-white p-1.5 rounded-full shadow-lg border-2 border-white dark:border-gray-900 animate-in zoom-in",children:(0,re.jsx)(xr,{className:"w-5 h-5"})})]}),(0,re.jsxs)("div",{className:"mb-auto",children:[(0,re.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white leading-tight mb-2 line-clamp-2 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:e.title}),(0,re.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 leading-relaxed",children:e.description})]}),(0,re.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-100 dark:border-gray-800 flex items-center justify-between",children:[(0,re.jsxs)("div",{className:"flex items-center gap-2",children:[(0,re.jsx)("div",{className:"bg-yellow-100 dark:bg-yellow-900/30 p-1.5 rounded-lg text-yellow-600 dark:text-yellow-400",children:(0,re.jsx)(dt,{className:"w-4 h-4 fill-current"})}),(0,re.jsxs)("span",{className:"font-bold text-gray-900 dark:text-white",children:[e.xp," ",(0,re.jsx)("span",{className:"text-xs font-normal text-gray-500",children:"XP"})]})]}),(0,re.jsxs)(O,{onClick:t,disabled:r,className:`
              rounded-xl px-6 font-bold shadow-lg transition-all duration-300
              active:scale-95
              ${r?"bg-gray-100 text-gray-400 dark:bg-gray-800 dark:text-gray-600 shadow-none":`bg-gradient-to-r ${n.bgGradient} text-white hover:brightness-110 hover:shadow-xl hover:shadow-indigo-500/20`}
            `,children:[a?"Redo":"Start",!a&&(0,re.jsx)(Yt,{className:"w-4 h-4 ml-2"}),a&&(0,re.jsx)(ys,{className:"w-4 h-4 ml-2 fill-current"})]})]})]})]})}var Ci={BASE_XP:100,INCREMENT:50,COINS_PER_LEVEL:50};function ki(e){return Ci.BASE_XP+(e-1)*Ci.INCREMENT}function Lr(e){let t=1,r=e,a=ki(t);for(;r>=a;)r-=a,t++,a=ki(t);return{currentLevel:t,currentXP:r,totalXP:e,xpForNextLevel:a,progressPercent:Math.min(100,r/a*100)}}var Xo=D(J(),1);var vu=[{name:"Novice",minXp:0,color:"text-gray-500"},{name:"Bronze",minXp:500,color:"text-orange-600"},{name:"Silver",minXp:2e3,color:"text-slate-400"},{name:"Gold",minXp:5e3,color:"text-yellow-500"},{name:"Platinum",minXp:1e4,color:"text-cyan-400"},{name:"Diamond",minXp:25e3,color:"text-indigo-400"}];function Xa(e){let t=[...vu].reverse().find(r=>e>=r.minXp);return t?t.name:"Novice"}async function Ri(e){try{let{count:t,error:r}=await ee.from("users").select("*",{count:"exact",head:!0}).gt("trophies",e);if(r)throw r;return(t||0)+1}catch(t){return console.error("Error fetching rank:",t),0}}function Si(){let{user:e,updateProfile:t}=Ge(),[r,a]=(0,Xo.useState)(!1),[o,n]=(0,Xo.useState)({isOpen:!1,newLevel:1,rewards:[]});return{grantXP:async i=>{if(!e||r)return;a(!0);let c=e.xp||0,l=e.level||1,u=e.league||"Novice",d=c+i,{currentLevel:f}=Lr(d),p=Xa(d),m={xp:d,level:f,activeDates:Array.from(new Set([...e.activeDates||[],new Date().toISOString().split("T")[0]]))};if(p!==u&&(m.league=p,H.success(`Promoted to ${p} League! \u{1F3C6}`)),f>l){let g=[{type:"coin",label:"100 Coins"},{type:"unlock",label:"Streak Freeze"}];m.coins=(e.coins||0)+100,m.streakFreezes=(e.streakFreezes||0)+1,n({isOpen:!0,newLevel:f,rewards:g})}else H.success(`+${i} XP`);await t(m),a(!1)},levelUpModal:{...o,close:()=>n(i=>({...i,isOpen:!1}))},isProcessing:r}}var Ka=D(J(),1),Se=D(U(),1);function Di({isOpen:e,newLevel:t,rewards:r,onClose:a}){let[o,n]=(0,Ka.useState)(!1);return(0,Ka.useEffect)(()=>{if(e){n(!0);let s=setTimeout(()=>n(!1),3e3);return()=>clearTimeout(s)}},[e]),(0,Se.jsx)(Ce,{open:e,onOpenChange:s=>!s&&a(),children:(0,Se.jsx)(ke,{className:"sm:max-w-md bg-transparent border-none shadow-none p-0 flex items-center justify-center min-h-[500px]",children:(0,Se.jsxs)(ae.div,{initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0},className:"bg-gradient-to-b from-indigo-900 to-slate-900 border-2 border-indigo-500/50 p-8 rounded-3xl w-full max-w-sm text-center shadow-2xl relative overflow-hidden",children:[(0,Se.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-full bg-indigo-500/20 blur-3xl rounded-full -z-10"}),o&&(0,Se.jsx)("div",{className:"absolute inset-0 pointer-events-none bg-yellow-500/10 animate-pulse z-0"}),(0,Se.jsxs)(ae.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,delay:.2},className:"w-24 h-24 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-white shadow-lg relative z-10",children:[(0,Se.jsx)("span",{className:"text-4xl font-black text-white drop-shadow-md",children:t}),(0,Se.jsx)(At,{className:"absolute -top-6 -right-6 w-12 h-12 text-yellow-300 drop-shadow-lg animate-bounce"})]}),(0,Se.jsx)("h2",{className:"text-3xl font-black text-white mb-2 uppercase tracking-wide",children:"Level Up!"}),(0,Se.jsxs)("p",{className:"text-indigo-200 mb-8 flex items-center justify-center gap-2",children:[(0,Se.jsx)(Dr,{className:"w-4 h-4 text-yellow-300"}),"You are getting stronger!"]}),(0,Se.jsxs)("div",{className:"space-y-3 mb-8 text-left bg-black/20 p-4 rounded-2xl border border-white/10",children:[(0,Se.jsx)("p",{className:"text-xs font-bold text-indigo-300 uppercase tracking-wider mb-2",children:"Rewards Claimed"}),r.map((s,i)=>(0,Se.jsxs)(ae.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.4+i*.1},className:"flex items-center gap-3 bg-white/5 p-2 rounded-lg",children:[s.type==="coin"&&(0,Se.jsx)("div",{className:"p-2 bg-yellow-500/20 rounded-full",children:(0,Se.jsx)(ss,{className:"w-5 h-5 text-yellow-400"})}),s.type==="badge"&&(0,Se.jsx)("div",{className:"p-2 bg-purple-500/20 rounded-full",children:(0,Se.jsx)(sr,{className:"w-5 h-5 text-purple-400"})}),s.type==="unlock"&&(0,Se.jsx)("div",{className:"p-2 bg-green-500/20 rounded-full",children:(0,Se.jsx)(Ct,{className:"w-5 h-5 text-green-400"})}),(0,Se.jsx)("span",{className:"font-bold text-white text-sm",children:s.label})]},i))]}),(0,Se.jsx)(O,{onClick:a,className:"w-full h-12 text-lg font-bold bg-green-500 hover:bg-green-600 text-white rounded-xl shadow-lg shadow-green-500/25 transition-all hover:scale-105 active:scale-95",children:"Claim Rewards"})]})})})}var z=D(U(),1);function Pi({onTabChange:e}){let{user:t}=Ge(),r=yr(),[a,o]=(0,$t.useState)([]),[n,s]=(0,$t.useState)(!0),[i,c]=(0,$t.useState)({chapter:1,title:"Loading...",isCompleted:!1}),{grantXP:l,levelUpModal:u,isProcessing:d}=Si();(0,$t.useEffect)(()=>{(async()=>{try{let{data:N,error:k}=await ee.from("challenges").select("*");if(k)throw k;if(N){let I=N.sort((x,_)=>x.page-_.page);o(I)}}catch(N){console.error("Error fetching challenges:",N)}finally{s(!1)}})()},[]);let f=(0,$t.useCallback)(async()=>{if(t)try{let{data:v,error:N}=await ee.from("lessons").select("id, title, order_index").order("order_index",{ascending:!0});if(N&&console.error("Error fetching lessons:",N),v){let k=t?.completedChapters||[],I=v.find(x=>!k.includes(x.id));I?c({chapter:I.order_index,title:I.title,isCompleted:!1}):v.length>0?c({chapter:v.length,title:"Mastery Reached",isCompleted:!0}):c({chapter:1,title:"The Beginning",isCompleted:!1})}}catch(v){console.error("Failed to calculate current chapter:",v)}},[t]);(0,$t.useEffect)(()=>{f()},[f]);let p=Lr(t?.xp||0),m={level:p.currentLevel,currentBarXP:p.currentXP,maxBarXP:p.xpForNextLevel,streak:t?.streaks||0,trophies:t?.trophies||0,league:t?.league||"Novice",starsEarned:t?.completedChapters?.length||0},g=v=>{r("/solo-challenge",{state:{challenge:v}})},y={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return(0,z.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 pb-12",children:[(0,z.jsx)(Di,{isOpen:u.isOpen,newLevel:u.newLevel,rewards:u.rewards,onClose:u.close}),(0,z.jsxs)(ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-xl",children:[(0,z.jsx)("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 h-64 w-64 rounded-full bg-white/10 blur-3xl"}),(0,z.jsx)("div",{className:"absolute bottom-0 left-0 -ml-16 -mb-16 h-64 w-64 rounded-full bg-white/10 blur-3xl"}),(0,z.jsx)("div",{className:"relative p-8 md:p-10",children:(0,z.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,z.jsxs)("span",{className:"bg-white/20 backdrop-blur-md px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider flex items-center gap-1",children:[m.league," League"]})}),(0,z.jsxs)("h1",{className:"text-3xl md:text-4xl font-extrabold mb-2 tracking-tight font-pixelify",children:["Welcome back, ",t?.displayName||"Traveler","!"]})]}),(0,z.jsxs)("div",{className:"bg-black/20 backdrop-blur-sm rounded-2xl p-6 min-w-[280px] border border-white/10",children:[(0,z.jsxs)("div",{className:"flex justify-between items-end mb-2",children:[(0,z.jsxs)("span",{className:"text-2xl font-black flex items-center gap-2",children:["Level ",m.level,(0,z.jsx)(Dr,{className:"w-4 h-4 text-yellow-300"})]}),(0,z.jsxs)("span",{className:"text-sm text-indigo-200 font-mono",children:[Math.round(m.currentBarXP),"/",m.maxBarXP," XP"]})]}),(0,z.jsx)(Ar,{value:m.currentBarXP/m.maxBarXP*100,className:"h-3 bg-black/30",indicatorClassName:"bg-gradient-to-r from-yellow-300 to-yellow-500"}),(0,z.jsxs)("p",{className:"text-xs text-indigo-200 mt-3 text-right",children:[Math.round(m.maxBarXP-m.currentBarXP)," XP to Level"," ",m.level+1]})]})]})})]}),(0,z.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,z.jsx)(Ya,{icon:er,label:"Day Streak",value:m.streak.toString(),color:"text-orange-500",bgColor:"bg-orange-50 dark:bg-orange-950/30",iconClassName:"h-6 w-5"}),(0,z.jsx)(Ya,{icon:zt,label:"Total Trophies",value:m.trophies.toLocaleString(),color:"text-yellow-500",bgColor:"bg-yellow-50 dark:bg-yellow-950/30"}),(0,z.jsx)(Ya,{icon:Ca,label:"Current League",value:m.league,color:"text-purple-500",bgColor:"bg-purple-50 dark:bg-purple-950/30"}),(0,z.jsx)(Ya,{icon:cr,label:"Chapters Done",value:m.starsEarned.toString(),color:"text-blue-500",bgColor:"bg-blue-50 dark:bg-blue-950/30"})]}),(0,z.jsxs)(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"group relative overflow-hidden rounded-3xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 shadow-md hover:shadow-xl transition-all duration-300",children:[(0,z.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/5 to-red-500/5 dark:from-orange-900/20 dark:to-red-900/20 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,z.jsxs)("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row items-center justify-between gap-6",children:[(0,z.jsxs)("div",{className:"flex items-start gap-5",children:[(0,z.jsx)("div",{className:"h-16 w-16 shrink-0 rounded-2xl bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400 shadow-sm",children:(0,z.jsx)(is,{className:"w-8 h-8"})}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,z.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider bg-orange-100 text-orange-700 dark:bg-orange-950 dark:text-orange-300",children:"Adventure Mode"}),i.isCompleted&&(0,z.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider bg-green-100 text-green-700",children:"Completed"})]}),(0,z.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.isCompleted?"All Adventures Completed!":"Where you left off"}),(0,z.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-1 max-w-md",children:i.isCompleted?"You have mastered all currently available chapters. Feel free to replay any level.":(0,z.jsxs)(z.Fragment,{children:["You are currently facing challenges in"," ",(0,z.jsxs)("span",{className:"font-bold text-orange-600 dark:text-orange-400",children:["Chapter ",i.chapter,":"," ",i.title]}),". Ready to continue your journey?"]})})]})]}),(0,z.jsxs)(O,{onClick:()=>r("/play/adventure"),className:"w-full md:w-auto h-12 px-8 text-base font-bold bg-orange-600 hover:bg-orange-700 text-white rounded-xl shadow-lg shadow-orange-500/20 transition-transform active:scale-95",children:[i.isCompleted?"Replay Levels":"Resume Journey"," ",(0,z.jsx)(Yt,{className:"w-5 h-5 ml-2"})]})]})]}),(0,z.jsxs)(ae.div,{variants:y,initial:"hidden",animate:"visible",className:"space-y-4 pt-2",children:[(0,z.jsx)("div",{className:"flex justify-between items-end px-2",children:(0,z.jsxs)("div",{children:[(0,z.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,z.jsx)(Ut,{className:"w-6 h-6 text-indigo-500"}),"Practice Arena"]}),(0,z.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"Complete challenges in order to unlock the next one."})]})}),(0,z.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-white dark:from-gray-900 dark:to-gray-900/50 rounded-[2rem] p-6 border border-gray-100 dark:border-gray-800 shadow-sm relative overflow-hidden",children:[(0,z.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),(0,z.jsx)("div",{className:"relative z-10",children:n?(0,z.jsx)("div",{className:"flex justify-center py-24",children:(0,z.jsx)(Fe,{className:"h-10 w-10 animate-spin text-indigo-500"})}):a.length>0?(0,z.jsx)(Ni,{challenges:a,onSelectChallenge:g,completedChallenges:t?.completedChapters||[]}):(0,z.jsx)("div",{className:"text-center py-20 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:(0,z.jsx)("p",{className:"text-gray-500 text-lg",children:"No challenges found in the database."})})})]})]})]})}function Ya({icon:e,label:t,value:r,color:a,bgColor:o}){return(0,z.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-4 border border-gray-100 dark:border-gray-800 shadow-sm dark:hover:shadow-white hover:shadow-md flex items-center gap-4 transition-transform hover:scale-105",children:[(0,z.jsx)("div",{className:`p-3 rounded-xl ${o}`,children:(0,z.jsx)(e,{className:`w-8 h-8 ${a}`})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-2xl font-black text-gray-900 dark:text-white",children:r}),(0,z.jsx)("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:t})]})]})}var Ei=D(U(),1),hu=Is("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Me({className:e,variant:t,...r}){return(0,Ei.jsx)("div",{className:q(hu({variant:t}),e),...r})}var Qr=D(J(),1);function qa(e,t){if(!e||!e.length)return;let r=Object.keys(e[0]),a=[r.join(","),...e.map(i=>r.map(c=>{let l=i[c]||"";return typeof l=="string"&&l.includes(",")&&(l=`"${l}"`),l}).join(","))].join(`
`),o=new Blob([a],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(o),s=document.createElement("a");s.setAttribute("href",n),s.setAttribute("download",`${t}_${new Date().toISOString().split("T")[0]}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}var Q=D(U(),1);function Ti(){let[e,t]=(0,Qr.useState)([]),[r,a]=(0,Qr.useState)(!0);(0,Qr.useEffect)(()=>{(async()=>{try{let{data:s,error:i}=await ee.from("match_history").select("*").order("played_at",{ascending:!1});if(i)throw i;s&&t(s)}catch(s){console.error("Error fetching match history:",s),H.error("Failed to load match history.")}finally{a(!1)}})()},[]);let o=n=>{if(!n.results||n.results.length===0){H.error("No detailed results available for this match.");return}let s=n.results.map(i=>({Rank:i.rank,"Player Name":i.name,"Total Score":i.score,Accuracy:i.accuracy,"Game Mode":n.mode,"Date Played":new Date(n.played_at).toLocaleDateString()}));qa(s,`Match_${n.mode.replace(/\s+/g,"_")}_${n.id.slice(0,4)}`),H.success(`Exported results for ${n.mode}`)};return(0,Q.jsxs)(ie,{className:"border-gray-200 dark:border-gray-800",children:[(0,Q.jsxs)(ye,{children:[(0,Q.jsx)(xe,{children:"Multiplayer Match History"}),(0,Q.jsx)(Ht,{children:"Review past game sessions and export results."})]}),(0,Q.jsx)(ge,{children:(0,Q.jsx)("div",{className:"rounded-md border border-gray-200 dark:border-gray-800 overflow-hidden",children:(0,Q.jsx)("div",{className:"overflow-x-auto",children:(0,Q.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,Q.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800 font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700",children:(0,Q.jsxs)("tr",{children:[(0,Q.jsx)("th",{className:"p-4",children:"Game Session"}),(0,Q.jsx)("th",{className:"p-4",children:"Date & Time"}),(0,Q.jsx)("th",{className:"p-4",children:"Participants"}),(0,Q.jsx)("th",{className:"p-4",children:"Winner"}),(0,Q.jsx)("th",{className:"p-4 text-right",children:"Actions"})]})}),(0,Q.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800 bg-white dark:bg-gray-900",children:r?(0,Q.jsx)("tr",{children:(0,Q.jsxs)("td",{colSpan:5,className:"p-12 text-center",children:[(0,Q.jsx)(Fe,{className:"animate-spin mx-auto w-8 h-8 text-indigo-500"}),(0,Q.jsx)("p",{className:"text-gray-500 mt-2",children:"Loading matches..."})]})}):e.length===0?(0,Q.jsx)("tr",{children:(0,Q.jsx)("td",{colSpan:5,className:"p-12 text-center text-gray-500",children:(0,Q.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,Q.jsx)(Qn,{className:"w-8 h-8 opacity-20"}),(0,Q.jsx)("p",{children:"No matches found."})]})})}):e.map(n=>(0,Q.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[(0,Q.jsx)("td",{className:"p-4",children:(0,Q.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Q.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg text-purple-600",children:(0,Q.jsx)(pa,{className:"w-5 h-5"})}),(0,Q.jsxs)("div",{children:[(0,Q.jsx)("div",{className:"font-bold text-gray-900 dark:text-white",children:n.mode}),(0,Q.jsxs)("div",{className:"text-xs text-gray-500 font-mono",children:["ID: ",n.id.slice(0,8),"..."]})]})]})}),(0,Q.jsx)("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:(0,Q.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Q.jsx)(qt,{className:"w-4 h-4"}),new Date(n.played_at).toLocaleDateString(),(0,Q.jsxs)("span",{className:"text-xs opacity-70",children:["(",new Date(n.played_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),")"]})]})}),(0,Q.jsx)("td",{className:"p-4",children:(0,Q.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Q.jsx)(ya,{className:"w-4 h-4 text-gray-400"}),(0,Q.jsxs)("span",{children:[n.participants_count," Players"]})]})}),(0,Q.jsx)("td",{className:"p-4",children:n.winner_name?(0,Q.jsxs)(Me,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 gap-1",children:[(0,Q.jsx)(At,{className:"w-3 h-3"})," ",n.winner_name]}):(0,Q.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})}),(0,Q.jsx)("td",{className:"p-4 text-right",children:(0,Q.jsxs)(O,{size:"sm",variant:"outline",onClick:()=>o(n),className:"gap-2",children:[(0,Q.jsx)(ua,{className:"w-4 h-4"})," Results"]})})]},n.id))})]})})})})]})}var fe=D(U(),1);function Mi(){let e=yr(),{user:t}=Ge(),r=t?.level||1,a=[{id:"adventure",title:"C# Adventures",description:"Your main journey. Master C# concepts step-by-step through interactive lessons and mini-games.",icon:js,color:"text-emerald-500",bgColor:"bg-emerald-500/10",borderColor:"hover:border-emerald-500/50",route:"/play/adventure",minLevel:1},{id:"multiplayer",title:"Multiplayer Arena",description:"Compete with peers in real-time coding battles. Prove your speed and accuracy.",icon:ya,color:"text-indigo-500",bgColor:"bg-indigo-500/10",borderColor:"hover:border-indigo-500/50",route:"/play/multiplayer",minLevel:5},{id:"challenges",title:"C#allenges",description:"Test your logic with raw machine problems. No hand-holding, just code.",icon:Ut,color:"text-orange-500",bgColor:"bg-orange-500/10",borderColor:"hover:border-orange-500/50",route:"/play/challenges",minLevel:1}];return(0,fe.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8 pb-12 pt-4 px-4",children:[(0,fe.jsx)(ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-8",children:(0,fe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,fe.jsx)("div",{className:"p-3 bg-indigo-600 rounded-xl shadow-lg shadow-indigo-600/20",children:(0,fe.jsx)(Sa,{className:"w-10 h-10 text-white"})}),(0,fe.jsxs)("div",{children:[(0,fe.jsx)("h1",{className:"text-3xl font-black tracking-tight text-foreground",children:"Game Center"}),(0,fe.jsx)("p",{className:"text-muted-foreground",children:"Choose your path and level up your skills."})]})]})}),(0,fe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map((o,n)=>{let s=r<o.minLevel;return(0,fe.jsx)(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1},className:"h-full",children:(0,fe.jsxs)(ie,{className:q("h-full relative overflow-hidden transition-all duration-300 border-2",s?"opacity-80 grayscale-[0.5] border-dashed":`cursor-pointer hover:shadow-xl hover:-translate-y-1 ${o.borderColor}`),onClick:()=>!s&&e(o.route),children:[s&&(0,fe.jsxs)("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-[1px] z-20 flex flex-col items-center justify-center text-center p-6",children:[(0,fe.jsx)("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-3",children:(0,fe.jsx)(Mt,{className:"w-6 h-6 text-muted-foreground"})}),(0,fe.jsx)("p",{className:"font-bold text-foreground",children:"Locked"}),(0,fe.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Reach Level ",o.minLevel," to unlock"]})]}),(0,fe.jsx)("div",{className:q("absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl -mr-16 -mt-16 opacity-20",o.color.replace("text-","bg-"))}),(0,fe.jsxs)(ye,{children:[(0,fe.jsx)("div",{className:q("w-14 h-14 rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110",o.bgColor),children:(0,fe.jsx)(o.icon,{className:q("w-10 h-10",o.color)})}),(0,fe.jsxs)(xe,{className:"text-xl flex items-center justify-between",children:[o.title,!s&&o.id==="adventure"&&(0,fe.jsx)(Me,{variant:"secondary",className:"text-[10px] bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"RECOMMENDED"})]})]}),(0,fe.jsxs)(ge,{className:"space-y-6",children:[(0,fe.jsx)("p",{className:"text-muted-foreground text-sm leading-relaxed min-h-[60px]",children:o.description}),(0,fe.jsxs)(O,{variant:s?"outline":"default",className:q("w-full justify-between group",!s&&"bg-foreground text-background hover:bg-foreground/90"),disabled:s,children:[s?"Locked":"Play Now",!s&&(0,fe.jsx)(Yt,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]})},o.id)})}),(0,fe.jsx)("div",{className:"mt-8",children:(0,fe.jsx)(Ti,{})})]})}var st=D(J(),1);var Vt=D(J(),1);var Ve=D(J(),1);var Ig=!!(typeof window<"u"&&window.document&&window.document.createElement);function Zr(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return t?.(o)}}var V=D(J(),1);var Lg=!!(typeof window<"u"&&window.document&&window.document.createElement);function Re(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return t?.(o)}}var Ie=D(J(),1);var Yo=D(U(),1),bu="DismissableLayer",Ko="dismissableLayer.update",yu="dismissableLayer.pointerDownOutside",xu="dismissableLayer.focusOutside",Ii,Li=Ie.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qo=Ie.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:n,onInteractOutside:s,onDismiss:i,...c}=e,l=Ie.useContext(Li),[u,d]=Ie.useState(null),f=u?.ownerDocument??globalThis?.document,[,p]=Ie.useState({}),m=Ne(t,S=>d(S)),g=Array.from(l.layers),[y]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(y),N=u?g.indexOf(u):-1,k=l.layersWithOutsidePointerEventsDisabled.size>0,I=N>=v,x=Cu(S=>{let T=S.target,B=[...l.branches].some(X=>X.contains(T));!I||B||(o?.(S),s?.(S),S.defaultPrevented||i?.())},f),_=ku(S=>{let T=S.target;[...l.branches].some(X=>X.contains(T))||(n?.(S),s?.(S),S.defaultPrevented||i?.())},f);return Pa(S=>{N===l.layers.size-1&&(a?.(S),!S.defaultPrevented&&i&&(S.preventDefault(),i()))},f),Ie.useEffect(()=>{if(u)return r&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(Ii=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),Ai(),()=>{r&&l.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Ii)}},[u,f,r,l]),Ie.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),Ai())},[u,l]),Ie.useEffect(()=>{let S=()=>p({});return document.addEventListener(Ko,S),()=>document.removeEventListener(Ko,S)},[]),(0,Yo.jsx)(we.div,{...c,ref:m,style:{pointerEvents:k?I?"auto":"none":void 0,...e.style},onFocusCapture:Re(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Re(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Re(e.onPointerDownCapture,x.onPointerDownCapture)})});qo.displayName=bu;var wu="DismissableLayerBranch",Nu=Ie.forwardRef((e,t)=>{let r=Ie.useContext(Li),a=Ie.useRef(null),o=Ne(t,a);return Ie.useEffect(()=>{let n=a.current;if(n)return r.branches.add(n),()=>{r.branches.delete(n)}},[r.branches]),(0,Yo.jsx)(we.div,{...e,ref:o})});Nu.displayName=wu;function Cu(e,t=globalThis?.document){let r=ht(e),a=Ie.useRef(!1),o=Ie.useRef(()=>{});return Ie.useEffect(()=>{let n=i=>{if(i.target&&!a.current){let l=function(){_i(yu,r,u,{discrete:!0})};var c=l;let u={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=l,t.addEventListener("click",o.current,{once:!0})):l()}else t.removeEventListener("click",o.current);a.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",n)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",n),t.removeEventListener("click",o.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function ku(e,t=globalThis?.document){let r=ht(e),a=Ie.useRef(!1);return Ie.useEffect(()=>{let o=n=>{n.target&&!a.current&&_i(xu,r,{originalEvent:n},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function Ai(){let e=new CustomEvent(Ko);document.dispatchEvent(e)}function _i(e,t,r,{discrete:a}){let o=r.originalEvent.target,n=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&o.addEventListener(e,t,{once:!0}),a?Tr(o,n):o.dispatchEvent(n)}var ot=D(J(),1);var Oi=D(J(),1);function Ru(e,t){return Oi.useReducer((r,a)=>t[r][a]??r,e)}var _r=e=>{let{present:t,children:r}=e,a=Su(t),o=typeof r=="function"?r({present:a.isPresent}):ot.Children.only(r),n=Ne(a.ref,Du(o));return typeof r=="function"||a.isPresent?ot.cloneElement(o,{ref:n}):null};_r.displayName="Presence";function Su(e){let[t,r]=ot.useState(),a=ot.useRef(null),o=ot.useRef(e),n=ot.useRef("none"),s=e?"mounted":"unmounted",[i,c]=Ru(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ot.useEffect(()=>{let l=Qa(a.current);n.current=i==="mounted"?l:"none"},[i]),Gt(()=>{let l=a.current,u=o.current;if(u!==e){let f=n.current,p=Qa(l);e?c("MOUNT"):p==="none"||l?.display==="none"?c("UNMOUNT"):c(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,c]),Gt(()=>{if(t){let l,u=t.ownerDocument.defaultView??window,d=p=>{let g=Qa(a.current).includes(CSS.escape(p.animationName));if(p.target===t&&g&&(c("ANIMATION_END"),!o.current)){let y=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},f=p=>{p.target===t&&(n.current=Qa(a.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:ot.useCallback(l=>{a.current=l?getComputedStyle(l):null,r(l)},[])}}function Qa(e){return e?.animationName||"none"}function Du(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Xe=D(J(),1);var Vg=!!(typeof window<"u"&&window.document&&window.document.createElement);function mr(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return t?.(o)}}var tr=D(U(),1),Qo="rovingFocusGroup.onEntryFocus",Pu={bubbles:!1,cancelable:!0},Jr="RovingFocusGroup",[Zo,Fi,Eu]=Ta(Jr),[Tu,Or]=gt(Jr,[Eu]),[Mu,Iu]=Tu(Jr),Bi=Xe.forwardRef((e,t)=>(0,tr.jsx)(Zo.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,tr.jsx)(Zo.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,tr.jsx)(Au,{...e,ref:t})})}));Bi.displayName=Jr;var Au=Xe.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:a,loop:o=!1,dir:n,currentTabStopId:s,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,f=Xe.useRef(null),p=Ne(t,f),m=Mr(n),[g,y]=Lt({prop:s,defaultProp:i??null,onChange:c,caller:Jr}),[v,N]=Xe.useState(!1),k=ht(l),I=Fi(r),x=Xe.useRef(!1),[_,S]=Xe.useState(0);return Xe.useEffect(()=>{let T=f.current;if(T)return T.addEventListener(Qo,k),()=>T.removeEventListener(Qo,k)},[k]),(0,tr.jsx)(Mu,{scope:r,orientation:a,dir:m,loop:o,currentTabStopId:g,onItemFocus:Xe.useCallback(T=>y(T),[y]),onItemShiftTab:Xe.useCallback(()=>N(!0),[]),onFocusableItemAdd:Xe.useCallback(()=>S(T=>T+1),[]),onFocusableItemRemove:Xe.useCallback(()=>S(T=>T-1),[]),children:(0,tr.jsx)(we.div,{tabIndex:v||_===0?-1:0,"data-orientation":a,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:mr(e.onMouseDown,()=>{x.current=!0}),onFocus:mr(e.onFocus,T=>{let B=!x.current;if(T.target===T.currentTarget&&B&&!v){let X=new CustomEvent(Qo,Pu);if(T.currentTarget.dispatchEvent(X),!X.defaultPrevented){let j=I().filter(be=>be.focusable),oe=j.find(be=>be.active),w=j.find(be=>be.id===g),se=[oe,w,...j].filter(Boolean).map(be=>be.ref.current);zi(se,u)}}x.current=!1}),onBlur:mr(e.onBlur,()=>N(!1))})})}),Ui="RovingFocusGroupItem",Hi=Xe.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:a=!0,active:o=!1,tabStopId:n,children:s,...i}=e,c=vt(),l=n||c,u=Iu(Ui,r),d=u.currentTabStopId===l,f=Fi(r),{onFocusableItemAdd:p,onFocusableItemRemove:m,currentTabStopId:g}=u;return Xe.useEffect(()=>{if(a)return p(),()=>m()},[a,p,m]),(0,tr.jsx)(Zo.ItemSlot,{scope:r,id:l,focusable:a,active:o,children:(0,tr.jsx)(we.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...i,ref:t,onMouseDown:mr(e.onMouseDown,y=>{a?u.onItemFocus(l):y.preventDefault()}),onFocus:mr(e.onFocus,()=>u.onItemFocus(l)),onKeyDown:mr(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;let v=Ou(y,u.orientation,u.dir);if(v!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let k=f().filter(I=>I.focusable).map(I=>I.ref.current);if(v==="last")k.reverse();else if(v==="prev"||v==="next"){v==="prev"&&k.reverse();let I=k.indexOf(y.currentTarget);k=u.loop?Fu(k,I+1):k.slice(I+1)}setTimeout(()=>zi(k))}}),children:typeof s=="function"?s({isCurrentTabStop:d,hasTabStop:g!=null}):s})})});Hi.displayName=Ui;var Lu={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _u(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Ou(e,t,r){let a=_u(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return Lu[a]}function zi(e,t=!1){let r=document.activeElement;for(let a of e)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}function Fu(e,t){return e.map((r,a)=>e[(t+a)%e.length])}var Za=Bi,Ja=Hi;var Z=D(U(),1),Jo=["Enter"," "],Uu=["ArrowDown","PageUp","Home"],$i=["ArrowUp","PageDown","End"],Hu=[...Uu,...$i],zu={ltr:[...Jo,"ArrowRight"],rtl:[...Jo,"ArrowLeft"]},Gu={ltr:["ArrowLeft"],rtl:["ArrowRight"]},aa="Menu",[ta,ju,$u]=Ta(aa),[fr,en]=gt(aa,[$u,Ir,Or]),oa=Ir(),Vi=Or(),[Wi,rr]=fr(aa),[Vu,na]=fr(aa),Xi=e=>{let{__scopeMenu:t,open:r=!1,children:a,dir:o,onOpenChange:n,modal:s=!0}=e,i=oa(t),[c,l]=V.useState(null),u=V.useRef(!1),d=ht(n),f=Mr(o);return V.useEffect(()=>{let p=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),(0,Z.jsx)(jr,{...i,children:(0,Z.jsx)(Wi,{scope:t,open:r,onOpenChange:d,content:c,onContentChange:l,children:(0,Z.jsx)(Vu,{scope:t,onClose:V.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:s,children:a})})})};Xi.displayName=aa;var Wu="MenuAnchor",tn=V.forwardRef((e,t)=>{let{__scopeMenu:r,...a}=e,o=oa(r);return(0,Z.jsx)(Ma,{...o,...a,ref:t})});tn.displayName=Wu;var rn="MenuPortal",[Xu,Ki]=fr(rn,{forceMount:void 0}),Yi=e=>{let{__scopeMenu:t,forceMount:r,children:a,container:o}=e,n=rr(rn,t);return(0,Z.jsx)(Xu,{scope:t,forceMount:r,children:(0,Z.jsx)(_r,{present:r||n.open,children:(0,Z.jsx)(Ea,{asChild:!0,container:o,children:a})})})};Yi.displayName=rn;var yt="MenuContent",[Ku,an]=fr(yt),qi=V.forwardRef((e,t)=>{let r=Ki(yt,e.__scopeMenu),{forceMount:a=r.forceMount,...o}=e,n=rr(yt,e.__scopeMenu),s=na(yt,e.__scopeMenu);return(0,Z.jsx)(ta.Provider,{scope:e.__scopeMenu,children:(0,Z.jsx)(_r,{present:a||n.open,children:(0,Z.jsx)(ta.Slot,{scope:e.__scopeMenu,children:s.modal?(0,Z.jsx)(Yu,{...o,ref:t}):(0,Z.jsx)(qu,{...o,ref:t})})})})}),Yu=V.forwardRef((e,t)=>{let r=rr(yt,e.__scopeMenu),a=V.useRef(null),o=Ne(t,a);return V.useEffect(()=>{let n=a.current;if(n)return Xs(n)},[]),(0,Z.jsx)(on,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Re(e.onFocusOutside,n=>n.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),qu=V.forwardRef((e,t)=>{let r=rr(yt,e.__scopeMenu);return(0,Z.jsx)(on,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Qu=Ts("MenuContent.ScrollLock"),on=V.forwardRef((e,t)=>{let{__scopeMenu:r,loop:a=!1,trapFocus:o,onOpenAutoFocus:n,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:m,...g}=e,y=rr(yt,r),v=na(yt,r),N=oa(r),k=Vi(r),I=ju(r),[x,_]=V.useState(null),S=V.useRef(null),T=Ne(t,S,y.onContentChange),B=V.useRef(0),X=V.useRef(""),j=V.useRef(0),oe=V.useRef(null),w=V.useRef("right"),L=V.useRef(0),se=m?Ws:V.Fragment,be=m?{as:Qu,allowPinchZoom:!0}:void 0,Qe=Y=>{let tt=X.current+Y,ze=I().filter(de=>!de.disabled),rt=document.activeElement,ct=ze.find(de=>de.ref.current===rt)?.textValue,Ze=ze.map(de=>de.textValue),Et=dm(Ze,tt,ct),at=ze.find(de=>de.textValue===Et)?.ref.current;(function de(Oe){X.current=Oe,window.clearTimeout(B.current),Oe!==""&&(B.current=window.setTimeout(()=>de(""),1e3))})(tt),at&&setTimeout(()=>at.focus())};V.useEffect(()=>()=>window.clearTimeout(B.current),[]),Vs();let De=V.useCallback(Y=>w.current===oe.current?.side&&mm(Y,oe.current?.area),[]);return(0,Z.jsx)(Ku,{scope:r,searchRef:X,onItemEnter:V.useCallback(Y=>{De(Y)&&Y.preventDefault()},[De]),onItemLeave:V.useCallback(Y=>{De(Y)||(S.current?.focus(),_(null))},[De]),onTriggerLeave:V.useCallback(Y=>{De(Y)&&Y.preventDefault()},[De]),pointerGraceTimerRef:j,onPointerGraceIntentChange:V.useCallback(Y=>{oe.current=Y},[]),children:(0,Z.jsx)(se,{...be,children:(0,Z.jsx)($s,{asChild:!0,trapped:o,onMountAutoFocus:Re(n,Y=>{Y.preventDefault(),S.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:(0,Z.jsx)(qo,{asChild:!0,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:(0,Z.jsx)(Za,{asChild:!0,...k,dir:v.dir,orientation:"vertical",loop:a,currentTabStopId:x,onCurrentTabStopIdChange:_,onEntryFocus:Re(c,Y=>{v.isUsingKeyboardRef.current||Y.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,Z.jsx)(Ia,{role:"menu","aria-orientation":"vertical","data-state":ml(y.open),"data-radix-menu-content":"",dir:v.dir,...N,...g,ref:T,style:{outline:"none",...g.style},onKeyDown:Re(g.onKeyDown,Y=>{let ze=Y.target.closest("[data-radix-menu-content]")===Y.currentTarget,rt=Y.ctrlKey||Y.altKey||Y.metaKey,ct=Y.key.length===1;ze&&(Y.key==="Tab"&&Y.preventDefault(),!rt&&ct&&Qe(Y.key));let Ze=S.current;if(Y.target!==Ze||!Hu.includes(Y.key))return;Y.preventDefault();let at=I().filter(de=>!de.disabled).map(de=>de.ref.current);$i.includes(Y.key)&&at.reverse(),lm(at)}),onBlur:Re(e.onBlur,Y=>{Y.currentTarget.contains(Y.target)||(window.clearTimeout(B.current),X.current="")}),onPointerMove:Re(e.onPointerMove,ra(Y=>{let tt=Y.target,ze=L.current!==Y.clientX;if(Y.currentTarget.contains(tt)&&ze){let rt=Y.clientX>L.current?"right":"left";w.current=rt,L.current=Y.clientX}}))})})})})})})});qi.displayName=yt;var Zu="MenuGroup",nn=V.forwardRef((e,t)=>{let{__scopeMenu:r,...a}=e;return(0,Z.jsx)(we.div,{role:"group",...a,ref:t})});nn.displayName=Zu;var Ju="MenuLabel",Qi=V.forwardRef((e,t)=>{let{__scopeMenu:r,...a}=e;return(0,Z.jsx)(we.div,{...a,ref:t})});Qi.displayName=Ju;var eo="MenuItem",ji="menu.itemSelect",ro=V.forwardRef((e,t)=>{let{disabled:r=!1,onSelect:a,...o}=e,n=V.useRef(null),s=na(eo,e.__scopeMenu),i=an(eo,e.__scopeMenu),c=Ne(t,n),l=V.useRef(!1),u=()=>{let d=n.current;if(!r&&d){let f=new CustomEvent(ji,{bubbles:!0,cancelable:!0});d.addEventListener(ji,p=>a?.(p),{once:!0}),Tr(d,f),f.defaultPrevented?l.current=!1:s.onClose()}};return(0,Z.jsx)(Zi,{...o,ref:c,disabled:r,onClick:Re(e.onClick,u),onPointerDown:d=>{e.onPointerDown?.(d),l.current=!0},onPointerUp:Re(e.onPointerUp,d=>{l.current||d.currentTarget?.click()}),onKeyDown:Re(e.onKeyDown,d=>{let f=i.searchRef.current!=="";r||f&&d.key===" "||Jo.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});ro.displayName=eo;var Zi=V.forwardRef((e,t)=>{let{__scopeMenu:r,disabled:a=!1,textValue:o,...n}=e,s=an(eo,r),i=Vi(r),c=V.useRef(null),l=Ne(t,c),[u,d]=V.useState(!1),[f,p]=V.useState("");return V.useEffect(()=>{let m=c.current;m&&p((m.textContent??"").trim())},[n.children]),(0,Z.jsx)(ta.ItemSlot,{scope:r,disabled:a,textValue:o??f,children:(0,Z.jsx)(Ja,{asChild:!0,...i,focusable:!a,children:(0,Z.jsx)(we.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...n,ref:l,onPointerMove:Re(e.onPointerMove,ra(m=>{a?s.onItemLeave(m):(s.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Re(e.onPointerLeave,ra(m=>s.onItemLeave(m))),onFocus:Re(e.onFocus,()=>d(!0)),onBlur:Re(e.onBlur,()=>d(!1))})})})}),em="MenuCheckboxItem",Ji=V.forwardRef((e,t)=>{let{checked:r=!1,onCheckedChange:a,...o}=e;return(0,Z.jsx)(ol,{scope:e.__scopeMenu,checked:r,children:(0,Z.jsx)(ro,{role:"menuitemcheckbox","aria-checked":to(r)?"mixed":r,...o,ref:t,"data-state":cn(r),onSelect:Re(o.onSelect,()=>a?.(to(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Ji.displayName=em;var el="MenuRadioGroup",[tm,rm]=fr(el,{value:void 0,onValueChange:()=>{}}),tl=V.forwardRef((e,t)=>{let{value:r,onValueChange:a,...o}=e,n=ht(a);return(0,Z.jsx)(tm,{scope:e.__scopeMenu,value:r,onValueChange:n,children:(0,Z.jsx)(nn,{...o,ref:t})})});tl.displayName=el;var rl="MenuRadioItem",al=V.forwardRef((e,t)=>{let{value:r,...a}=e,o=rm(rl,e.__scopeMenu),n=r===o.value;return(0,Z.jsx)(ol,{scope:e.__scopeMenu,checked:n,children:(0,Z.jsx)(ro,{role:"menuitemradio","aria-checked":n,...a,ref:t,"data-state":cn(n),onSelect:Re(a.onSelect,()=>o.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});al.displayName=rl;var sn="MenuItemIndicator",[ol,am]=fr(sn,{checked:!1}),nl=V.forwardRef((e,t)=>{let{__scopeMenu:r,forceMount:a,...o}=e,n=am(sn,r);return(0,Z.jsx)(_r,{present:a||to(n.checked)||n.checked===!0,children:(0,Z.jsx)(we.span,{...o,ref:t,"data-state":cn(n.checked)})})});nl.displayName=sn;var om="MenuSeparator",sl=V.forwardRef((e,t)=>{let{__scopeMenu:r,...a}=e;return(0,Z.jsx)(we.div,{role:"separator","aria-orientation":"horizontal",...a,ref:t})});sl.displayName=om;var nm="MenuArrow",il=V.forwardRef((e,t)=>{let{__scopeMenu:r,...a}=e,o=oa(r);return(0,Z.jsx)(Aa,{...o,...a,ref:t})});il.displayName=nm;var ln="MenuSub",[sm,ll]=fr(ln),im=e=>{let{__scopeMenu:t,children:r,open:a=!1,onOpenChange:o}=e,n=rr(ln,t),s=oa(t),[i,c]=V.useState(null),[l,u]=V.useState(null),d=ht(o);return V.useEffect(()=>(n.open===!1&&d(!1),()=>d(!1)),[n.open,d]),(0,Z.jsx)(jr,{...s,children:(0,Z.jsx)(Wi,{scope:t,open:a,onOpenChange:d,content:l,onContentChange:u,children:(0,Z.jsx)(sm,{scope:t,contentId:vt(),triggerId:vt(),trigger:i,onTriggerChange:c,children:r})})})};im.displayName=ln;var ea="MenuSubTrigger",cl=V.forwardRef((e,t)=>{let r=rr(ea,e.__scopeMenu),a=na(ea,e.__scopeMenu),o=ll(ea,e.__scopeMenu),n=an(ea,e.__scopeMenu),s=V.useRef(null),{pointerGraceTimerRef:i,onPointerGraceIntentChange:c}=n,l={__scopeMenu:e.__scopeMenu},u=V.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return V.useEffect(()=>u,[u]),V.useEffect(()=>{let d=i.current;return()=>{window.clearTimeout(d),c(null)}},[i,c]),(0,Z.jsx)(tn,{asChild:!0,...l,children:(0,Z.jsx)(Zi,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":o.contentId,"data-state":ml(r.open),...e,ref:Er(t,o.onTriggerChange),onClick:d=>{e.onClick?.(d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Re(e.onPointerMove,ra(d=>{n.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!r.open&&!s.current&&(n.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:Re(e.onPointerLeave,ra(d=>{u();let f=r.content?.getBoundingClientRect();if(f){let p=r.content?.dataset.side,m=p==="right",g=m?-5:5,y=f[m?"left":"right"],v=f[m?"right":"left"];n.onPointerGraceIntentChange({area:[{x:d.clientX+g,y:d.clientY},{x:y,y:f.top},{x:v,y:f.top},{x:v,y:f.bottom},{x:y,y:f.bottom}],side:p}),window.clearTimeout(i.current),i.current=window.setTimeout(()=>n.onPointerGraceIntentChange(null),300)}else{if(n.onTriggerLeave(d),d.defaultPrevented)return;n.onPointerGraceIntentChange(null)}})),onKeyDown:Re(e.onKeyDown,d=>{let f=n.searchRef.current!=="";e.disabled||f&&d.key===" "||zu[a.dir].includes(d.key)&&(r.onOpenChange(!0),r.content?.focus(),d.preventDefault())})})})});cl.displayName=ea;var dl="MenuSubContent",ul=V.forwardRef((e,t)=>{let r=Ki(yt,e.__scopeMenu),{forceMount:a=r.forceMount,...o}=e,n=rr(yt,e.__scopeMenu),s=na(yt,e.__scopeMenu),i=ll(dl,e.__scopeMenu),c=V.useRef(null),l=Ne(t,c);return(0,Z.jsx)(ta.Provider,{scope:e.__scopeMenu,children:(0,Z.jsx)(_r,{present:a||n.open,children:(0,Z.jsx)(ta.Slot,{scope:e.__scopeMenu,children:(0,Z.jsx)(on,{id:i.contentId,"aria-labelledby":i.triggerId,...o,ref:l,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{s.isUsingKeyboardRef.current&&c.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Re(e.onFocusOutside,u=>{u.target!==i.trigger&&n.onOpenChange(!1)}),onEscapeKeyDown:Re(e.onEscapeKeyDown,u=>{s.onClose(),u.preventDefault()}),onKeyDown:Re(e.onKeyDown,u=>{let d=u.currentTarget.contains(u.target),f=Gu[s.dir].includes(u.key);d&&f&&(n.onOpenChange(!1),i.trigger?.focus(),u.preventDefault())})})})})})});ul.displayName=dl;function ml(e){return e?"open":"closed"}function to(e){return e==="indeterminate"}function cn(e){return to(e)?"indeterminate":e?"checked":"unchecked"}function lm(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function cm(e,t){return e.map((r,a)=>e[(t+a)%e.length])}function dm(e,t,r){let o=t.length>1&&Array.from(t).every(l=>l===t[0])?t[0]:t,n=r?e.indexOf(r):-1,s=cm(e,Math.max(n,0));o.length===1&&(s=s.filter(l=>l!==r));let c=s.find(l=>l.toLowerCase().startsWith(o.toLowerCase()));return c!==r?c:void 0}function um(e,t){let{x:r,y:a}=e,o=!1;for(let n=0,s=t.length-1;n<t.length;s=n++){let i=t[n],c=t[s],l=i.x,u=i.y,d=c.x,f=c.y;u>a!=f>a&&r<(d-l)*(a-u)/(f-u)+l&&(o=!o)}return o}function mm(e,t){if(!t)return!1;let r={x:e.clientX,y:e.clientY};return um(r,t)}function ra(e){return t=>t.pointerType==="mouse"?e(t):void 0}var fl=Xi,pl=tn,gl=Yi,vl=qi,hl=nn,bl=Qi,yl=ro,xl=Ji,wl=tl,Nl=al,Cl=nl,kl=sl,Rl=il;var Sl=cl,Dl=ul;var Ke=D(U(),1),ao="DropdownMenu",[pm,P0]=gt(ao,[en]),et=en(),[gm,Pl]=pm(ao),El=e=>{let{__scopeDropdownMenu:t,children:r,dir:a,open:o,defaultOpen:n,onOpenChange:s,modal:i=!0}=e,c=et(t),l=Ve.useRef(null),[u,d]=Lt({prop:o,defaultProp:n??!1,onChange:s,caller:ao});return(0,Ke.jsx)(gm,{scope:t,triggerId:vt(),triggerRef:l,contentId:vt(),open:u,onOpenChange:d,onOpenToggle:Ve.useCallback(()=>d(f=>!f),[d]),modal:i,children:(0,Ke.jsx)(fl,{...c,open:u,onOpenChange:d,dir:a,modal:i,children:r})})};El.displayName=ao;var Tl="DropdownMenuTrigger",Ml=Ve.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,disabled:a=!1,...o}=e,n=Pl(Tl,r),s=et(r);return(0,Ke.jsx)(pl,{asChild:!0,...s,children:(0,Ke.jsx)(we.button,{type:"button",id:n.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":n.open?n.contentId:void 0,"data-state":n.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...o,ref:Er(t,n.triggerRef),onPointerDown:Zr(e.onPointerDown,i=>{!a&&i.button===0&&i.ctrlKey===!1&&(n.onOpenToggle(),n.open||i.preventDefault())}),onKeyDown:Zr(e.onKeyDown,i=>{a||(["Enter"," "].includes(i.key)&&n.onOpenToggle(),i.key==="ArrowDown"&&n.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(i.key)&&i.preventDefault())})})})});Ml.displayName=Tl;var vm="DropdownMenuPortal",Il=e=>{let{__scopeDropdownMenu:t,...r}=e,a=et(t);return(0,Ke.jsx)(gl,{...a,...r})};Il.displayName=vm;var Al="DropdownMenuContent",Ll=Ve.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=Pl(Al,r),n=et(r),s=Ve.useRef(!1);return(0,Ke.jsx)(vl,{id:o.contentId,"aria-labelledby":o.triggerId,...n,...a,ref:t,onCloseAutoFocus:Zr(e.onCloseAutoFocus,i=>{s.current||o.triggerRef.current?.focus(),s.current=!1,i.preventDefault()}),onInteractOutside:Zr(e.onInteractOutside,i=>{let c=i.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;(!o.modal||u)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ll.displayName=Al;var hm="DropdownMenuGroup",bm=Ve.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=et(r);return(0,Ke.jsx)(hl,{...o,...a,ref:t})});bm.displayName=hm;var ym="DropdownMenuLabel",_l=Ve.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=et(r);return(0,Ke.jsx)(bl,{...o,...a,ref:t})});_l.displayName=ym;var xm="DropdownMenuItem",Ol=Ve.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=et(r);return(0,Ke.jsx)(yl,{...o,...a,ref:t})});Ol.displayName=xm;var wm="DropdownMenuCheckboxItem",Fl=Ve.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=et(r);return(0,Ke.jsx)(xl,{...o,...a,ref:t})});Fl.displayName=wm;var Nm="DropdownMenuRadioGroup",Cm=Ve.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=et(r);return(0,Ke.jsx)(wl,{...o,...a,ref:t})});Cm.displayName=Nm;var km="DropdownMenuRadioItem",Bl=Ve.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=et(r);return(0,Ke.jsx)(Nl,{...o,...a,ref:t})});Bl.displayName=km;var Rm="DropdownMenuItemIndicator",Ul=Ve.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=et(r);return(0,Ke.jsx)(Cl,{...o,...a,ref:t})});Ul.displayName=Rm;var Sm="DropdownMenuSeparator",Hl=Ve.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=et(r);return(0,Ke.jsx)(kl,{...o,...a,ref:t})});Hl.displayName=Sm;var Dm="DropdownMenuArrow",Pm=Ve.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=et(r);return(0,Ke.jsx)(Rl,{...o,...a,ref:t})});Pm.displayName=Dm;var Em="DropdownMenuSubTrigger",zl=Ve.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=et(r);return(0,Ke.jsx)(Sl,{...o,...a,ref:t})});zl.displayName=Em;var Tm="DropdownMenuSubContent",Gl=Ve.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...a}=e,o=et(r);return(0,Ke.jsx)(Dl,{...o,...a,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Gl.displayName=Tm;var jl=El,$l=Ml,Vl=Il,dn=Ll;var un=_l,mn=Ol,fn=Fl;var pn=Bl,gn=Ul,vn=Hl;var hn=zl,bn=Gl;var We=D(U(),1),xt=jl,wt=$l;var Im=Vt.forwardRef(({className:e,inset:t,children:r,...a},o)=>(0,We.jsxs)(hn,{ref:o,className:q("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...a,children:[r,(0,We.jsx)(os,{className:"ml-auto"})]}));Im.displayName=hn.displayName;var Am=Vt.forwardRef(({className:e,...t},r)=>(0,We.jsx)(bn,{ref:r,className:q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));Am.displayName=bn.displayName;var mt=Vt.forwardRef(({className:e,sideOffset:t=4,...r},a)=>(0,We.jsx)(Vl,{children:(0,We.jsx)(dn,{ref:a,sideOffset:t,className:q("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...r})}));mt.displayName=dn.displayName;var qe=Vt.forwardRef(({className:e,inset:t,...r},a)=>(0,We.jsx)(mn,{ref:a,className:q("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",e),...r}));qe.displayName=mn.displayName;var Lm=Vt.forwardRef(({className:e,children:t,checked:r,...a},o)=>(0,We.jsxs)(fn,{ref:o,className:q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...a,children:[(0,We.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,We.jsx)(gn,{children:(0,We.jsx)(Ct,{className:"h-4 w-4"})})}),t]}));Lm.displayName=fn.displayName;var _m=Vt.forwardRef(({className:e,children:t,...r},a)=>(0,We.jsxs)(pn,{ref:a,className:q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,We.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,We.jsx)(gn,{children:(0,We.jsx)(ns,{className:"h-2 w-2 fill-current"})})}),t]}));_m.displayName=pn.displayName;var oo=Vt.forwardRef(({className:e,inset:t,...r},a)=>(0,We.jsx)(un,{ref:a,className:q("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));oo.displayName=un.displayName;var sa=Vt.forwardRef(({className:e,...t},r)=>(0,We.jsx)(vn,{ref:r,className:q("-mx-1 my-1 h-px bg-muted",e),...t}));sa.displayName=vn.displayName;var Om=({className:e,...t})=>(0,We.jsx)("span",{className:q("ml-auto text-xs tracking-widest opacity-60",e),...t});Om.displayName="DropdownMenuShortcut";var cc=D(J(),1);var te=D(J(),1);var _0=!!(typeof window<"u"&&window.document&&window.document.createElement);function Rt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return t?.(o)}}var Ae=D(J(),1);var xn=D(U(),1),Fm="DismissableLayer",yn="dismissableLayer.update",Bm="dismissableLayer.pointerDownOutside",Um="dismissableLayer.focusOutside",Wl,Kl=Ae.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wn=Ae.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:n,onInteractOutside:s,onDismiss:i,...c}=e,l=Ae.useContext(Kl),[u,d]=Ae.useState(null),f=u?.ownerDocument??globalThis?.document,[,p]=Ae.useState({}),m=Ne(t,S=>d(S)),g=Array.from(l.layers),[y]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(y),N=u?g.indexOf(u):-1,k=l.layersWithOutsidePointerEventsDisabled.size>0,I=N>=v,x=Gm(S=>{let T=S.target,B=[...l.branches].some(X=>X.contains(T));!I||B||(o?.(S),s?.(S),S.defaultPrevented||i?.())},f),_=jm(S=>{let T=S.target;[...l.branches].some(X=>X.contains(T))||(n?.(S),s?.(S),S.defaultPrevented||i?.())},f);return Pa(S=>{N===l.layers.size-1&&(a?.(S),!S.defaultPrevented&&i&&(S.preventDefault(),i()))},f),Ae.useEffect(()=>{if(u)return r&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(Wl=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),Xl(),()=>{r&&l.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Wl)}},[u,f,r,l]),Ae.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),Xl())},[u,l]),Ae.useEffect(()=>{let S=()=>p({});return document.addEventListener(yn,S),()=>document.removeEventListener(yn,S)},[]),(0,xn.jsx)(we.div,{...c,ref:m,style:{pointerEvents:k?I?"auto":"none":void 0,...e.style},onFocusCapture:Rt(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Rt(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Rt(e.onPointerDownCapture,x.onPointerDownCapture)})});wn.displayName=Fm;var Hm="DismissableLayerBranch",zm=Ae.forwardRef((e,t)=>{let r=Ae.useContext(Kl),a=Ae.useRef(null),o=Ne(t,a);return Ae.useEffect(()=>{let n=a.current;if(n)return r.branches.add(n),()=>{r.branches.delete(n)}},[r.branches]),(0,xn.jsx)(we.div,{...e,ref:o})});zm.displayName=Hm;function Gm(e,t=globalThis?.document){let r=ht(e),a=Ae.useRef(!1),o=Ae.useRef(()=>{});return Ae.useEffect(()=>{let n=i=>{if(i.target&&!a.current){let l=function(){Yl(Bm,r,u,{discrete:!0})};var c=l;let u={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=l,t.addEventListener("click",o.current,{once:!0})):l()}else t.removeEventListener("click",o.current);a.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",n)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",n),t.removeEventListener("click",o.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function jm(e,t=globalThis?.document){let r=ht(e),a=Ae.useRef(!1);return Ae.useEffect(()=>{let o=n=>{n.target&&!a.current&&Yl(Um,r,{originalEvent:n},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function Xl(){let e=new CustomEvent(yn);document.dispatchEvent(e)}function Yl(e,t,r,{discrete:a}){let o=r.originalEvent.target,n=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&o.addEventListener(e,t,{once:!0}),a?Tr(o,n):o.dispatchEvent(n)}var nt=D(J(),1);var ql=D(J(),1);function $m(e,t){return ql.useReducer((r,a)=>t[r][a]??r,e)}var so=e=>{let{present:t,children:r}=e,a=Vm(t),o=typeof r=="function"?r({present:a.isPresent}):nt.Children.only(r),n=Ne(a.ref,Wm(o));return typeof r=="function"||a.isPresent?nt.cloneElement(o,{ref:n}):null};so.displayName="Presence";function Vm(e){let[t,r]=nt.useState(),a=nt.useRef(null),o=nt.useRef(e),n=nt.useRef("none"),s=e?"mounted":"unmounted",[i,c]=$m(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return nt.useEffect(()=>{let l=no(a.current);n.current=i==="mounted"?l:"none"},[i]),Gt(()=>{let l=a.current,u=o.current;if(u!==e){let f=n.current,p=no(l);e?c("MOUNT"):p==="none"||l?.display==="none"?c("UNMOUNT"):c(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,c]),Gt(()=>{if(t){let l,u=t.ownerDocument.defaultView??window,d=p=>{let g=no(a.current).includes(CSS.escape(p.animationName));if(p.target===t&&g&&(c("ANIMATION_END"),!o.current)){let y=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},f=p=>{p.target===t&&(n.current=no(a.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:nt.useCallback(l=>{a.current=l?getComputedStyle(l):null,r(l)},[])}}function no(e){return e?.animationName||"none"}function Wm(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var $e=D(U(),1),[io,ov]=gt("Tooltip",[Ir]),lo=Ir(),Ql="TooltipProvider",Xm=700,Nn="tooltip.open",[Km,kn]=io(Ql),Zl=e=>{let{__scopeTooltip:t,delayDuration:r=Xm,skipDelayDuration:a=300,disableHoverableContent:o=!1,children:n}=e,s=te.useRef(!0),i=te.useRef(!1),c=te.useRef(0);return te.useEffect(()=>{let l=c.current;return()=>window.clearTimeout(l)},[]),(0,$e.jsx)(Km,{scope:t,isOpenDelayedRef:s,delayDuration:r,onOpen:te.useCallback(()=>{window.clearTimeout(c.current),s.current=!1},[]),onClose:te.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>s.current=!0,a)},[a]),isPointerInTransitRef:i,onPointerInTransitChange:te.useCallback(l=>{i.current=l},[]),disableHoverableContent:o,children:n})};Zl.displayName=Ql;var ia="Tooltip",[Ym,la]=io(ia),Jl=e=>{let{__scopeTooltip:t,children:r,open:a,defaultOpen:o,onOpenChange:n,disableHoverableContent:s,delayDuration:i}=e,c=kn(ia,e.__scopeTooltip),l=lo(t),[u,d]=te.useState(null),f=vt(),p=te.useRef(0),m=s??c.disableHoverableContent,g=i??c.delayDuration,y=te.useRef(!1),[v,N]=Lt({prop:a,defaultProp:o??!1,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(Nn))):c.onClose(),n?.(S)},caller:ia}),k=te.useMemo(()=>v?y.current?"delayed-open":"instant-open":"closed",[v]),I=te.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y.current=!1,N(!0)},[N]),x=te.useCallback(()=>{window.clearTimeout(p.current),p.current=0,N(!1)},[N]),_=te.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{y.current=!0,N(!0),p.current=0},g)},[g,N]);return te.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),(0,$e.jsx)(jr,{...l,children:(0,$e.jsx)(Ym,{scope:t,contentId:f,open:v,stateAttribute:k,trigger:u,onTriggerChange:d,onTriggerEnter:te.useCallback(()=>{c.isOpenDelayedRef.current?_():I()},[c.isOpenDelayedRef,_,I]),onTriggerLeave:te.useCallback(()=>{m?x():(window.clearTimeout(p.current),p.current=0)},[x,m]),onOpen:I,onClose:x,disableHoverableContent:m,children:r})})};Jl.displayName=ia;var Cn="TooltipTrigger",ec=te.forwardRef((e,t)=>{let{__scopeTooltip:r,...a}=e,o=la(Cn,r),n=kn(Cn,r),s=lo(r),i=te.useRef(null),c=Ne(t,i,o.onTriggerChange),l=te.useRef(!1),u=te.useRef(!1),d=te.useCallback(()=>l.current=!1,[]);return te.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),(0,$e.jsx)(Ma,{asChild:!0,...s,children:(0,$e.jsx)(we.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...a,ref:c,onPointerMove:Rt(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!n.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:Rt(e.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:Rt(e.onPointerDown,()=>{o.open&&o.onClose(),l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Rt(e.onFocus,()=>{l.current||o.onOpen()}),onBlur:Rt(e.onBlur,o.onClose),onClick:Rt(e.onClick,o.onClose)})})});ec.displayName=Cn;var Rn="TooltipPortal",[qm,Qm]=io(Rn,{forceMount:void 0}),tc=e=>{let{__scopeTooltip:t,forceMount:r,children:a,container:o}=e,n=la(Rn,t);return(0,$e.jsx)(qm,{scope:t,forceMount:r,children:(0,$e.jsx)(so,{present:r||n.open,children:(0,$e.jsx)(Ea,{asChild:!0,container:o,children:a})})})};tc.displayName=Rn;var Fr="TooltipContent",rc=te.forwardRef((e,t)=>{let r=Qm(Fr,e.__scopeTooltip),{forceMount:a=r.forceMount,side:o="top",...n}=e,s=la(Fr,e.__scopeTooltip);return(0,$e.jsx)(so,{present:a||s.open,children:s.disableHoverableContent?(0,$e.jsx)(ac,{side:o,...n,ref:t}):(0,$e.jsx)(Zm,{side:o,...n,ref:t})})}),Zm=te.forwardRef((e,t)=>{let r=la(Fr,e.__scopeTooltip),a=kn(Fr,e.__scopeTooltip),o=te.useRef(null),n=Ne(t,o),[s,i]=te.useState(null),{trigger:c,onClose:l}=r,u=o.current,{onPointerInTransitChange:d}=a,f=te.useCallback(()=>{i(null),d(!1)},[d]),p=te.useCallback((m,g)=>{let y=m.currentTarget,v={x:m.clientX,y:m.clientY},N=af(v,y.getBoundingClientRect()),k=of(v,N),I=nf(g.getBoundingClientRect()),x=lf([...k,...I]);i(x),d(!0)},[d]);return te.useEffect(()=>()=>f(),[f]),te.useEffect(()=>{if(c&&u){let m=y=>p(y,u),g=y=>p(y,c);return c.addEventListener("pointerleave",m),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",g)}}},[c,u,p,f]),te.useEffect(()=>{if(s){let m=g=>{let y=g.target,v={x:g.clientX,y:g.clientY},N=c?.contains(y)||u?.contains(y),k=!sf(v,s);N?f():k&&(f(),l())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[c,u,s,l,f]),(0,$e.jsx)(ac,{...e,ref:n})}),[Jm,ef]=io(ia,{isInside:!1}),tf=Ms("TooltipContent"),ac=te.forwardRef((e,t)=>{let{__scopeTooltip:r,children:a,"aria-label":o,onEscapeKeyDown:n,onPointerDownOutside:s,...i}=e,c=la(Fr,r),l=lo(r),{onClose:u}=c;return te.useEffect(()=>(document.addEventListener(Nn,u),()=>document.removeEventListener(Nn,u)),[u]),te.useEffect(()=>{if(c.trigger){let d=f=>{f.target?.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),(0,$e.jsx)(wn,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:(0,$e.jsxs)(Ia,{"data-state":c.stateAttribute,...l,...i,ref:t,style:{...i.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,$e.jsx)(tf,{children:a}),(0,$e.jsx)(Jm,{scope:r,isInside:!0,children:(0,$e.jsx)(Ys,{id:c.contentId,role:"tooltip",children:o||a})})]})})});rc.displayName=Fr;var oc="TooltipArrow",rf=te.forwardRef((e,t)=>{let{__scopeTooltip:r,...a}=e,o=lo(r);return ef(oc,r).isInside?null:(0,$e.jsx)(Aa,{...o,...a,ref:t})});rf.displayName=oc;function af(e,t){let r=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),n=Math.abs(t.left-e.x);switch(Math.min(r,a,o,n)){case n:return"left";case o:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function of(e,t,r=5){let a=[];switch(t){case"top":a.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":a.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":a.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":a.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return a}function nf(e){let{top:t,right:r,bottom:a,left:o}=e;return[{x:o,y:t},{x:r,y:t},{x:r,y:a},{x:o,y:a}]}function sf(e,t){let{x:r,y:a}=e,o=!1;for(let n=0,s=t.length-1;n<t.length;s=n++){let i=t[n],c=t[s],l=i.x,u=i.y,d=c.x,f=c.y;u>a!=f>a&&r<(d-l)*(a-u)/(f-u)+l&&(o=!o)}return o}function lf(e){let t=e.slice();return t.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),cf(t)}function cf(e){if(e.length<=1)return e.slice();let t=[];for(let a=0;a<e.length;a++){let o=e[a];for(;t.length>=2;){let n=t[t.length-1],s=t[t.length-2];if((n.x-s.x)*(o.y-s.y)>=(n.y-s.y)*(o.x-s.x))t.pop();else break}t.push(o)}t.pop();let r=[];for(let a=e.length-1;a>=0;a--){let o=e[a];for(;r.length>=2;){let n=r[r.length-1],s=r[r.length-2];if((n.x-s.x)*(o.y-s.y)>=(n.y-s.y)*(o.x-s.x))r.pop();else break}r.push(o)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var nc=Zl,sc=Jl,ic=ec,lc=tc,Sn=rc;var Dn=D(U(),1),dc=nc,uc=sc,mc=ic,Pn=cc.forwardRef(({className:e,sideOffset:t=4,...r},a)=>(0,Dn.jsx)(lc,{children:(0,Dn.jsx)(Sn,{ref:a,sideOffset:t,className:q("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r})}));Pn.displayName=Sn.displayName;var h=D(U(),1),fc=[{name:"Novice",minXp:0,color:"text-gray-500"},{name:"Bronze",minXp:500,color:"text-orange-600"},{name:"Silver",minXp:2e3,color:"text-slate-400"},{name:"Gold",minXp:5e3,color:"text-yellow-500"},{name:"Platinum",minXp:1e4,color:"text-cyan-400"},{name:"Diamond",minXp:25e3,color:"text-indigo-400"}],uf=["ALL","BSCS","BSIS","BSAIS","ACT"],co=[{id:"MULTIPLAYER",label:"Multiplayer",icon:zt},{id:"CHALLENGES",label:"Challenges",icon:cr},{id:"ADVENTURE",label:"Adventure",icon:lr}],pc="codeon_leaderboard_cache",mf=e=>new Promise(t=>setTimeout(t,e)),Tn=e=>{if(!e&&e!==0)return"--:--";let t=Math.floor(e/60),r=Math.round(e%60);return`${t}:${r.toString().padStart(2,"0")}`};function vc(){let{user:e,updateProfile:t}=Ge(),[r,a]=(0,st.useState)(null),[o,n]=(0,st.useState)("ALL"),[s,i]=(0,st.useState)("MULTIPLAYER"),[c,l]=(0,st.useState)(()=>{if(typeof window<"u"){let x=localStorage.getItem(pc);if(x)try{return JSON.parse(x)}catch{}}return[]}),[u,d]=(0,st.useState)(c.length===0),f=(0,st.useCallback)(async(x=!1)=>{x||d(!0);let _=0,S=3,T=!1;for(;_<S&&!T;)try{let B=ee.from("users").select("*");s==="MULTIPLAYER"?B=B.order("trophies",{ascending:!1}):s==="CHALLENGES"?B=B.order("stars",{ascending:!1}):s==="ADVENTURE"&&(B=B.gt("total_runtime",0).order("total_runtime",{ascending:!0}));let{data:X,error:j}=await B.limit(100);if(j)throw j;let oe=(X||[]).map(w=>({id:w.id,displayName:w.display_name||"Anonymous User",photoURL:w.photo_url||null,xp:w.xp||0,level:w.level||1,trophies:w.trophies||0,league:w.league||"Novice",avatarConfig:w.avatar_config||null,joinedAt:w.joined_at,badges:w.badges||[],streaks:w.streaks||0,section:w.section,stars:w.stars||0,totalRuntime:w.total_runtime}));l(oe),localStorage.setItem(pc,JSON.stringify(oe)),T=!0}catch(B){console.error("Fetch error:",B),_++,_<S&&await mf(1e3)}x||d(!1)},[s]);(0,st.useEffect)(()=>{f(!1);let x=()=>{setTimeout(()=>{document.visibilityState==="visible"&&f(!0)},500)};return window.addEventListener("focus",x),()=>window.removeEventListener("focus",x)},[f]),(0,st.useEffect)(()=>{e&&c.length>0&&l(x=>{let _=x.findIndex(S=>S.id===e.uid);if(_!==-1&&(x[_].xp!==e.xp||x[_].level!==e.level)){let S=[...x];return S[_]={...S[_],xp:e.xp||0,level:e.level||1,league:fc.slice().reverse().find(T=>(e.xp||0)>=T.minXp)?.name||""},S}return x})},[e]),(0,st.useEffect)(()=>{if(e?.xp){let x=Xa(e.xp);e.league!==x&&t({league:x})}},[e?.xp,e?.league,t]);let p=(0,st.useMemo)(()=>o==="ALL"?c:c.filter(x=>x.section?.toUpperCase().includes(o)),[c,o]),m=p.slice(0,3),g=p.slice(3),y=p.findIndex(x=>x.id===e?.uid),v=y!==-1?p[y]:null,N={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},I=co.find(x=>x.id===s)?.icon||zt;return(0,h.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8 pb-12",children:[(0,h.jsxs)(ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center relative",children:[(0,h.jsx)(zt,{className:"w-20 h-20 text-yellow-500 mx-auto drop-shadow-lg"}),(0,h.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900 dark:text-white mt-4 font-pixelify tracking-wide",children:"Hall of Champions"}),(0,h.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3 mt-4 relative z-20",children:[(0,h.jsx)(dc,{delayDuration:0,children:(0,h.jsxs)(uc,{children:[(0,h.jsx)(mc,{asChild:!0,children:(0,h.jsx)("div",{className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-help",children:(0,h.jsx)(ga,{className:"w-5 h-5 text-gray-400 hover:text-indigo-500"})})}),(0,h.jsx)(Pn,{side:"bottom",className:"p-4 bg-white dark:bg-gray-950 border-gray-200 dark:border-gray-800 shadow-xl rounded-2xl w-64",children:(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 border-b pb-2 mb-2 dark:border-gray-800",children:[(0,h.jsx)(sr,{className:"w-4 h-4 text-indigo-500"}),(0,h.jsx)("h4",{className:"font-bold text-sm",children:"League System"})]}),(0,h.jsx)("div",{className:"space-y-2",children:fc.map(x=>(0,h.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,h.jsx)("span",{className:`font-bold ${x.color}`,children:x.name}),(0,h.jsxs)("span",{className:"text-muted-foreground font-mono",children:[x.minXp.toLocaleString(),"+ XP"]})]},x.name))})]})})]})}),(0,h.jsxs)(xt,{children:[(0,h.jsx)(wt,{asChild:!0,children:(0,h.jsxs)(O,{variant:"outline",className:"h-9 rounded-full px-4 border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 text-sm font-semibold shadow-sm hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,h.jsx)(pa,{className:"w-3.5 h-3.5 mr-2 text-orange-500"}),co.find(x=>x.id===s)?.label,(0,h.jsx)(Ro,{className:"w-3.5 h-3.5 ml-2 opacity-50"})]})}),(0,h.jsx)(mt,{align:"center",className:"w-40",children:co.map(x=>(0,h.jsxs)(qe,{onClick:()=>i(x.id),className:`cursor-pointer font-medium ${s===x.id?"text-orange-600 bg-orange-50 dark:bg-orange-950/30":""}`,children:[(0,h.jsx)(x.icon,{className:"w-4 h-4 mr-2"}),x.label]},x.id))})]}),(0,h.jsxs)(xt,{children:[(0,h.jsx)(wt,{asChild:!0,children:(0,h.jsxs)(O,{variant:"outline",className:"h-9 rounded-full px-4 border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 text-sm font-semibold shadow-sm hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,h.jsx)(ma,{className:"w-3.5 h-3.5 mr-2 text-indigo-500"}),o==="ALL"?"All Sections":o,(0,h.jsx)(Ro,{className:"w-3.5 h-3.5 ml-2 opacity-50"})]})}),(0,h.jsx)(mt,{align:"center",className:"w-40",children:uf.map(x=>(0,h.jsx)(qe,{onClick:()=>n(x),className:`cursor-pointer font-medium ${o===x?"text-indigo-600 bg-indigo-50 dark:bg-indigo-950/30":""}`,children:x==="ALL"?"All Sections":x},x))})]})]}),(0,h.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:["Ranked by ",co.find(x=>x.id===s)?.label]})]}),u&&(0,h.jsx)(pf,{}),!u&&p.length>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(ae.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-4",variants:N,initial:"hidden",animate:"visible",children:[(0,h.jsx)(ae.div,{variants:k,className:"md:mt-8 order-2 md:order-1",children:m[1]&&(0,h.jsx)(En,{user:m[1],rank:2,onClick:()=>a(m[1]),gamemode:s})}),(0,h.jsx)(ae.div,{variants:k,className:"order-1 md:order-2",children:m[0]&&(0,h.jsx)(En,{user:m[0],rank:1,onClick:()=>a(m[0]),gamemode:s})}),(0,h.jsx)(ae.div,{variants:k,className:"md:mt-8 order-3",children:m[2]&&(0,h.jsx)(En,{user:m[2],rank:3,onClick:()=>a(m[2]),gamemode:s})})]}),(0,h.jsx)(ae.div,{className:"space-y-3",variants:N,initial:"hidden",animate:"visible",children:g.map((x,_)=>(0,h.jsx)(ae.div,{variants:k,children:(0,h.jsx)(gc,{user:x,rank:_+4,isCurrentUser:x.id===e?.uid,onClick:()=>a(x),gamemode:s})},x.id))})]}),!u&&p.length===0&&(0,h.jsxs)(ie,{className:"p-12 text-center bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800 shadow-sm rounded-3xl",children:[(0,h.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,h.jsx)(I,{className:"w-8 h-8 text-gray-400"})}),(0,h.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"No Champions Found"}),(0,h.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"No one matches the current filters yet."})]}),v&&(0,h.jsx)(ae.div,{className:"sticky bottom-6 z-20",initial:{opacity:0,y:100},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:100},children:(0,h.jsx)("div",{className:"mx-4 md:mx-0 shadow-2xl rounded-xl",children:(0,h.jsx)(gc,{user:v,rank:y+1,isCurrentUser:!0,isSticky:!0,onClick:()=>a(v),gamemode:s})})}),(0,h.jsx)(ff,{user:r,onClose:()=>a(null)})]})}function ff({user:e,onClose:t}){return e?(0,h.jsx)(Ce,{open:!!e,onOpenChange:r=>!r&&t(),children:(0,h.jsxs)(ke,{className:"sm:max-w-md bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800 p-0 overflow-hidden rounded-3xl",children:[(0,h.jsx)(Pe,{className:"p-6 pb-0",children:(0,h.jsx)(Ee,{className:"text-center text-xl font-bold font-pixelify",children:"Player Card"})}),(0,h.jsxs)("div",{className:"flex flex-col items-center p-6 space-y-6",children:[(0,h.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-indigo-500 bg-gray-100 dark:bg-gray-800 shadow-xl relative",children:(0,h.jsx)(Jt,{config:e.avatarConfig,headOnly:!0})}),(0,h.jsxs)("div",{className:"text-center space-y-1",children:[(0,h.jsx)("h2",{className:"text-2xl font-black text-gray-900 dark:text-white",children:e.displayName}),(0,h.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500 font-medium",children:[(0,h.jsxs)("span",{className:"uppercase tracking-wider",children:[e.league," League"]}),(0,h.jsx)("span",{children:"\u2022"}),(0,h.jsxs)("span",{className:"text-indigo-500",children:["Lvl ",e.level]}),e.section&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{children:"\u2022"}),(0,h.jsx)("span",{className:"font-bold text-gray-600 dark:text-gray-400",children:e.section})]})]})]}),(0,h.jsxs)("div",{className:"grid grid-cols-3 gap-3 w-full",children:[(0,h.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-2xl flex flex-col items-center justify-center gap-1 border border-gray-100 dark:border-gray-700",children:[(0,h.jsx)(zt,{className:"w-8 h-8 text-yellow-500"}),(0,h.jsx)("span",{className:"text-lg font-bold",children:e.trophies}),(0,h.jsx)("span",{className:"text-[10px] uppercase text-gray-400 font-bold",children:"Trophies"})]}),(0,h.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-2xl flex flex-col items-center justify-center gap-1 border border-gray-100 dark:border-gray-700",children:[(0,h.jsx)(cr,{className:"w-8 h-8 text-yellow-400"}),(0,h.jsx)("span",{className:"text-lg font-bold",children:e.stars||0}),(0,h.jsx)("span",{className:"text-[10px] uppercase text-gray-400 font-bold",children:"Stars"})]}),(0,h.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-2xl flex flex-col items-center justify-center gap-1 border border-gray-100 dark:border-gray-700",children:[(0,h.jsx)(lr,{className:"w-8 h-8 text-blue-500"}),(0,h.jsx)("span",{className:"text-lg font-bold",children:e.totalRuntime?Tn(e.totalRuntime):"--"}),(0,h.jsx)("span",{className:"text-[10px] uppercase text-gray-400 font-bold",children:"Total Run Time"})]})]}),(0,h.jsxs)("div",{className:"w-full space-y-3",children:[(0,h.jsx)("div",{className:"text-sm font-bold uppercase text-gray-400 tracking-wider ml-1",children:"Badges Earned"}),e.badges&&e.badges.length>0?(0,h.jsx)("div",{className:"flex flex-wrap gap-2",children:e.badges.map((r,a)=>(0,h.jsx)(Me,{variant:"secondary",className:"px-3 py-1 text-xs",children:r},a))}):(0,h.jsx)("div",{className:"text-sm text-gray-400 italic bg-gray-50 dark:bg-gray-800/50 p-3 rounded-xl text-center",children:"No badges earned yet."})]}),e.joinedAt&&(0,h.jsxs)("div",{className:"flex items-center text-xs text-gray-400 gap-1 pt-2",children:[(0,h.jsx)(qt,{className:"w-3 h-3"}),"Joined ",new Date(e.joinedAt).toLocaleDateString()]})]})]})}):null}function En({user:e,rank:t,onClick:r,gamemode:a}){let o=t===1,n=t===2,s=t===3,i=()=>{if(a==="MULTIPLAYER")return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(zt,{className:`w-5 h-5 ${o?"text-yellow-400":"text-gray-300"}`}),e.trophies]});if(a==="CHALLENGES")return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(cr,{className:"w-5 h-5 text-yellow-400"}),e.stars||0]});if(a==="ADVENTURE")return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(lr,{className:"w-5 h-5 text-blue-400"}),(0,h.jsx)("span",{className:"text-lg",children:e.totalRuntime?Tn(e.totalRuntime):"--"})]})};return(0,h.jsxs)("div",{onClick:r,className:`relative rounded-3xl p-6 flex flex-col items-center text-center shadow-lg transition-all hover:scale-[1.03] cursor-pointer group
      ${o?"bg-gradient-to-b from-yellow-50 to-white dark:from-yellow-900/20 dark:to-gray-900 border-2 border-yellow-400":""}
      ${n?"bg-gradient-to-b from-gray-50 to-white dark:from-gray-800/40 dark:to-gray-900 border border-gray-300 dark:border-gray-600":""}
      ${s?"bg-gradient-to-b from-orange-50 to-white dark:from-orange-900/20 dark:to-gray-900 border border-orange-300 dark:border-orange-700":""}
    `,children:[(0,h.jsx)("div",{className:`absolute -top-6 w-12 h-12 rounded-full flex items-center justify-center border-4 shadow-md z-10
        ${o?"bg-yellow-400 border-white dark:border-gray-900":""}
        ${n?"bg-gray-300 border-white dark:border-gray-900":""}
        ${s?"bg-orange-500 border-white dark:border-gray-900":""}
      `,children:o?(0,h.jsx)(_s,{className:"w-8 h-8 text-white fill-current"}):n?(0,h.jsx)(Os,{className:"w-8 h-8 text-white fill-current"}):s?(0,h.jsx)(Fs,{className:"w-8 h-8 text-white fill-current"}):null}),(0,h.jsx)("div",{className:`mt-6 w-24 h-24 rounded-full overflow-hidden border-4 bg-gray-100 dark:bg-gray-800 flex-shrink-0 relative transition-transform group-hover:scale-105
          ${o?"border-yellow-400 ring-4 ring-yellow-400/20":"border-gray-200 dark:border-gray-700"}
      `,children:(0,h.jsx)(Jt,{config:e.avatarConfig,headOnly:!0})}),(0,h.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mt-4 truncate w-full px-2 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:e.displayName}),(0,h.jsxs)("div",{className:"flex flex-col items-center mt-1 space-y-1",children:[(0,h.jsx)("span",{className:"px-2 py-0.5 rounded-md bg-gray-100 dark:bg-gray-800 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:e.league}),(0,h.jsxs)("span",{className:"text-xs text-indigo-500 font-semibold",children:["Level ",e.level]}),e.section&&(0,h.jsx)("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:e.section})]}),(0,h.jsx)("div",{className:"mt-4 bg-gray-900 dark:bg-white/10 rounded-xl px-4 py-2 text-xl font-black text-white flex items-center gap-2 shadow-inner",children:i()})]})}function gc({user:e,rank:t,isCurrentUser:r,isSticky:a=!1,onClick:o,gamemode:n}){let s="bg-white dark:bg-gray-900",i="border-gray-100 dark:border-gray-800",c="";r&&(t===1?(s="bg-yellow-50 dark:bg-yellow-900",i="border-yellow-400",c="ring-2 ring-yellow-400 ring-offset-2 dark:ring-offset-gray-900"):t===2?(s="bg-gray-100 dark:bg-gray-800",i="border-gray-400",c="ring-2 ring-gray-400 ring-offset-2 dark:ring-offset-gray-900"):t===3?(s="bg-orange-50 dark:bg-orange-900",i="border-orange-400",c="ring-2 ring-orange-400 ring-offset-2 dark:ring-offset-gray-900"):(s="bg-indigo-50 dark:bg-indigo-950",i="border-indigo-200 dark:border-indigo-800"));let l=()=>{if(n==="MULTIPLAYER")return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(zt,{className:"w-4 h-4 text-yellow-500 fill-current"}),e.trophies]});if(n==="CHALLENGES")return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(cr,{className:"w-4 h-4 text-yellow-500 fill-current"}),e.stars||0]});if(n==="ADVENTURE")return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(lr,{className:"w-4 h-4 text-blue-500"}),e.totalRuntime?Tn(e.totalRuntime):"--"]})};return(0,h.jsxs)("div",{onClick:o,className:`flex items-center p-4 rounded-xl transition-all border cursor-pointer hover:shadow-md hover:scale-[1.01] active:scale-[0.99]
      ${s} ${i} ${c}
      ${a?"shadow-2xl":"shadow-sm"}
    `,children:[(0,h.jsxs)("div",{className:`w-10 text-center text-lg font-black italic ${t<=3?"text-gray-900 dark:text-white scale-110":"text-gray-400 dark:text-gray-500"}`,children:["#",t]}),(0,h.jsxs)("div",{className:"flex-1 flex items-center gap-3 ml-3 overflow-hidden",children:[(0,h.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800 flex-shrink-0 relative",children:(0,h.jsx)(Jt,{config:e.avatarConfig,headOnly:!0})}),(0,h.jsxs)("div",{className:"min-w-0",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsxs)("div",{className:"text-sm font-bold text-gray-900 dark:text-white truncate hover:text-indigo-500 transition-colors",children:[e.displayName," ",r&&"(You)"]}),t===1&&(0,h.jsx)(Nr,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),(0,h.jsxs)("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 gap-2",children:[(0,h.jsx)("span",{className:"font-semibold text-indigo-500",children:e.league}),(0,h.jsx)("span",{children:"\u2022"}),(0,h.jsxs)("span",{children:["Lvl ",e.level]}),e.section&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{children:"\u2022"}),(0,h.jsx)("span",{className:"uppercase font-bold tracking-wide",children:e.section})]})]})]})]}),(0,h.jsx)("div",{className:"text-right pl-2",children:(0,h.jsx)("div",{className:`flex items-center justify-end gap-1.5 text-base font-black ${r?"text-indigo-700 dark:text-indigo-300":"text-gray-900 dark:text-white"}`,children:l()})})]})}function pf(){return(0,h.jsxs)("div",{className:"space-y-8",children:[(0,h.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,h.jsxs)("div",{className:`p-6 rounded-3xl border border-gray-200 dark:border-gray-800 flex flex-col items-center ${e!==2?"md:mt-8":""}`,children:[(0,h.jsx)(ne,{className:"w-20 h-20 rounded-full"}),(0,h.jsx)(ne,{className:"h-6 w-3/4 mt-4"}),(0,h.jsx)(ne,{className:"h-4 w-1/3 mt-2"}),(0,h.jsx)(ne,{className:"h-10 w-1/2 mt-4 rounded-xl"})]},e))}),(0,h.jsx)("div",{className:"space-y-3",children:[...Array(5)].map((e,t)=>(0,h.jsxs)("div",{className:"flex items-center p-4 rounded-xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800",children:[(0,h.jsx)(ne,{className:"h-6 w-8 rounded"}),(0,h.jsx)(ne,{className:"w-10 h-10 rounded-full ml-3"}),(0,h.jsxs)("div",{className:"flex-1 ml-3 space-y-2",children:[(0,h.jsx)(ne,{className:"h-4 w-1/3"}),(0,h.jsx)(ne,{className:"h-3 w-1/4"})]}),(0,h.jsx)(ne,{className:"h-6 w-16 rounded"})]},t))})]})}var hc=D(J(),1);var G=D(U(),1),gf=[{id:1,title:"Syntax Slayer",description:"Complete 2 C# Challenges with 100% accuracy",current:1,target:2,reward:20,icon:Po,color:"text-red-500",bgColor:"bg-red-500/10",status:"in-progress"},{id:2,title:"Bug Hunter",description:"Fix 5 syntax errors in the playground",current:5,target:5,reward:50,icon:as,color:"text-orange-500",bgColor:"bg-orange-500/10",status:"ready-to-claim"},{id:3,title:"Runtime Runner",description:"Spend 15 minutes coding today",current:15,target:15,reward:30,icon:Eo,color:"text-blue-500",bgColor:"bg-blue-500/10",status:"claimed"}],vf=[{id:"a1",name:"First Compilation",desc:"Run your first code",icon:ba,unlocked:!0},{id:"a2",name:"Week Warrior",desc:"7 Day Streak",icon:dt,unlocked:!0},{id:"a3",name:"Code Ninja",desc:"Solve a Hard challenge",icon:Po,unlocked:!1},{id:"a4",name:"Polyglot",desc:"Try 3 different languages",icon:Ut,unlocked:!1},{id:"a5",name:"Millionaire",desc:"Earn 1,000 Coins",icon:At,unlocked:!1}];function bc(){let{user:e}=Ge(),[t,r]=(0,hc.useState)(gf),a=o=>{r(n=>n.map(s=>s.id===o?{...s,status:"claimed"}:s))};return(0,G.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8 pb-12 font-pixelify",children:[(0,G.jsxs)(ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[(0,G.jsxs)("div",{className:"flex items-center gap-3",children:[(0,G.jsx)(Da,{className:"w-8 h-8 text-indigo-500"}),(0,G.jsxs)("div",{children:[(0,G.jsx)("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Quest Board"}),(0,G.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Complete tasks to earn rewards and glory."})]})]}),(0,G.jsxs)("div",{className:"hidden md:flex items-center gap-2 bg-indigo-100 dark:bg-indigo-900/30 px-4 py-2 rounded-full text-indigo-600 dark:text-indigo-400 font-bold text-sm",children:[(0,G.jsx)(Eo,{className:"w-4 h-4"}),(0,G.jsx)("span",{children:"Resets in 12h 30m"})]})]}),(0,G.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,G.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,G.jsxs)(ae.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 shadow-xl",children:[(0,G.jsx)("div",{className:"absolute top-0 right-0 -mr-10 -mt-10 h-40 w-40 bg-white/10 rounded-full blur-3xl"}),(0,G.jsxs)("div",{className:"relative z-10 flex items-center gap-6",children:[(0,G.jsx)("div",{className:"h-20 w-20 bg-white/20 rounded-full flex items-center justify-center border-4 border-white/30 shadow-inner shrink-0",children:(0,G.jsx)(At,{className:"w-10 h-10 text-yellow-300 fill-current"})}),(0,G.jsxs)("div",{className:"flex-1",children:[(0,G.jsx)("h3",{className:"text-xl font-bold mb-1",children:"November Challenger"}),(0,G.jsx)("p",{className:"text-purple-100 text-sm mb-3",children:"Complete 30 quests this month to unlock this exclusive badge!"}),(0,G.jsxs)("div",{className:"flex items-center gap-3",children:[(0,G.jsx)(Ar,{value:45,className:"h-3 bg-black/20",indicatorClassName:"bg-yellow-400"}),(0,G.jsx)("span",{className:"text-sm font-bold font-mono",children:"14/30"})]})]})]})]}),(0,G.jsxs)("div",{className:"space-y-4",children:[(0,G.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,G.jsx)(dt,{className:"w-5 h-5 text-yellow-500 fill-current"}),"Daily Quests"]}),(0,G.jsx)("div",{className:"grid gap-4",children:t.map((o,n)=>(0,G.jsx)(hf,{quest:o,onClaim:a,index:n},o.id))})]})]}),(0,G.jsx)("div",{className:"space-y-6",children:(0,G.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-3xl p-6 border border-gray-100 dark:border-gray-800 shadow-sm",children:[(0,G.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,G.jsx)(At,{className:"w-5 h-5 text-orange-500"}),"Lifetime Achievements"]}),(0,G.jsx)("div",{className:"grid grid-cols-3 gap-4",children:vf.map(o=>(0,G.jsx)(bf,{achievement:o},o.id))}),(0,G.jsx)(O,{variant:"ghost",className:"w-full mt-6 text-indigo-500 hover:text-indigo-600",children:"View All"})]})})]})]})}function hf({quest:e,onClaim:t,index:r}){let a=e.icon,o=e.status==="claimed",n=e.status==="ready-to-claim";return(0,G.jsxs)(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.1},className:q("flex items-center gap-4 p-4 rounded-2xl border-2 transition-all duration-300",o?"bg-gray-50 dark:bg-gray-900 border-gray-100 dark:border-gray-800 opacity-60 grayscale-[0.5]":"bg-white dark:bg-gray-900 border-gray-100 dark:border-gray-700 shadow-sm hover:border-indigo-200 dark:hover:border-indigo-800"),children:[(0,G.jsx)("div",{className:q("w-14 h-14 rounded-xl flex items-center justify-center shrink-0",e.bgColor),children:(0,G.jsx)(a,{className:q("w-7 h-7",e.color)})}),(0,G.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,G.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,G.jsx)("h4",{className:q("font-bold text-lg truncate",o&&"line-through"),children:e.title}),(0,G.jsxs)("span",{className:"text-xs font-bold text-gray-400 font-mono",children:[e.current,"/",e.target]})]}),(0,G.jsx)("div",{className:"mb-1 text-sm text-gray-500 dark:text-gray-400 truncate",children:e.description}),(0,G.jsx)(Ar,{value:e.current/e.target*100,className:"h-2.5 rounded-full bg-gray-100 dark:bg-gray-800",indicatorClassName:o?"bg-gray-400":"bg-green-500"})]}),(0,G.jsx)("div",{className:"shrink-0 w-24 flex justify-end",children:n?(0,G.jsx)(ae.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:1.5},children:(0,G.jsxs)(O,{onClick:()=>t(e.id),className:"bg-yellow-400 hover:bg-yellow-500 text-yellow-950 font-bold shadow-lg shadow-yellow-400/20",children:[(0,G.jsx)(ds,{className:"w-4 h-4 mr-2"}),"Claim"]})}):o?(0,G.jsxs)("div",{className:"flex flex-col items-center text-green-500 font-bold text-xs",children:[(0,G.jsx)(xr,{className:"w-6 h-6 mb-1"}),"Done"]}):(0,G.jsxs)("div",{className:"flex flex-col items-center text-gray-400 font-bold text-xs",children:[(0,G.jsx)("span",{className:"text-base",children:e.reward}),(0,G.jsx)("span",{children:"XP"})]})})]})}function bf({achievement:e}){let t=e.icon;return(0,G.jsxs)("div",{className:"flex flex-col items-center text-center gap-2 group",children:[(0,G.jsx)("div",{className:q("w-16 h-16 rounded-2xl flex items-center justify-center border-b-4 transition-all duration-300",e.unlocked?"bg-gradient-to-br from-indigo-400 to-purple-500 text-white border-purple-700 shadow-lg group-hover:-translate-y-1":"bg-gray-100 dark:bg-gray-800 text-gray-400 border-gray-300 dark:border-gray-700"),children:e.unlocked?(0,G.jsx)(t,{className:"w-8 h-8"}):(0,G.jsx)(Mt,{className:"w-6 h-6"})}),(0,G.jsx)("span",{className:q("text-xs font-bold leading-tight",e.unlocked?"text-gray-900 dark:text-white":"text-gray-400"),children:e.name})]})}var ar=D(J(),1);var Mn={3:{coins:50,title:"3-Day Spark"},7:{coins:100,badge:"week-warrior",title:"Week Warrior"},14:{coins:250,title:"Fortnight Fighter"},30:{coins:500,badge:"consistency-king",title:"Consistency King"},100:{coins:1e3,badge:"century-club",title:"Century Club"}},Br=(e=0)=>{let t=new Date;return e!==0&&t.setDate(t.getDate()+e),new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Manila",year:"numeric",month:"2-digit",day:"2-digit"}).format(t)},yf=(e,t)=>{let r=new Date(e),a=new Date(t);return Math.round((a.getTime()-r.getTime())/(1e3*60*60*24))};function xc(e){if(!e)return"BROKEN";let t=Br(),r=e.activeDates??[],a=e.frozenDates??[];if(r.includes(t))return"ACTIVE";let o=r.at(-1);if(!o)return"BROKEN";let n=Br(-1);return o===n?"ACTIVE":a.includes(n)||a.includes(n)?"FROZEN":"BROKEN"}function wc(e){let t=Br(),r=e.activeDates??[],a=e.frozenDates??[],o=r.at(-1)??null,n={shouldUpdate:!1,status:"NONE",newStreak:e.streaks??0,newActiveDates:[...r],newFrozenDates:[...a],newCoins:e.coins??0,newFreezes:e.streakFreezes??0,newBadges:e.badges??[],messages:[]};if(o===t)return n;if(n.shouldUpdate=!0,n.newActiveDates.push(t),!o)return n.newStreak=1,n.status="FIRST",n.messages.push("\u{1F525} Streak Started!"),yc(n);let s=yf(o,t);if(s<=1)return n.newStreak+=1,n.status="CONTINUED",n.messages.push("\u{1F525} Streak Continued!"),yc(n);{let i=s-1;if(n.newFreezes>=i){n.newFreezes-=i,n.newStreak+=1,n.status="FROZEN";for(let c=1;c<=i;c++){let l=Br(-c);n.newFrozenDates.includes(l)||n.newFrozenDates.push(l)}n.messages.push(`\u2744\uFE0F Streak Frozen! Used ${i} freeze(s) to save your streak.`)}else n.newStreak=1,n.status="BROKEN",n.messages.push("\u{1F494} Streak Broken. Starting fresh!")}return n}function yc(e){let t=Mn[e.newStreak];return t&&(t.badge&&e.newBadges.includes(t.badge)||(e.newCoins+=t.coins,e.messages.push(`\u{1F389} ${t.title}! +${t.coins} Coins`),t.badge&&(e.newBadges.push(t.badge),e.messages.push(`\u{1F3C5} Badge Unlocked: ${t.title}`)))),e}var R=D(U(),1),xf={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Nc={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};function Cc(){let{user:e,updateProfile:t}=Ge(),[r,a]=(0,ar.useState)([]),[o,n]=(0,ar.useState)(""),[s,i]=(0,ar.useState)(!1),[c,l]=(0,ar.useState)(null),[u,d]=(0,ar.useState)({show:!1,status:"NONE",message:""}),f=e?.streaks||0,p=e?.streakFreezes||0,m=e?.activeDates||[],g=e?.frozenDates||[],y=xc(e),v=Br(),N=m.includes(v),k=Object.entries(Mn).map(([x,_])=>({days:Number(x),..._,earned:f>=Number(x)})).sort((x,_)=>x.days-_.days);(0,ar.useEffect)(()=>{let x=new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Manila"}));n(x.toLocaleString("default",{month:"long"}));let _=x.getFullYear(),S=x.getMonth(),T=new Date(_,S,1).getDay(),B=new Date(_,S+1,0).getDate(),X=[];for(let j=0;j<T;j++)X.push({isPadding:!0});for(let j=1;j<=B;j++){let oe=new Date(_,S,j,12,0,0),w=new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Manila",year:"numeric",month:"2-digit",day:"2-digit"}).format(oe),L=w===v;X.push({day:j,isPadding:!1,isToday:L,isActive:m.includes(w),isFrozen:g.includes(w),isFuture:w>v})}a(X)},[f,m,g,v]);let I=async()=>{if(!(!e||s)){i(!0);try{let x=wc(e);if(!x.shouldUpdate){alert("\u{1F4C5} You already saved your streak today!"),i(!1);return}await t({streaks:x.newStreak,activeDates:x.newActiveDates,coins:x.newCoins,streakFreezes:x.newFreezes,badges:x.newBadges,frozenDates:x.newFrozenDates}),d({show:!0,status:x.status,message:x.messages.join(" ")})}catch(x){console.error(x),alert("\u274C Failed to update streak.")}finally{i(!1)}}};return(0,R.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 pb-12",children:[(0,R.jsxs)(ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between gap-3",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)(er,{className:"w-8 h-8 text-orange-500"}),(0,R.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900 dark:text-white",children:"Your Streak"})]}),(0,R.jsx)(O,{variant:"outline",onClick:I,disabled:s||N,className:"gap-2",children:s?"Processing...":(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(dt,{className:"w-4 h-4"}),N?"Streak Saved":"Test Streak"]})})]}),(0,R.jsxs)(ae.div,{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",variants:xf,initial:"hidden",animate:"visible",children:[(0,R.jsxs)(ae.div,{variants:Nc,className:"lg:col-span-2 space-y-6",children:[(0,R.jsx)(wf,{streak:f,visualState:y}),(0,R.jsx)(Nf,{month:o,days:r})]}),(0,R.jsxs)(ae.div,{variants:Nc,className:"lg:col-span-1 space-y-6",children:[(0,R.jsx)(Cf,{freezeCount:p}),(0,R.jsx)(kf,{milestones:k,onViewMilestone:l})]})]}),(0,R.jsx)(Ce,{open:u.show,onOpenChange:x=>!x&&d(_=>({..._,show:!1})),children:(0,R.jsx)(ke,{className:"sm:max-w-sm text-center",children:(0,R.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[u.status==="FROZEN"&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"w-24 h-24 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mb-2 animate-bounce",children:(0,R.jsx)(Gr,{className:"w-12 h-12 text-blue-500"})}),(0,R.jsx)("h2",{className:"text-2xl font-black text-blue-600 dark:text-blue-400",children:"Streak Frozen!"}),(0,R.jsxs)("p",{className:"text-gray-600 dark:text-gray-300",children:["You missed a day, but your"," ",(0,R.jsx)("span",{className:"font-bold",children:"Streak Freeze"})," saved you."]})]}),u.status==="BROKEN"&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center mb-2 grayscale",children:(0,R.jsx)(cs,{className:"w-12 h-12 text-gray-500"})}),(0,R.jsx)("h2",{className:"text-2xl font-black text-gray-700 dark:text-gray-300",children:"Streak Broken"}),(0,R.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"You missed a day without a freeze. Your streak has reset to 1."})]}),(u.status==="CONTINUED"||u.status==="FIRST")&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"w-24 h-24 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center mb-2 animate-pulse",children:(0,R.jsx)(fa,{className:"w-12 h-12 text-orange-500 fill-orange-500"})}),(0,R.jsx)("h2",{className:"text-2xl font-black text-orange-500",children:"Streak Extended!"}),(0,R.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Keep up the great work!"})]}),(0,R.jsx)(O,{className:"w-full mt-4",variant:u.status==="FROZEN"?"default":u.status==="BROKEN"?"secondary":"default",onClick:()=>d(x=>({...x,show:!1})),children:"Continue"})]})})}),(0,R.jsx)(Ce,{open:!!c,onOpenChange:x=>!x&&l(null),children:(0,R.jsxs)(ke,{className:"sm:max-w-sm text-center",children:[(0,R.jsxs)(Pe,{children:[(0,R.jsxs)(Ee,{className:"text-2xl font-bold flex flex-col items-center gap-2",children:[(0,R.jsx)("div",{className:"p-4 bg-yellow-100 dark:bg-yellow-900/30 rounded-full mb-2",children:(0,R.jsx)(Rf,{className:"w-12 h-12 text-yellow-500"})}),c?.title]}),(0,R.jsxs)(Ue,{className:"text-center text-lg",children:["You hit a ",c?.days," day streak!"]})]}),(0,R.jsx)("div",{className:"py-6 space-y-4",children:(0,R.jsxs)("div",{className:"flex items-center justify-center gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700",children:[(0,R.jsxs)("div",{className:"flex flex-col items-center",children:[(0,R.jsx)("span",{className:"text-xs uppercase font-bold text-gray-400",children:"Reward"}),(0,R.jsxs)("div",{className:"flex items-center gap-2 text-xl font-black text-yellow-500",children:[(0,R.jsx)("img",{src:"/assets/icons/coinv2.png",className:"w-6 h-6",alt:"Coin"}),"+",c?.coins]})]}),c?.badge&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"w-[1px] h-10 bg-gray-300 dark:bg-gray-600"}),(0,R.jsxs)("div",{className:"flex flex-col items-center",children:[(0,R.jsx)("span",{className:"text-xs uppercase font-bold text-gray-400",children:"Badge"}),(0,R.jsxs)("div",{className:"flex items-center gap-2 text-lg font-bold text-purple-500",children:[(0,R.jsx)(sr,{className:"w-5 h-5"}),"Unlocked"]})]})]})]})}),(0,R.jsx)(Be,{className:"sm:justify-center",children:(0,R.jsx)(O,{className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl",onClick:()=>l(null),children:"Awesome!"})})]})})]})}function wf({streak:e,visualState:t}){let r="bg-gray-200 dark:bg-gray-800",a="text-gray-500 dark:text-gray-400",o="text-gray-400 fill-gray-400",n="Streak Inactive",s=(0,R.jsx)(fa,{className:"w-16 h-16 drop-shadow-md"});return t==="ACTIVE"?(r="bg-gradient-to-br from-orange-400 to-red-500",a="text-white",o="text-white fill-white animate-pulse",n="\u{1F525} You're on fire!"):t==="FROZEN"?(r="bg-gradient-to-br from-blue-400 to-cyan-500",a="text-white",o="text-white fill-white",n="\u2744\uFE0F Streak Frozen",s=(0,R.jsx)(Gr,{className:"w-16 h-16 drop-shadow-md text-white"})):(r="bg-gray-200 dark:bg-gray-800",a="text-gray-500 dark:text-gray-400",o="text-gray-400 fill-gray-400 grayscale",n="\u26A0\uFE0F Start a streak!"),(0,R.jsxs)(ie,{className:q("rounded-3xl shadow-lg overflow-hidden relative transition-all duration-500",r,a),children:[(0,R.jsx)("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),(0,R.jsxs)(ge,{className:"p-8 flex items-center gap-6 relative z-10",children:[(0,R.jsx)("div",{className:q("p-4 rounded-full backdrop-blur-sm shadow-inner transition-all",t==="ACTIVE"||t==="FROZEN"?"bg-white/20":"bg-gray-300 dark:bg-gray-700"),children:t==="FROZEN"?s:(0,R.jsx)(fa,{className:q("w-16 h-16 drop-shadow-md transition-all",o)})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm font-bold uppercase tracking-wider opacity-80 mb-1",children:"Current Streak"}),(0,R.jsx)("p",{className:"text-6xl font-black drop-shadow-sm leading-none mb-2",children:e}),(0,R.jsx)("div",{className:q("inline-flex items-center px-3 py-1 rounded-full text-xs font-bold backdrop-blur-sm",t==="ACTIVE"||t==="FROZEN"?"bg-white/20":"bg-black/10"),children:n})]})]})]})}function Nf({month:e,days:t}){let r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return(0,R.jsxs)(ie,{className:"bg-white dark:bg-gray-900 shadow-lg border-gray-100 dark:border-gray-800 rounded-3xl",children:[(0,R.jsx)(ye,{children:(0,R.jsxs)(xe,{className:"text-2xl font-bold flex items-center justify-between",children:[(0,R.jsx)("span",{children:e}),(0,R.jsxs)("div",{className:`text-xs px-3 py-1 rounded-full font-bold flex items-center gap-1 ${t.find(a=>a.isToday)?.isActive?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-500 dark:bg-gray-800"}`,children:[t.find(a=>a.isToday)?.isActive?(0,R.jsx)(Ct,{className:"w-3 h-3"}):(0,R.jsx)(qt,{className:"w-3 h-3"}),t.find(a=>a.isToday)?.isActive?"Streak Saved":"Pending"]})]})}),(0,R.jsxs)(ge,{children:[(0,R.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-3",children:r.map(a=>(0,R.jsx)("div",{className:"text-center text-[10px] font-bold text-gray-400 uppercase",children:a},a))}),(0,R.jsx)("div",{className:"grid grid-cols-7 gap-2",children:t.map((a,o)=>{let n=a.isToday&&!a.isActive;return(0,R.jsx)("div",{className:q("relative aspect-square rounded-xl flex items-center justify-center font-bold text-sm transition-all",a.isPadding&&"bg-transparent",a.isFuture&&"bg-gray-50 dark:bg-gray-800/20 text-gray-300 dark:text-gray-700",!a.isPadding&&!a.isFuture&&!a.isActive&&!a.isFrozen&&!a.isToday&&"bg-gray-100 dark:bg-gray-800/50 text-gray-400",a.isActive&&"bg-orange-500 text-white shadow-md shadow-orange-500/20 scale-105 border-2 border-white dark:border-gray-900",a.isFrozen&&"bg-blue-500 text-white shadow-md shadow-blue-500/20 border-2 border-white dark:border-gray-900",n&&"bg-transparent text-gray-900 dark:text-white border-2 border-dashed border-red-400 dark:border-red-500 animate-pulse bg-red-50 dark:bg-red-900/10",a.isToday&&a.isActive&&"ring-2 ring-offset-2 ring-orange-500 dark:ring-offset-gray-900"),children:!a.isPadding&&(0,R.jsx)("span",{children:a.day})},o)})})]})]})}function Cf({freezeCount:e}){return(0,R.jsxs)(ie,{className:"bg-white dark:bg-gray-900 shadow-sm border border-gray-100 dark:border-gray-800 rounded-3xl",children:[(0,R.jsx)(ye,{className:"pb-2",children:(0,R.jsx)(xe,{className:"text-lg font-bold",children:"Power-Ups"})}),(0,R.jsxs)(ge,{children:[(0,R.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-2xl border border-blue-100 dark:border-blue-900/50",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)("div",{className:"p-2 bg-white dark:bg-blue-900 rounded-xl shadow-sm",children:(0,R.jsx)(Na,{className:"w-8 h-8 text-blue-500"})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"font-bold text-blue-900 dark:text-blue-100",children:"Streak Freeze"}),(0,R.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-300",children:"Auto-equips on miss"})]})]}),(0,R.jsxs)("div",{className:"text-2xl font-black text-blue-600 dark:text-blue-400",children:["x",e]})]}),(0,R.jsxs)(O,{variant:"ghost",className:"w-full mt-2 text-indigo-600 hover:text-indigo-700 h-auto py-2 text-xs",children:[(0,R.jsx)(ks,{className:"w-3 h-3 mr-1"})," Get more in Store"]})]})]})}function kf({milestones:e,onViewMilestone:t}){return(0,R.jsxs)(ie,{className:"bg-white dark:bg-gray-900 shadow-sm border border-gray-100 dark:border-gray-800 rounded-3xl",children:[(0,R.jsx)(ye,{children:(0,R.jsx)(xe,{className:"text-lg font-bold",children:"Next Goals"})}),(0,R.jsx)(ge,{className:"space-y-3",children:e.map(r=>(0,R.jsxs)("div",{onClick:()=>r.earned&&t(r),className:q("flex items-center justify-between p-3 rounded-xl transition-all border",r.earned?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 cursor-pointer hover:scale-[1.02]":"bg-gray-50 dark:bg-gray-800/50 border-transparent opacity-70"),children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)("div",{className:q("p-2 rounded-lg",r.earned?"bg-yellow-100 dark:bg-yellow-800 text-yellow-600 dark:text-yellow-400":"bg-gray-200 dark:bg-gray-700 text-gray-400"),children:r.earned?(0,R.jsx)(Nr,{className:"w-5 h-5"}):(0,R.jsx)(Mt,{className:"w-5 h-5"})}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:q("font-bold text-sm",r.earned?"text-yellow-900 dark:text-yellow-100":"text-gray-500"),children:[r.days,"-Day Streak"]}),r.earned&&(0,R.jsx)("div",{className:"text-[10px] font-bold text-yellow-600 uppercase",children:"Completed"})]})]}),(0,R.jsxs)("div",{className:"flex items-center gap-1 bg-white dark:bg-black/20 px-2 py-1 rounded-lg text-xs font-bold text-gray-500",children:[(0,R.jsx)("img",{src:"/assets/icons/coinv2.png",className:"w-3 h-3",alt:"Coin"}),r.coins]})]},r.days))})]})}function Rf({className:e}){return(0,R.jsx)(sr,{className:e})}var Mc=D(J(),1);var St=D(J(),1);var Wv=!!(typeof window<"u"&&window.document&&window.document.createElement);function kc(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return t?.(o)}}var pr=D(U(),1),uo="Switch",[Sf,th]=gt(uo),[Df,Pf]=Sf(uo),Rc=St.forwardRef((e,t)=>{let{__scopeSwitch:r,name:a,checked:o,defaultChecked:n,required:s,disabled:i,value:c="on",onCheckedChange:l,form:u,...d}=e,[f,p]=St.useState(null),m=Ne(t,k=>p(k)),g=St.useRef(!1),y=f?u||!!f.closest("form"):!0,[v,N]=Lt({prop:o,defaultProp:n??!1,onChange:l,caller:uo});return(0,pr.jsxs)(Df,{scope:r,checked:v,disabled:i,children:[(0,pr.jsx)(we.button,{type:"button",role:"switch","aria-checked":v,"aria-required":s,"data-state":Ec(v),"data-disabled":i?"":void 0,disabled:i,value:c,...d,ref:m,onClick:kc(e.onClick,k=>{N(I=>!I),y&&(g.current=k.isPropagationStopped(),g.current||k.stopPropagation())})}),y&&(0,pr.jsx)(Pc,{control:f,bubbles:!g.current,name:a,value:c,checked:v,required:s,disabled:i,form:u,style:{transform:"translateX(-100%)"}})]})});Rc.displayName=uo;var Sc="SwitchThumb",Dc=St.forwardRef((e,t)=>{let{__scopeSwitch:r,...a}=e,o=Pf(Sc,r);return(0,pr.jsx)(we.span,{"data-state":Ec(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t})});Dc.displayName=Sc;var Ef="SwitchBubbleInput",Pc=St.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:a=!0,...o},n)=>{let s=St.useRef(null),i=Ne(s,n),c=qs(r),l=Ks(t);return St.useEffect(()=>{let u=s.current;if(!u)return;let d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(c!==r&&p){let m=new Event("click",{bubbles:a});p.call(u,r),u.dispatchEvent(m)}},[c,r,a]),(0,pr.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:i,style:{...o.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Pc.displayName=Ef;function Ec(e){return e?"checked":"unchecked"}var In=Rc,Tc=Dc;var An=D(U(),1),ca=Mc.forwardRef(({className:e,...t},r)=>(0,An.jsx)(In,{className:q("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:(0,An.jsx)(Tc,{className:q("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ca.displayName=In.displayName;var gr=D(J(),1);var W=D(U(),1);function Ic(){let{user:e,updateProfile:t,updatePassword:r}=Ge(),[a,o]=(0,gr.useState)({theme:e?.settings?.theme||"system",reduceMotion:e?.settings?.reduceMotion||!1,highContrast:e?.settings?.highContrast||!1,soundEnabled:e?.settings?.soundEnabled??!0}),[n,s]=(0,gr.useState)(""),[i,c]=(0,gr.useState)(""),[l,u]=(0,gr.useState)(!1);(0,gr.useEffect)(()=>{e?.settings&&o({theme:e.settings.theme||"system",reduceMotion:e.settings.reduceMotion||!1,highContrast:e.settings.highContrast||!1,soundEnabled:e.settings.soundEnabled??!0})},[e]);let d=async(p,m)=>{let g={...a,[p]:m};o(g),p==="theme"&&(m==="dark"?document.documentElement.classList.add("dark"):m==="light"?document.documentElement.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"));try{await t({settings:g})}catch(y){console.error("Failed to save settings:",y)}},f=async p=>{if(p.preventDefault(),n!==i){H.error("Passwords do not match.");return}if(n.length<6){H.error("Password must be at least 6 characters.");return}u(!0);try{await r(n),H.success("Password updated successfully."),s(""),c("")}catch(m){console.error(m),H.error("Failed to update password. "+m.message)}finally{u(!1)}};return(0,W.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6 pb-12",children:[(0,W.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Settings"}),(0,W.jsxs)(ie,{className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800",children:[(0,W.jsxs)(ye,{children:[(0,W.jsxs)(xe,{className:"flex items-center gap-2",children:[(0,W.jsx)(Qt,{className:"w-5 h-5"}),"Accessibility"]}),(0,W.jsx)(Ht,{children:"Customize your experience."})]}),(0,W.jsxs)(ge,{className:"space-y-6",children:[(0,W.jsxs)("div",{className:"flex items-center justify-between",children:[(0,W.jsxs)("div",{className:"space-y-0.5",children:[(0,W.jsx)(ue,{className:"text-base",children:"Reduce Motion"}),(0,W.jsx)("p",{className:"text-sm text-muted-foreground",children:"Minimize animations for a simpler experience."})]}),(0,W.jsx)(ca,{checked:a.reduceMotion,onCheckedChange:p=>d("reduceMotion",p)})]}),(0,W.jsxs)("div",{className:"flex items-center justify-between",children:[(0,W.jsxs)("div",{className:"space-y-0.5",children:[(0,W.jsx)(ue,{className:"text-base",children:"High Contrast"}),(0,W.jsx)("p",{className:"text-sm text-muted-foreground",children:"Increase contrast for better visibility."})]}),(0,W.jsx)(ca,{checked:a.highContrast,onCheckedChange:p=>d("highContrast",p)})]})]})]}),(0,W.jsxs)(ie,{className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800",children:[(0,W.jsx)(ye,{children:(0,W.jsxs)(xe,{className:"flex items-center gap-2",children:[(0,W.jsx)(dt,{className:"w-5 h-5"}),"Preferences"]})}),(0,W.jsxs)(ge,{className:"space-y-6",children:[(0,W.jsxs)("div",{className:"flex items-center justify-between",children:[(0,W.jsxs)("div",{className:"space-y-0.5",children:[(0,W.jsx)(ue,{className:"text-base",children:"Sound Effects"}),(0,W.jsx)("p",{className:"text-sm text-muted-foreground",children:"Play sounds when completing tasks."})]}),(0,W.jsx)(ca,{checked:a.soundEnabled,onCheckedChange:p=>d("soundEnabled",p)})]}),(0,W.jsxs)("div",{className:"space-y-3",children:[(0,W.jsx)(ue,{className:"text-base",children:"Theme"}),(0,W.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,W.jsx)(Ln,{active:a.theme==="light",onClick:()=>d("theme","light"),icon:Rs,label:"Light"}),(0,W.jsx)(Ln,{active:a.theme==="dark",onClick:()=>d("theme","dark"),icon:ha,label:"Dark"}),(0,W.jsx)(Ln,{active:a.theme==="system",onClick:()=>d("theme","system"),icon:gs,label:"System"})]})]})]})]}),(0,W.jsxs)(ie,{className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800 border-t-4 border-t-red-500",children:[(0,W.jsxs)(ye,{children:[(0,W.jsxs)(xe,{className:"flex items-center gap-2",children:[(0,W.jsx)(Mt,{className:"w-5 h-5 text-red-500"}),"Security"]}),(0,W.jsx)(Ht,{children:"Update your password."})]}),(0,W.jsxs)("form",{onSubmit:f,children:[(0,W.jsxs)(ge,{className:"space-y-4",children:[(0,W.jsxs)("div",{className:"space-y-2",children:[(0,W.jsx)(ue,{htmlFor:"newPass",children:"New Password"}),(0,W.jsx)(me,{id:"newPass",type:"password",value:n,onChange:p=>s(p.target.value),required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022"})]}),(0,W.jsxs)("div",{className:"space-y-2",children:[(0,W.jsx)(ue,{htmlFor:"confirmPass",children:"Confirm Password"}),(0,W.jsx)(me,{id:"confirmPass",type:"password",value:i,onChange:p=>c(p.target.value),required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022"})]})]}),(0,W.jsx)(xa,{children:(0,W.jsx)(O,{type:"submit",disabled:l,className:"w-full sm:w-auto",children:l?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Fe,{className:"w-4 h-4 mr-2 animate-spin"})," Updating..."]}):"Change Password"})})]})]})]})}function Ln({active:e,onClick:t,icon:r,label:a}){return(0,W.jsxs)("button",{onClick:t,className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${e?"border-indigo-500 bg-indigo-50 dark:bg-indigo-950/30 text-indigo-600 dark:text-indigo-400":"border-gray-200 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[(0,W.jsx)(r,{className:"w-6 h-6 mb-2"}),(0,W.jsx)("span",{className:"font-medium text-sm",children:a})]})}var Nt=D(U(),1);function Ac(){return(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("div",{className:"mb-8",children:[(0,Nt.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"About \u2139\uFE0F"}),(0,Nt.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Learn more about CodeON"})]}),(0,Nt.jsxs)("div",{className:"max-w-2xl space-y-6",children:[(0,Nt.jsxs)("div",{className:"bg-blue-100 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded-lg p-6",children:[(0,Nt.jsx)("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"CodeON - Learn & Compete"}),(0,Nt.jsx)("p",{className:"text-blue-800 dark:text-blue-200 text-sm",children:"CodeON is an interactive platform for learning C# programming through gamified lessons and multiplayer coding challenges."})]}),(0,Nt.jsx)("div",{className:"bg-green-100 dark:bg-green-900/20 border border-green-300 dark:border-green-700 rounded-lg p-4",children:(0,Nt.jsx)("p",{className:"text-green-800 dark:text-green-200 text-sm",children:"Version 1.0.0 \u2022 Built with passion for developers"})})]})]})}var ho=D(J(),1);var go=D(J(),1);var Xt=D(J(),1);var ph=!!(typeof window<"u"&&window.document&&window.document.createElement);function mo(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return t?.(o)}}var it=D(J(),1);var Lc=D(J(),1);function Mf(e,t){return Lc.useReducer((r,a)=>t[r][a]??r,e)}var _n=e=>{let{present:t,children:r}=e,a=If(t),o=typeof r=="function"?r({present:a.isPresent}):it.Children.only(r),n=Ne(a.ref,Af(o));return typeof r=="function"||a.isPresent?it.cloneElement(o,{ref:n}):null};_n.displayName="Presence";function If(e){let[t,r]=it.useState(),a=it.useRef(null),o=it.useRef(e),n=it.useRef("none"),s=e?"mounted":"unmounted",[i,c]=Mf(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return it.useEffect(()=>{let l=fo(a.current);n.current=i==="mounted"?l:"none"},[i]),Gt(()=>{let l=a.current,u=o.current;if(u!==e){let f=n.current,p=fo(l);e?c("MOUNT"):p==="none"||l?.display==="none"?c("UNMOUNT"):c(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,c]),Gt(()=>{if(t){let l,u=t.ownerDocument.defaultView??window,d=p=>{let g=fo(a.current).includes(CSS.escape(p.animationName));if(p.target===t&&g&&(c("ANIMATION_END"),!o.current)){let y=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},f=p=>{p.target===t&&(n.current=fo(a.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:it.useCallback(l=>{a.current=l?getComputedStyle(l):null,r(l)},[])}}function fo(e){return e?.animationName||"none"}function Af(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Wt=D(U(),1),po="Tabs",[Lf,Dh]=gt(po,[Or]),_c=Or(),[_f,On]=Lf(po),Oc=Xt.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,onValueChange:o,defaultValue:n,orientation:s="horizontal",dir:i,activationMode:c="automatic",...l}=e,u=Mr(i),[d,f]=Lt({prop:a,onChange:o,defaultProp:n??"",caller:po});return(0,Wt.jsx)(_f,{scope:r,baseId:vt(),value:d,onValueChange:f,orientation:s,dir:u,activationMode:c,children:(0,Wt.jsx)(we.div,{dir:u,"data-orientation":s,...l,ref:t})})});Oc.displayName=po;var Fc="TabsList",Bc=Xt.forwardRef((e,t)=>{let{__scopeTabs:r,loop:a=!0,...o}=e,n=On(Fc,r),s=_c(r);return(0,Wt.jsx)(Za,{asChild:!0,...s,orientation:n.orientation,dir:n.dir,loop:a,children:(0,Wt.jsx)(we.div,{role:"tablist","aria-orientation":n.orientation,...o,ref:t})})});Bc.displayName=Fc;var Uc="TabsTrigger",Hc=Xt.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,disabled:o=!1,...n}=e,s=On(Uc,r),i=_c(r),c=jc(s.baseId,a),l=$c(s.baseId,a),u=a===s.value;return(0,Wt.jsx)(Ja,{asChild:!0,...i,focusable:!o,active:u,children:(0,Wt.jsx)(we.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:c,...n,ref:t,onMouseDown:mo(e.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?s.onValueChange(a):d.preventDefault()}),onKeyDown:mo(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&s.onValueChange(a)}),onFocus:mo(e.onFocus,()=>{let d=s.activationMode!=="manual";!u&&!o&&d&&s.onValueChange(a)})})})});Hc.displayName=Uc;var zc="TabsContent",Gc=Xt.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,forceMount:o,children:n,...s}=e,i=On(zc,r),c=jc(i.baseId,a),l=$c(i.baseId,a),u=a===i.value,d=Xt.useRef(u);return Xt.useEffect(()=>{let f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),(0,Wt.jsx)(_n,{present:o||u,children:({present:f})=>(0,Wt.jsx)(we.div,{"data-state":u?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:l,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&n})})});Gc.displayName=zc;function jc(e,t){return`${e}-trigger-${t}`}function $c(e,t){return`${e}-content-${t}`}var Vc=Oc,Fn=Bc,Bn=Hc,Un=Gc;var vo=D(U(),1),Ur=Vc,vr=go.forwardRef(({className:e,...t},r)=>(0,vo.jsx)(Fn,{ref:r,className:q("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));vr.displayName=Fn.displayName;var _t=go.forwardRef(({className:e,...t},r)=>(0,vo.jsx)(Bn,{ref:r,className:q("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));_t.displayName=Bn.displayName;var Ot=go.forwardRef(({className:e,...t},r)=>(0,vo.jsx)(Un,{ref:r,className:q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ot.displayName=Un.displayName;var Wc=[{id:"heart-refill",name:"Heart Refill",description:"Refill your hearts to max (5).",icon:us,image:"/assets/icons/heart.png",cost:250,color:"text-red-500",bgColor:"bg-red-50 dark:bg-red-950/30",allowQuantity:!1},{id:"streak-freeze",name:"Streak Freeze",description:"Protect your streak for one missed day.",icon:Gr,image:"/assets/icons/snowflake.png",cost:500,color:"text-blue-500",bgColor:"bg-blue-50 dark:bg-blue-950/30",allowQuantity:!0},{id:"hint-power",name:"Hint",description:"Get a hint on a tough challenge.",icon:ms,image:"/assets/icons/bulb.png",cost:100,color:"text-yellow-500",bgColor:"bg-yellow-50 dark:bg-yellow-950/30",allowQuantity:!0}];async function Xc(e,t,r,a=1){let{coins:o,hearts:n,streakFreezes:s,hints:i}=r,c=t.cost*a;if((o||0)<c)return{success:!1,message:`Not enough coins! You need ${c}.`};let l={coins:(o||0)-c};switch(t.id){case"heart-refill":if((n||0)>=5)return{success:!1,message:"Hearts are already full!"};l.hearts=5;break;case"streak-freeze":l.streak_freezes=(s||0)+a;break;case"hint-power":l.hints=(i||0)+a;break;default:return{success:!1,message:"Unknown item type."}}let{error:u}=await ee.from("users").update(l).eq("id",e);return u?(console.error("Purchase Transaction Failed:",u),{success:!1,message:"Transaction failed. Please try again."}):{success:!0,message:`Successfully purchased ${a} ${t.name}${a>1?"s":""}!`}}var A=D(U(),1);function Kc(){let{user:e,updateProfile:t}=Ge(),[r,a]=(0,ho.useState)(null),[o,n]=(0,ho.useState)(1),[s,i]=(0,ho.useState)(!1),c=e?.coins||0,l=f=>{a(f),n(1)},u=f=>{n(p=>Math.max(1,Math.min(10,p+f)))},d=async()=>{if(!e||!r)return;i(!0);let f=await Xc(e.uid,r,e,o);if(f.success){let p=r.cost*o,m={coins:c-p};r.id==="heart-refill"&&(m.hearts=5),r.id==="streak-freeze"&&(m.streakFreezes=(e.streakFreezes||0)+o),r.id==="hint-power"&&(m.hints=(e.hints||0)+o),await t(m),H.success(f.message),a(null)}else H.error(f.message);i(!1)};return(0,A.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 pb-12",children:[(0,A.jsx)(ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:(0,A.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,A.jsxs)("div",{className:"flex items-center gap-3",children:[(0,A.jsx)(Ra,{className:"w-8 h-8 text-indigo-500"}),(0,A.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900 dark:text-white",children:"The Store"})]}),(0,A.jsxs)("div",{className:"flex-shrink-0 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-full p-2 pr-6 shadow-md flex items-center gap-3",children:[(0,A.jsx)("img",{src:"/assets/icons/coinv2.png",alt:"Coins",className:"w-8 h-8"}),(0,A.jsxs)("div",{className:"flex flex-col",children:[(0,A.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium leading-none",children:"Your Coins"}),(0,A.jsx)("span",{className:"text-lg font-bold text-gray-900 dark:text-white leading-none",children:c.toLocaleString()})]})]})]})}),(0,A.jsxs)(Ur,{defaultValue:"powerups",className:"w-full",children:[(0,A.jsxs)(vr,{className:"grid w-full grid-cols-2 max-w-md mx-auto h-12 rounded-xl",children:[(0,A.jsxs)(_t,{value:"powerups",className:"h-10 rounded-lg",children:[(0,A.jsx)(To,{className:"w-4 h-4 mr-2"}),"Power-Ups"]}),(0,A.jsxs)(_t,{value:"inventory",className:"h-10 rounded-lg",children:[(0,A.jsx)(es,{className:"w-4 h-4 mr-2"}),"Inventory"]})]}),(0,A.jsx)(Ot,{value:"powerups",children:(0,A.jsx)(ae.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:Wc.map(f=>(0,A.jsx)(Ff,{item:f,onPurchaseClick:()=>l(f),userCoins:c},f.id))})}),(0,A.jsx)(Ot,{value:"inventory",children:(0,A.jsxs)(ae.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[(0,A.jsx)(Hn,{name:"Streak Freeze",count:e?.streakFreezes||0,icon:Na,color:"text-blue-500",description:"Protect your streak for a day."}),(0,A.jsx)(Hn,{name:"Hints",count:e?.hints||0,icon:To,image:"/assets/icons/bulb.png",color:"text-yellow-500",description:"Get help on tough challenges."}),(0,A.jsx)(Hn,{name:"Hearts",count:e?.hearts||0,max:5,icon:wa,color:"text-red-500",description:"Lives remaining."})]})})]}),(0,A.jsx)(Ce,{open:!!r,onOpenChange:f=>!f&&a(null),children:(0,A.jsxs)(ke,{className:"sm:max-w-md",children:[(0,A.jsxs)(Pe,{children:[(0,A.jsxs)(Ee,{className:"flex items-center gap-2",children:[(0,A.jsx)(Cs,{className:"w-5 h-5 text-indigo-500"}),"Confirm Purchase"]}),(0,A.jsx)(Ue,{children:"Are you sure you want to buy this item?"})]}),r&&(0,A.jsxs)("div",{className:"py-4 space-y-6",children:[(0,A.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border border-gray-100 dark:border-gray-800",children:[(0,A.jsx)("div",{className:`w-16 h-16 rounded-xl ${r.bgColor} flex items-center justify-center shrink-0`,children:r.image?(0,A.jsx)("img",{src:r.image,alt:r.name,className:"w-10 h-10 object-contain"}):(0,A.jsx)(r.icon,{className:`w-8 h-8 ${r.color}`})}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h4",{className:"font-bold text-lg",children:r.name}),(0,A.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,A.jsx)("img",{src:"/assets/icons/coinv2.png",alt:"C",className:"w-4 h-4"}),(0,A.jsx)("span",{className:"font-mono font-bold",children:r.cost})," ","each"]})]})]}),r.allowQuantity&&(0,A.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,A.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Quantity"}),(0,A.jsxs)("div",{className:"flex items-center gap-3",children:[(0,A.jsx)(O,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-lg",onClick:()=>u(-1),disabled:o<=1,children:(0,A.jsx)(ps,{className:"w-4 h-4"})}),(0,A.jsx)("span",{className:"w-8 text-center font-bold text-lg",children:o}),(0,A.jsx)(O,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-lg",onClick:()=>u(1),disabled:o>=10,children:(0,A.jsx)(It,{className:"w-4 h-4"})})]})]}),(0,A.jsxs)("div",{className:"flex items-center justify-between border-t pt-4 mt-4",children:[(0,A.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:"Total Cost"}),(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[(0,A.jsx)("img",{src:"/assets/icons/coinv2.png",alt:"C",className:"w-5 h-5"}),(0,A.jsx)("span",{className:`text-xl font-black ${c<r.cost*o?"text-red-500":"text-indigo-600 dark:text-indigo-400"}`,children:(r.cost*o).toLocaleString()})]})]}),c<r.cost*o&&(0,A.jsxs)("p",{className:"text-red-500 text-sm text-center font-medium bg-red-50 dark:bg-red-950/30 p-2 rounded-lg",children:["You need"," ",(r.cost*o-c).toLocaleString()," ","more coins!"]})]}),(0,A.jsxs)(Be,{className:"gap-2 sm:gap-0",children:[(0,A.jsx)(O,{variant:"ghost",onClick:()=>a(null),disabled:s,children:"Cancel"}),(0,A.jsx)(O,{onClick:d,disabled:!r||c<r.cost*o||s,className:"bg-indigo-600 hover:bg-indigo-700 text-white w-full sm:w-auto font-bold",children:s?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Fe,{className:"w-4 h-4 mr-2 animate-spin"})," ","Processing..."]}):"Confirm Purchase"})]})]})})]})}function Ff({item:e,onPurchaseClick:t,userCoins:r}){let{icon:a}=e,o=r>=e.cost;return(0,A.jsxs)(ie,{className:"bg-white dark:bg-gray-900 shadow-lg border-gray-100 dark:border-gray-800 rounded-3xl flex flex-col overflow-hidden hover:shadow-xl transition-shadow cursor-pointer group",onClick:t,children:[(0,A.jsxs)(ye,{className:"flex-col items-center text-center pb-2",children:[(0,A.jsx)("div",{className:`w-20 h-20 rounded-3xl ${e.bgColor} flex items-center justify-center mb-4 transition-transform group-hover:scale-110`,children:e.image?(0,A.jsx)("img",{src:e.image,alt:e.name,className:"w-12 h-12 object-contain"}):(0,A.jsx)(a,{className:`w-10 h-10 ${e.color}`})}),(0,A.jsx)(xe,{className:"text-xl font-bold",children:e.name})]}),(0,A.jsx)(ge,{className:"flex-1 text-center px-6",children:(0,A.jsx)(Ht,{className:"text-sm",children:e.description})}),(0,A.jsx)(xa,{className:"pt-2 pb-6",children:(0,A.jsx)(O,{className:"w-full h-12 rounded-xl text-base font-bold",variant:o?"default":"secondary",children:(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[(0,A.jsx)("span",{children:"Buy"}),(0,A.jsxs)("div",{className:"flex items-center gap-1 bg-black/10 dark:bg-white/10 px-2 py-0.5 rounded-lg",children:[(0,A.jsx)("img",{src:"/assets/icons/coinv2.png",alt:"C",className:"w-4 h-4"}),(0,A.jsx)("span",{children:e.cost})]})]})})})]})}function Hn({name:e,count:t,max:r,icon:a,color:o,description:n,image:s}){return(0,A.jsxs)(ie,{className:"bg-white dark:bg-gray-900 shadow-sm border border-gray-100 dark:border-gray-800 rounded-3xl flex items-center p-4 gap-4",children:[(0,A.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-gray-50 dark:bg-gray-800 flex items-center justify-center shrink-0",children:s?(0,A.jsx)("img",{src:s,alt:e,className:"w-9 h-9 object-contain"}):(0,A.jsx)(a,{className:`w-7 h-7 ${o}`})}),(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:e}),(0,A.jsxs)("div",{className:"text-2xl font-black text-gray-900 dark:text-white",children:["x",t," ",r&&(0,A.jsxs)("span",{className:"text-gray-400 text-lg",children:["/ ",r]})]})]})]})}var Dt=D(J(),1);var C=D(U(),1),Bf=["week-warrior","consistency-king","century-club","bug-hunter","code-wizard","night-owl","early-bird","quest-master"];function Yc({user:e,onSaveAvatar:t}){let{updateProfile:r,linkGoogleAccount:a,unlinkGoogleAccount:o,refreshSession:n}=Ge(),[s,i]=(0,Dt.useState)(e?.displayName||""),[c,l]=(0,Dt.useState)(e?.badges||[]),[u,d]=(0,Dt.useState)(null),[f,p]=(0,Dt.useState)(!1),[m,g]=(0,Dt.useState)(!1),[y,v]=(0,Dt.useState)(!1),[N,k]=(0,Dt.useState)(!1),I=s.trim()!==""&&s.trim()!==e?.displayName,x=JSON.stringify(c.sort())!==JSON.stringify((e?.badges||[]).sort());(0,Dt.useEffect)(()=>{e?.displayName&&i(e.displayName),e?.badges&&l(e.badges),(async()=>{if(e?.trophies!==void 0)try{let se=await Ri(e.trophies);d(se)}catch(se){console.warn("Could not fetch rank",se)}})()},[e]),(0,Dt.useEffect)(()=>{(async()=>{if(sessionStorage.getItem("codeon_linking_status")==="pending"){sessionStorage.removeItem("codeon_linking_status"),g(!0),H.loading("Verifying Google account...",{id:"bind-load"});try{let be=await n();if(be&&be.identities){let Qe=be.identities.find(De=>De.provider==="google");if(Qe){let De=Qe.identity_data?.email;await r({googleBound:!0,...De?{email:De}:{}}),H.success("Account successfully linked!",{id:"bind-load"})}else H.error("Linking failed: Identity not found.",{id:"bind-load"})}}catch(be){console.error("Binding error:",be),H.error("Error finalizing link.",{id:"bind-load"})}finally{g(!1)}}})()},[n,r]);let _=async()=>{if(!(!I&&!x)){p(!0);try{await r({displayName:s.trim(),badges:c}),H.success("Profile updated successfully!")}catch{H.error("Failed to update profile.")}finally{p(!1)}}},S=async L=>{await t(L),H.success("Avatar updated! Looking good.")},T=()=>{v(!0)},B=async()=>{v(!1),g(!0);try{await a()}catch(L){console.error(L),g(!1),L.message?.includes("already linked")?H.error("This Google account is already used."):H.error(`Error: ${L.message}`)}},X=async()=>{k(!1),g(!0);try{await o(),await a()}catch(L){console.error(L),H.error(`Change account failed: ${L.message}`),g(!1)}},j=L=>{l(se=>se.includes(L)?se.filter(be=>be!==L):[...se,L])};if(!e)return(0,C.jsx)(Uf,{});let oe=e.joinedAt?new Date(e.joinedAt).toLocaleDateString():"N/A",w={trophies:e.trophies||0,xp:e.xp||0,league:e.league||"Novice",rank:u?`#${u}`:"..."};return(0,C.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 pb-12 font-pixelify",children:[(0,C.jsx)(ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:(0,C.jsx)(ie,{className:"bg-white dark:bg-gray-900 shadow-lg rounded-3xl overflow-hidden",children:(0,C.jsxs)(ge,{className:"p-6 flex flex-col sm:flex-row items-center gap-6",children:[(0,C.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-indigo-500 bg-gray-100 dark:bg-gray-800 flex-shrink-0",children:(0,C.jsx)(Jt,{config:e.avatarConfig,headOnly:!0})}),(0,C.jsxs)("div",{className:"text-center sm:text-left flex-1",children:[(0,C.jsx)("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:e.displayName||"New Coder"}),(0,C.jsxs)("p",{className:"text-lg text-gray-600 dark:text-gray-400 font-mono",children:["ID: ",e.studentId||"Student"]}),(0,C.jsxs)("div",{className:"flex items-center justify-center sm:justify-start text-sm text-gray-500 mt-2",children:[(0,C.jsx)(qt,{className:"w-4 h-4 mr-2"})," Joined: ",oe]})]}),(0,C.jsxs)("div",{className:"hidden sm:flex ml-auto flex-col items-end gap-2 max-w-[250px]",children:[(0,C.jsx)("div",{className:"text-sm text-gray-500 font-bold uppercase tracking-wider",children:"Active Badges"}),(0,C.jsx)("div",{className:"flex flex-wrap justify-end gap-1.5",children:e.badges&&e.badges.length>0?e.badges.slice(0,5).map(L=>(0,C.jsx)(Me,{variant:"secondary",className:"text-[10px] px-2 py-0.5 bg-indigo-50 text-indigo-600 border-indigo-100 dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-800",children:L},L)):(0,C.jsx)("span",{className:"text-xs text-gray-400 italic",children:"No badges equipped"})})]})]})})}),(0,C.jsxs)(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,C.jsx)(bo,{icon:At,value:w.trophies.toLocaleString(),label:"Total Trophies",color:"text-yellow-500"}),(0,C.jsx)(bo,{icon:dt,value:w.xp.toLocaleString(),label:"Total XP",color:"text-blue-500"}),(0,C.jsx)(bo,{icon:Nr,value:w.league,label:"League",color:"text-purple-500"}),(0,C.jsx)(bo,{icon:So,value:w.rank,label:"Global Rank",color:"text-indigo-500"})]}),(0,C.jsx)(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,C.jsxs)(Ur,{defaultValue:"profile",className:"w-full",children:[(0,C.jsxs)(vr,{className:"grid w-full grid-cols-2 max-w-sm mx-auto h-12 rounded-xl",children:[(0,C.jsxs)(_t,{value:"profile",className:"h-10 rounded-lg",children:[(0,C.jsx)(Ps,{className:"w-4 h-4 mr-2"})," Edit Profile"]}),(0,C.jsxs)(_t,{value:"avatar",className:"h-10 rounded-lg",children:[(0,C.jsx)(Dr,{className:"w-4 h-4 mr-2"})," Edit Avatar"]})]}),(0,C.jsx)(Ot,{value:"profile",children:(0,C.jsxs)("div",{className:"grid gap-6 mt-4",children:[(0,C.jsxs)(ie,{className:"bg-white dark:bg-gray-900 shadow-lg rounded-3xl",children:[(0,C.jsx)(ye,{children:(0,C.jsx)(xe,{children:"Your Details"})}),(0,C.jsxs)(ge,{className:"space-y-4",children:[(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(ue,{htmlFor:"studentId",children:"Student ID (Read-only)"}),(0,C.jsxs)("div",{className:"relative",children:[(0,C.jsx)(Do,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,C.jsx)(me,{id:"studentId",value:e.studentId||"N/A",disabled:!0,className:"pl-9 bg-gray-50 dark:bg-gray-800"})]})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(ue,{htmlFor:"displayName",children:"Display Name"}),(0,C.jsx)(me,{id:"displayName",value:s,onChange:L=>i(L.target.value),placeholder:"Enter your coder name"})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsx)(ue,{htmlFor:"email",children:"Email"}),e.googleBound?(0,C.jsxs)("span",{className:"text-[10px] uppercase font-bold text-green-600 dark:text-green-400 flex items-center gap-1 bg-green-50 dark:bg-green-900/20 px-2 py-0.5 rounded-full",children:[(0,C.jsx)(Ct,{className:"w-3 h-3"})," Google Linked"]}):(0,C.jsx)("span",{className:"text-[10px] uppercase font-bold text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded-full",children:"Not Linked"})]}),(0,C.jsx)(me,{id:"email",value:e.email||"",disabled:!0,className:"bg-gray-50 dark:bg-gray-800",placeholder:"No email associated"})]})]})]}),(0,C.jsxs)(ie,{className:"bg-white dark:bg-gray-900 shadow-lg rounded-3xl",children:[(0,C.jsxs)(ye,{children:[(0,C.jsxs)(xe,{className:"flex items-center gap-2",children:[(0,C.jsx)(So,{className:"w-5 h-5 text-orange-500"})," Badge Showcase"]}),(0,C.jsx)(Ht,{children:"Select the badges you want to display."})]}),(0,C.jsx)(ge,{children:(0,C.jsx)("div",{className:"flex flex-wrap gap-2",children:Bf.map(L=>{let se=c.includes(L);return(0,C.jsxs)("div",{onClick:()=>j(L),className:`cursor-pointer px-3 py-2 rounded-xl border-2 transition-all flex items-center gap-2 ${se?"bg-orange-50 border-orange-500 text-orange-700 dark:bg-orange-900/20 dark:border-orange-500 dark:text-orange-300":"bg-gray-50 border-transparent text-gray-500 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-400"}`,children:[se?(0,C.jsx)(Ct,{className:"w-3.5 h-3.5"}):(0,C.jsx)(It,{className:"w-3.5 h-3.5 opacity-50"}),(0,C.jsx)("span",{className:"text-xs font-bold uppercase",children:L.replace(/-/g," ")})]},L)})})})]}),(0,C.jsxs)(ie,{className:"bg-white dark:bg-gray-900 shadow-lg rounded-3xl border-t-4 border-t-blue-500",children:[(0,C.jsx)(ye,{children:(0,C.jsxs)(xe,{className:"flex items-center gap-2",children:[(0,C.jsx)(Do,{className:"w-5 h-5 text-blue-500"})," Account Security"]})}),(0,C.jsx)(ge,{children:(0,C.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[(0,C.jsxs)("div",{className:"flex items-center gap-4",children:[(0,C.jsx)("div",{className:"p-3 bg-white dark:bg-gray-700 rounded-full shadow-sm",children:(0,C.jsx)("svg",{className:"w-6 h-6",viewBox:"0 0 488 512",children:(0,C.jsx)("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"})})}),(0,C.jsxs)("div",{children:[(0,C.jsx)("h4",{className:"font-bold text-gray-900 dark:text-white",children:"Google Account"}),(0,C.jsx)("p",{className:"text-sm text-gray-500",children:e?.googleBound?"Linked to "+e.email:"Link for easier login."})]})]}),e?.googleBound?(0,C.jsx)(O,{variant:"outline",onClick:()=>k(!0),disabled:m,children:m?(0,C.jsx)(Fe,{className:"w-4 h-4 animate-spin"}):(0,C.jsxs)(C.Fragment,{children:[" ",(0,C.jsx)(xs,{className:"w-4 h-4 mr-2"})," Change Account"]})}):(0,C.jsx)(O,{onClick:()=>v(!0),disabled:m,variant:"outline",className:"hover:bg-blue-50 dark:hover:bg-blue-900/20 border-blue-200 text-blue-600",children:m?(0,C.jsx)(Fe,{className:"w-4 h-4 animate-spin"}):(0,C.jsxs)(C.Fragment,{children:[" ",(0,C.jsx)(fs,{className:"w-4 h-4 mr-2"})," Bind Account"]})})]})})]}),(0,C.jsx)("div",{className:"sticky bottom-4 z-10",children:(0,C.jsx)(O,{onClick:_,disabled:!I&&!x||f,className:`w-full h-12 font-bold rounded-xl transition-all shadow-xl ${!I&&!x?"bg-gray-200 text-gray-400 dark:bg-gray-800 dark:text-gray-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 text-white hover:scale-[1.01]"}`,children:f?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Fe,{className:"w-4 h-4 mr-2 animate-spin"})," ","Saving..."]}):"Save Changes"})})]})}),(0,C.jsx)(Ot,{value:"avatar",children:(0,C.jsx)("div",{className:"mt-4",children:(0,C.jsx)(As,{user:e,initialConfig:e.avatarConfig,onSave:S})})})]})}),(0,C.jsx)(Ce,{open:y,onOpenChange:v,children:(0,C.jsxs)(ke,{children:[(0,C.jsxs)(Pe,{children:[(0,C.jsx)(Ee,{children:"Bind Google Account?"}),(0,C.jsx)(Ue,{children:"Redirecting to Google to verify your account."})]}),(0,C.jsxs)(Be,{children:[(0,C.jsx)(O,{variant:"ghost",onClick:()=>v(!1),children:"Cancel"}),(0,C.jsx)(O,{onClick:B,className:"bg-blue-600 hover:bg-blue-700",children:"Continue"})]})]})}),(0,C.jsx)(Ce,{open:N,onOpenChange:k,children:(0,C.jsxs)(ke,{children:[(0,C.jsxs)(Pe,{children:[(0,C.jsx)(Ee,{children:"Change Linked Account?"}),(0,C.jsxs)(Ue,{children:["This will disconnect ",(0,C.jsx)("b",{children:e?.email})," and allow you to sign in with a different Google account."]})]}),(0,C.jsxs)(Be,{children:[(0,C.jsx)(O,{variant:"ghost",onClick:()=>k(!1),children:"Cancel"}),(0,C.jsx)(O,{onClick:X,className:"bg-blue-600 hover:bg-blue-700",children:"Yes, Change Account"})]})]})})]})}function bo({icon:e,value:t,label:r,color:a}){return(0,C.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-3 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border border-gray-100 dark:border-gray-800 shadow-sm transition-transform hover:scale-[1.02]",children:[(0,C.jsx)("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:(0,C.jsx)(e,{className:`w-5 h-5 ${a}`})}),(0,C.jsxs)("div",{className:"text-center md:text-left",children:[(0,C.jsx)("div",{className:"text-xl md:text-2xl font-black text-gray-900 dark:text-white",children:t}),(0,C.jsx)("div",{className:"text-[10px] md:text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:r})]})]})}function Uf(){return(0,C.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 pb-12",children:[(0,C.jsxs)("div",{className:"bg-white dark:bg-gray-900 shadow-lg rounded-3xl p-6 flex flex-col sm:flex-row items-center gap-6",children:[(0,C.jsx)(ne,{className:"w-24 h-24 rounded-full"}),(0,C.jsxs)("div",{className:"space-y-2 flex-1 w-full sm:w-auto text-center sm:text-left",children:[(0,C.jsx)(ne,{className:"h-8 w-48 mx-auto sm:mx-0"}),(0,C.jsx)(ne,{className:"h-4 w-64 mx-auto sm:mx-0"}),(0,C.jsx)(ne,{className:"h-4 w-32 mx-auto sm:mx-0"})]}),(0,C.jsx)("div",{className:"hidden sm:block",children:(0,C.jsx)(ne,{className:"h-12 w-24"})})]}),(0,C.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(4)].map((e,t)=>(0,C.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border border-gray-100 dark:border-gray-800 h-24 flex items-center gap-3",children:[(0,C.jsx)(ne,{className:"w-10 h-10 rounded-xl"}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(ne,{className:"w-16 h-6"}),(0,C.jsx)(ne,{className:"w-20 h-3"})]})]},t))}),(0,C.jsxs)("div",{className:"w-full space-y-6",children:[(0,C.jsx)(ne,{className:"h-12 w-full max-w-sm rounded-xl mx-auto"}),(0,C.jsx)(ne,{className:"h-[400px] w-full rounded-3xl"})]})]})}var Ye=D(J(),1);var b=D(U(),1),Hf=["BSIT-1A","BSIT-1B","BSCS-1A","BSIS","BSAIS","ACT"];function qc(){let[e,t]=(0,Ye.useState)([]),[r,a]=(0,Ye.useState)([]),[o,n]=(0,Ye.useState)(!0),[s,i]=(0,Ye.useState)(""),[c,l]=(0,Ye.useState)(""),[u,d]=(0,Ye.useState)(!1),[f,p]=(0,Ye.useState)(!1),[m,g]=(0,Ye.useState)(!1),[y,v]=(0,Ye.useState)(!1),[N,k]=(0,Ye.useState)(null),[I,x]=(0,Ye.useState)(null),[_,S]=(0,Ye.useState)(null),[T,B]=(0,Ye.useState)({studentId:"",fullName:"",email:"",section:"",birthdate:"",password:""}),[X,j]=(0,Ye.useState)(!1),[oe,w]=(0,Ye.useState)(!1),L=async()=>{n(!0);let{data:{user:M}}=await ee.auth.getUser();if(M){let{data:_e}=await ee.from("users").select("role").eq("id",M.id).single();l(_e?.role||"")}let{data:ve,error:he}=await ee.from("users").select("*").in("role",["user","student"]).order("student_id",{ascending:!0});he?console.error("Error fetching students:",he):t(ve||[]);let{data:$,error:pe}=await ee.from("account_requests").select("*").order("created_at",{ascending:!1});pe?console.error("Error fetching requests:",pe):a($||[]),n(!1)};(0,Ye.useEffect)(()=>{L()},[]);let se=M=>{let ve=M?`Ici${M}`:"";B(he=>({...he,birthdate:M,password:ve}))},be=async M=>{M.preventDefault(),j(!0);try{let{error:ve}=await ee.from("users").insert([{student_id:T.studentId,display_name:T.fullName,email:T.email,section:T.section,birthdate:T.birthdate,role:"user"}]);if(ve)throw ve;_&&await ee.from("account_requests").update({is_approved:!0}).eq("id",_),H.success((0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("span",{className:"font-bold",children:"Student Created!"}),(0,b.jsxs)("span",{className:"text-xs",children:["Pass: ",(0,b.jsx)("span",{className:"font-mono",children:T.password})]})]})),ct(),L()}catch(ve){console.error(ve),ve.message.includes("users_student_id_key")?H.error("This Student ID is already registered!",{description:"Check the 'Active Students' tab. You can delete the duplicate there."}):H.error("Failed to create: "+ve.message)}finally{j(!1)}},Qe=async M=>{if(M.preventDefault(),!!N){j(!0);try{let{error:ve}=await ee.from("users").update({student_id:T.studentId,display_name:T.fullName,email:T.email,section:T.section,birthdate:T.birthdate}).eq("id",N.id);if(ve)throw ve;H.success("Student updated successfully"),p(!1),L()}catch(ve){H.error("Update failed: "+ve.message)}finally{j(!1)}}},De=async()=>{if(N){j(!0);try{let{error:M}=await ee.from("users").delete().eq("id",N.id);if(M)throw M;H.success("Student record deleted"),g(!1),L()}catch(M){H.error("Delete failed: "+M.message)}finally{j(!1)}}},Y=M=>{S(M.id),B({studentId:M.student_id,fullName:M.full_name,email:`${M.student_id.toLowerCase()}@student.school.edu`,section:M.section,birthdate:M.birthdate||"",password:M.birthdate?`Ici${M.birthdate}`:""}),d(!0)},tt=M=>{x(M),v(!0)},ze=async()=>{if(I){j(!0);try{let{error:M}=await ee.from("account_requests").delete().eq("id",I);if(M)throw M;H.success("Request rejected"),v(!1),L()}catch(M){H.error("Failed: "+M.message)}finally{j(!1)}}},rt=M=>{navigator.clipboard.writeText(M),H.success("Copied to clipboard")},ct=()=>{d(!1),S(null),B({studentId:"",fullName:"",email:"",section:"",birthdate:"",password:""})},Ze=()=>{S(null),B({studentId:"",fullName:"",email:"",section:"",birthdate:"",password:""}),d(!0)},Et=M=>{k(M),B({studentId:M.student_id,fullName:M.display_name,email:M.email,section:M.section,birthdate:M.birthdate||"",password:""}),p(!0)},at=e.filter(M=>M.display_name?.toLowerCase().includes(s.toLowerCase())||M.student_id?.toLowerCase().includes(s.toLowerCase())),de=r.filter(M=>!M.is_approved).length,Oe=!0;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Student Management"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage student accounts and records."})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(O,{variant:"outline",onClick:L,disabled:o,children:[(0,b.jsx)(Sr,{className:`w-4 h-4 mr-2 ${o?"animate-spin":""}`})," ","Refresh"]}),Oe&&(0,b.jsxs)(O,{onClick:Ze,className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,b.jsx)(It,{className:"w-4 h-4 mr-2"})," Add Student"]})]})]}),(0,b.jsxs)(Ur,{defaultValue:"active",className:"w-full",children:[(0,b.jsxs)(vr,{className:"grid w-full max-w-md grid-cols-2",children:[(0,b.jsx)(_t,{value:"active",children:"Active Students"}),(0,b.jsxs)(_t,{value:"requests",className:"relative",children:["Account Requests",de>0&&(0,b.jsx)("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] text-white",children:de})]})]}),(0,b.jsx)(Ot,{value:"active",className:"mt-4",children:(0,b.jsxs)(ie,{className:"border-gray-200 dark:border-gray-800",children:[(0,b.jsx)(ye,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(xe,{children:"Student Directory"}),(0,b.jsxs)("div",{className:"relative w-64",children:[(0,b.jsx)(Zt,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,b.jsx)(me,{placeholder:"Search...",className:"pl-8 bg-gray-50 dark:bg-gray-900",value:s,onChange:M=>i(M.target.value)})]})]})}),(0,b.jsx)(ge,{children:(0,b.jsx)("div",{className:"rounded-md border border-gray-200 dark:border-gray-800 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3",children:"ID"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Section"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Birthdate"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800 bg-white dark:bg-gray-900",children:o?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:"Loading..."})}):at.length===0?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:"No students found."})}):at.map(M=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[(0,b.jsx)("td",{className:"px-4 py-3 font-mono text-gray-600 dark:text-gray-400",children:M.student_id}),(0,b.jsx)("td",{className:"px-4 py-3 font-bold",children:M.display_name}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(Me,{variant:"outline",children:M.section})}),(0,b.jsx)("td",{className:"px-4 py-3 text-gray-500",children:M.birthdate||"-"}),(0,b.jsx)("td",{className:"px-4 py-3 text-right",children:Oe&&(0,b.jsxs)(xt,{children:[(0,b.jsx)(wt,{asChild:!0,children:(0,b.jsx)(O,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(kr,{className:"h-4 w-4"})})}),(0,b.jsxs)(mt,{align:"end",children:[(0,b.jsxs)(qe,{onClick:()=>Et(M),children:[(0,b.jsx)(Rr,{className:"mr-2 h-4 w-4"})," Edit"]}),(0,b.jsxs)(qe,{className:"text-red-600",onClick:()=>{k(M),g(!0)},children:[(0,b.jsx)(Pr,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},M.id))})]})})})})]})}),(0,b.jsx)(Ot,{value:"requests",className:"mt-4",children:(0,b.jsxs)(ie,{className:"border-gray-200 dark:border-gray-800",children:[(0,b.jsx)(ye,{children:(0,b.jsx)(xe,{children:"Access Requests"})}),(0,b.jsx)(ge,{children:r.length===0?(0,b.jsxs)("div",{className:"text-center py-12 text-gray-500 bg-gray-50 dark:bg-gray-900 rounded-xl border border-dashed border-gray-200 dark:border-gray-800",children:[(0,b.jsx)(Ds,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),(0,b.jsx)("p",{children:"No requests found."})]}):(0,b.jsx)("div",{className:"space-y-4",children:r.map(M=>(0,b.jsxs)("div",{className:`flex items-center justify-between p-4 border rounded-xl shadow-sm transition-all ${M.is_approved?"bg-gray-100 dark:bg-gray-800/50 border-gray-200 dark:border-gray-800 opacity-70":"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800"}`,children:[(0,b.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,b.jsx)("div",{className:`h-10 w-10 rounded-full flex items-center justify-center font-bold text-lg ${M.is_approved?"bg-gray-300 dark:bg-gray-700 text-gray-500":"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400"}`,children:M.full_name[0]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:`font-bold ${M.is_approved?"line-through text-gray-500":"text-gray-900 dark:text-white"}`,children:M.full_name}),(0,b.jsxs)("div",{className:"flex gap-2 text-sm text-gray-500",children:[(0,b.jsx)("span",{className:"font-mono",children:M.student_id}),(0,b.jsx)("span",{children:"\u2022"}),(0,b.jsx)("span",{children:M.section}),(0,b.jsx)("span",{children:"\u2022"}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(ir,{className:"w-3 h-3"})," ",M.birthdate]})]})]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:M.is_approved?(0,b.jsxs)(Me,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 gap-1 px-3 py-1",children:[(0,b.jsx)(Ct,{className:"w-3 h-3"})," Approved"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(O,{size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>tt(M.id),children:(0,b.jsx)(Es,{className:"w-5 h-5"})}),(0,b.jsxs)(O,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white gap-2",onClick:()=>Y(M),children:[(0,b.jsx)(xr,{className:"w-4 h-4"})," Approve"]})]})})]},M.id))})})]})})]}),(0,b.jsx)(Ce,{open:u||f,onOpenChange:M=>{M||(ct(),p(!1))},children:(0,b.jsxs)(ke,{children:[(0,b.jsxs)(Pe,{children:[(0,b.jsx)(Ee,{children:u?"Add New Student":"Edit Student"}),(0,b.jsx)(Ue,{children:u?"Create student record.":"Update details."})]}),(0,b.jsxs)("form",{onSubmit:u?be:Qe,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ue,{children:"Student ID"}),(0,b.jsx)(me,{required:!0,value:T.studentId,onChange:M=>B({...T,studentId:M.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ue,{children:"Section"}),(0,b.jsxs)(La,{value:T.section,onValueChange:M=>B({...T,section:M}),children:[(0,b.jsx)(Oa,{children:(0,b.jsx)(_a,{placeholder:"Select"})}),(0,b.jsx)(Fa,{children:Hf.map(M=>(0,b.jsx)(Ba,{value:M,children:M},M))})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ue,{children:"Full Name"}),(0,b.jsx)(me,{required:!0,value:T.fullName,onChange:M=>B({...T,fullName:M.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ue,{children:"Email"}),(0,b.jsx)(me,{required:!0,type:"email",value:T.email,onChange:M=>B({...T,email:M.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ue,{children:"Birthdate"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(ir,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),(0,b.jsx)(me,{required:!0,type:"date",className:"pl-10",value:T.birthdate,onChange:M=>se(M.target.value)})]})]}),u&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ue,{children:"Initial Password (Auto-Generated)"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(me,{disabled:!0,value:T.password,type:oe?"text":"password",className:"bg-gray-100 dark:bg-gray-800 font-mono pr-10"}),(0,b.jsx)("button",{type:"button",onClick:()=>w(!oe),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:oe?(0,b.jsx)(Cr,{className:"w-4 h-4"}):(0,b.jsx)(Qt,{className:"w-4 h-4"})})]}),(0,b.jsx)(O,{type:"button",variant:"outline",size:"icon",onClick:()=>rt(T.password),children:(0,b.jsx)(wr,{className:"w-4 h-4"})})]})]}),(0,b.jsx)(Be,{className:"mt-4",children:(0,b.jsx)(O,{type:"submit",disabled:X,children:X?(0,b.jsx)(Fe,{className:"animate-spin"}):u?"Create Record":"Save Changes"})})]})]})}),(0,b.jsx)(Ce,{open:m,onOpenChange:g,children:(0,b.jsxs)(ke,{children:[(0,b.jsxs)(Pe,{children:[(0,b.jsx)(Ee,{children:"Delete Student?"}),(0,b.jsx)(Ue,{children:"This action cannot be undone."})]}),(0,b.jsxs)(Be,{children:[(0,b.jsx)(O,{variant:"ghost",onClick:()=>g(!1),children:"Cancel"}),(0,b.jsx)(O,{variant:"destructive",onClick:De,disabled:X,children:"Delete"})]})]})}),(0,b.jsx)(Ce,{open:y,onOpenChange:v,children:(0,b.jsxs)(ke,{className:"sm:max-w-[425px]",children:[(0,b.jsxs)(Pe,{children:[(0,b.jsxs)(Ee,{className:"flex items-center gap-2 text-red-600",children:[(0,b.jsx)(Zn,{className:"w-5 h-5"})," Reject Request?"]}),(0,b.jsx)(Ue,{children:"This will permanently delete the account request."})]}),(0,b.jsxs)(Be,{className:"mt-4",children:[(0,b.jsx)(O,{variant:"ghost",onClick:()=>v(!1),children:"Cancel"}),(0,b.jsx)(O,{variant:"destructive",onClick:ze,disabled:X,children:X?(0,b.jsx)(Fe,{className:"animate-spin h-4 w-4"}):"Confirm Rejection"})]})]})})]})}var ft=D(J(),1);var E=D(U(),1);function Qc(){let[e,t]=(0,ft.useState)([]),[r,a]=(0,ft.useState)(!0),[o,n]=(0,ft.useState)(""),[s,i]=(0,ft.useState)(!1),[c,l]=(0,ft.useState)(!1),[u,d]=(0,ft.useState)(!1),[f,p]=(0,ft.useState)(null),[m,g]=(0,ft.useState)({employeeId:"",fullName:"",email:"",birthdate:"",password:""}),[y,v]=(0,ft.useState)(!1),[N,k]=(0,ft.useState)(!1),I=async()=>{a(!0);let{data:w,error:L}=await ee.from("users").select("*").eq("role","instructor").order("student_id",{ascending:!0});L?(console.error("Error fetching instructors:",L),H.error("Failed to load instructors.")):t(w||[]),a(!1)};(0,ft.useEffect)(()=>{I()},[]);let x=w=>{let L=w?`Prof${w}`:"";g(se=>({...se,birthdate:w,password:L}))},_=async w=>{w.preventDefault(),v(!0);try{let{error:L}=await ee.from("users").insert([{student_id:m.employeeId,display_name:m.fullName,email:m.email,section:"CSIT",birthdate:m.birthdate,role:"instructor"}]);if(L)throw L;H.success((0,E.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,E.jsx)("span",{className:"font-bold",children:"Instructor Added!"}),(0,E.jsxs)("span",{className:"text-xs",children:["Password: ",(0,E.jsx)("span",{className:"font-mono",children:m.password})]})]})),i(!1),I()}catch(L){console.error(L),H.error("Failed to create: "+L.message)}finally{v(!1)}},S=async w=>{if(w.preventDefault(),!!f){v(!0);try{let{error:L}=await ee.from("users").update({student_id:m.employeeId,display_name:m.fullName,email:m.email,section:"CSIT",birthdate:m.birthdate}).eq("id",f.id);if(L)throw L;H.success("Instructor updated"),l(!1),I()}catch(L){H.error("Update failed: "+L.message)}finally{v(!1)}}},T=async()=>{if(f){v(!0);try{let{error:w}=await ee.from("users").delete().eq("id",f.id);if(w)throw w;H.success("Instructor deleted"),d(!1),I()}catch(w){H.error("Delete failed: "+w.message)}finally{v(!1)}}},B=w=>{navigator.clipboard.writeText(w),H.success("Password copied")},X=()=>{g({employeeId:"",fullName:"",email:"",birthdate:"",password:""}),i(!0)},j=w=>{p(w),g({employeeId:w.student_id,fullName:w.display_name,email:w.email,birthdate:w.birthdate||"",password:""}),l(!0)},oe=e.filter(w=>w.display_name?.toLowerCase().includes(o.toLowerCase())||w.student_id?.toLowerCase().includes(o.toLowerCase()));return(0,E.jsxs)("div",{className:"space-y-6",children:[(0,E.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,E.jsxs)("div",{children:[(0,E.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,E.jsx)(rs,{className:"w-8 h-8 text-indigo-500"}),"Instructor Management"]}),(0,E.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage CSIT faculty accounts."})]}),(0,E.jsxs)("div",{className:"flex gap-2",children:[(0,E.jsxs)(O,{variant:"outline",onClick:I,disabled:r,children:[(0,E.jsx)(Sr,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`})," ","Refresh"]}),(0,E.jsxs)(O,{onClick:X,className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,E.jsx)(It,{className:"w-4 h-4 mr-2"})," Add Instructor"]})]})]}),(0,E.jsxs)(ie,{className:"border-gray-200 dark:border-gray-800",children:[(0,E.jsx)(ye,{children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsx)(xe,{children:"Faculty Directory (CSIT)"}),(0,E.jsxs)("div",{className:"relative w-64",children:[(0,E.jsx)(Zt,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,E.jsx)(me,{placeholder:"Search name, ID...",className:"pl-8 bg-gray-50 dark:bg-gray-900",value:o,onChange:w=>n(w.target.value)})]})]})}),(0,E.jsx)(ge,{children:(0,E.jsx)("div",{className:"rounded-md border border-gray-200 dark:border-gray-800 overflow-hidden",children:(0,E.jsx)("div",{className:"overflow-x-auto",children:(0,E.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,E.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700",children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("th",{className:"px-4 py-3",children:"Employee ID"}),(0,E.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,E.jsx)("th",{className:"px-4 py-3",children:"Email"}),(0,E.jsx)("th",{className:"px-4 py-3",children:"Birthdate"}),(0,E.jsx)("th",{className:"px-4 py-3",children:"Status"}),(0,E.jsx)("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),(0,E.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800 bg-white dark:bg-gray-900",children:r?(0,E.jsx)("tr",{children:(0,E.jsx)("td",{colSpan:6,className:"p-4 text-center text-gray-500",children:"Loading..."})}):oe.length===0?(0,E.jsx)("tr",{children:(0,E.jsx)("td",{colSpan:6,className:"p-4 text-center text-gray-500",children:"No instructors found."})}):oe.map(w=>(0,E.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[(0,E.jsx)("td",{className:"px-4 py-3 font-mono text-gray-600 dark:text-gray-400",children:w.student_id}),(0,E.jsx)("td",{className:"px-4 py-3 font-bold text-gray-900 dark:text-white",children:w.display_name}),(0,E.jsx)("td",{className:"px-4 py-3 text-gray-500",children:w.email}),(0,E.jsx)("td",{className:"px-4 py-3 text-gray-500",children:w.birthdate||"-"}),(0,E.jsx)("td",{className:"px-4 py-3",children:w.google_bound?(0,E.jsx)(Me,{className:"bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/30 dark:text-green-400",children:"Verified"}):(0,E.jsx)(Me,{variant:"secondary",className:"text-gray-500",children:"Pending"})}),(0,E.jsx)("td",{className:"px-4 py-3 text-right",children:(0,E.jsxs)(xt,{children:[(0,E.jsx)(wt,{asChild:!0,children:(0,E.jsx)(O,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,E.jsx)(kr,{className:"h-4 w-4"})})}),(0,E.jsxs)(mt,{align:"end",children:[(0,E.jsxs)(qe,{onClick:()=>j(w),children:[(0,E.jsx)(Rr,{className:"mr-2 h-4 w-4"})," Edit"]}),(0,E.jsxs)(qe,{className:"text-red-600",onClick:()=>{p(w),d(!0)},children:[(0,E.jsx)(Pr,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},w.id))})]})})})})]}),(0,E.jsx)(Ce,{open:s||c,onOpenChange:w=>{w||(i(!1),l(!1))},children:(0,E.jsxs)(ke,{children:[(0,E.jsxs)(Pe,{children:[(0,E.jsx)(Ee,{children:s?"Add Instructor":"Edit Instructor"}),(0,E.jsx)(Ue,{children:s?"Create faculty account.":"Update details."})]}),(0,E.jsxs)("form",{onSubmit:s?_:S,className:"space-y-4",children:[(0,E.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(ue,{children:"Employee ID"}),(0,E.jsx)(me,{required:!0,value:m.employeeId,onChange:w=>g({...m,employeeId:w.target.value})})]}),(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(ue,{children:"Birthdate"}),(0,E.jsxs)("div",{className:"relative",children:[(0,E.jsx)(ir,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),(0,E.jsx)(me,{required:!0,type:"date",className:"pl-10",value:m.birthdate,onChange:w=>x(w.target.value)})]})]})]}),(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(ue,{children:"Full Name"}),(0,E.jsx)(me,{required:!0,value:m.fullName,onChange:w=>g({...m,fullName:w.target.value})})]}),(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(ue,{children:"Email"}),(0,E.jsx)(me,{required:!0,type:"email",value:m.email,onChange:w=>g({...m,email:w.target.value})})]}),s&&(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)(ue,{children:"Initial Password (Auto-Generated)"}),(0,E.jsxs)("div",{className:"flex gap-2",children:[(0,E.jsxs)("div",{className:"relative flex-1",children:[(0,E.jsx)(me,{disabled:!0,value:m.password,type:N?"text":"password",className:"bg-gray-100 dark:bg-gray-800 font-mono pr-10"}),(0,E.jsx)("button",{type:"button",onClick:()=>k(!N),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:N?(0,E.jsx)(Cr,{className:"w-4 h-4"}):(0,E.jsx)(Qt,{className:"w-4 h-4"})})]}),(0,E.jsx)(O,{type:"button",variant:"outline",size:"icon",onClick:()=>B(m.password),children:(0,E.jsx)(wr,{className:"w-4 h-4"})})]}),(0,E.jsxs)("p",{className:"text-[10px] text-muted-foreground",children:["Format: ",(0,E.jsx)("span",{className:"font-mono",children:"ProfYYYY-MM-DD"})]})]}),(0,E.jsx)(Be,{className:"mt-4",children:(0,E.jsx)(O,{type:"submit",disabled:y,children:y?(0,E.jsx)(Fe,{className:"animate-spin"}):s?"Create Instructor":"Save Changes"})})]})]})}),(0,E.jsx)(Ce,{open:u,onOpenChange:d,children:(0,E.jsxs)(ke,{children:[(0,E.jsxs)(Pe,{children:[(0,E.jsx)(Ee,{children:"Delete Instructor?"}),(0,E.jsx)(Ue,{children:"This action cannot be undone."})]}),(0,E.jsxs)(Be,{children:[(0,E.jsx)(O,{variant:"ghost",onClick:()=>d(!1),children:"Cancel"}),(0,E.jsx)(O,{variant:"destructive",onClick:T,disabled:y,children:"Delete"})]})]})})]})}var pt=D(J(),1);var P=D(U(),1);function Zc(){let[e,t]=(0,pt.useState)([]),[r,a]=(0,pt.useState)(!0),[o,n]=(0,pt.useState)(""),[s,i]=(0,pt.useState)(!1),[c,l]=(0,pt.useState)(!1),[u,d]=(0,pt.useState)(!1),[f,p]=(0,pt.useState)(null),[m,g]=(0,pt.useState)({adminId:"",fullName:"",email:"",birthdate:"",password:""}),[y,v]=(0,pt.useState)(!1),[N,k]=(0,pt.useState)(!1),I=async()=>{a(!0);let{data:w,error:L}=await ee.from("users").select("*").in("role",["admin","superadmin"]).order("student_id",{ascending:!0});L?(console.error("Error fetching admins:",L),H.error("Failed to load admins.")):t(w||[]),a(!1)};(0,pt.useEffect)(()=>{I()},[]);let x=w=>{let L=w?`Adm${w}`:"";g(se=>({...se,birthdate:w,password:L}))},_=async w=>{w.preventDefault(),v(!0);try{let{error:L}=await ee.from("users").insert([{student_id:m.adminId,display_name:m.fullName,email:m.email,section:"Admin",birthdate:m.birthdate,role:"admin"}]);if(L)throw L;H.success((0,P.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,P.jsx)("span",{className:"font-bold",children:"Admin Account Created!"}),(0,P.jsxs)("span",{className:"text-xs",children:["Password: ",(0,P.jsx)("span",{className:"font-mono",children:m.password})]})]})),i(!1),I()}catch(L){console.error(L),H.error("Failed to create: "+L.message)}finally{v(!1)}},S=async w=>{if(w.preventDefault(),!!f){v(!0);try{let{error:L}=await ee.from("users").update({student_id:m.adminId,display_name:m.fullName,email:m.email,section:"Admin",birthdate:m.birthdate}).eq("id",f.id);if(L)throw L;H.success("Admin updated"),l(!1),I()}catch(L){H.error("Update failed: "+L.message)}finally{v(!1)}}},T=async()=>{if(f){if(f.role==="superadmin"){H.error("Cannot delete Superadmin accounts.");return}v(!0);try{let{error:w}=await ee.from("users").delete().eq("id",f.id);if(w)throw w;H.success("Admin deleted"),d(!1),I()}catch(w){H.error("Delete failed: "+w.message)}finally{v(!1)}}},B=w=>{navigator.clipboard.writeText(w),H.success("Password copied")},X=()=>{g({adminId:"",fullName:"",email:"",birthdate:"",password:""}),i(!0)},j=w=>{p(w),g({adminId:w.student_id,fullName:w.display_name,email:w.email,birthdate:w.birthdate||"",password:""}),l(!0)},oe=e.filter(w=>w.display_name?.toLowerCase().includes(o.toLowerCase())||w.student_id?.toLowerCase().includes(o.toLowerCase()));return(0,P.jsxs)("div",{className:"space-y-6",children:[(0,P.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,P.jsx)(Ns,{className:"w-8 h-8 text-indigo-500"}),"Admin Management"]}),(0,P.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage administrator accounts."})]}),(0,P.jsxs)("div",{className:"flex gap-2",children:[(0,P.jsxs)(O,{variant:"outline",onClick:I,disabled:r,children:[(0,P.jsx)(Sr,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`})," ","Refresh"]}),(0,P.jsxs)(O,{onClick:X,className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,P.jsx)(It,{className:"w-4 h-4 mr-2"})," Add Admin"]})]})]}),(0,P.jsxs)(ie,{className:"border-gray-200 dark:border-gray-800",children:[(0,P.jsx)(ye,{children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsx)(xe,{children:"Admin Directory"}),(0,P.jsxs)("div",{className:"relative w-64",children:[(0,P.jsx)(Zt,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,P.jsx)(me,{placeholder:"Search name, ID...",className:"pl-8 bg-gray-50 dark:bg-gray-900",value:o,onChange:w=>n(w.target.value)})]})]})}),(0,P.jsx)(ge,{children:(0,P.jsx)("div",{className:"rounded-md border border-gray-200 dark:border-gray-800 overflow-hidden",children:(0,P.jsx)("div",{className:"overflow-x-auto",children:(0,P.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,P.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700",children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{className:"px-4 py-3",children:"Admin ID"}),(0,P.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,P.jsx)("th",{className:"px-4 py-3",children:"Email"}),(0,P.jsx)("th",{className:"px-4 py-3",children:"Role"}),(0,P.jsx)("th",{className:"px-4 py-3",children:"Birthdate"}),(0,P.jsx)("th",{className:"px-4 py-3",children:"Status"}),(0,P.jsx)("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),(0,P.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800 bg-white dark:bg-gray-900",children:r?(0,P.jsx)("tr",{children:(0,P.jsx)("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Loading..."})}):oe.length===0?(0,P.jsx)("tr",{children:(0,P.jsx)("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"No admins found."})}):oe.map(w=>(0,P.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[(0,P.jsx)("td",{className:"px-4 py-3 font-mono text-gray-600 dark:text-gray-400",children:w.student_id}),(0,P.jsx)("td",{className:"px-4 py-3 font-bold text-gray-900 dark:text-white",children:w.display_name}),(0,P.jsx)("td",{className:"px-4 py-3 text-gray-500",children:w.email}),(0,P.jsx)("td",{className:"px-4 py-3",children:w.role==="superadmin"?(0,P.jsx)(Me,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-400 border-yellow-200",children:"Superadmin"}):(0,P.jsx)(Me,{variant:"outline",className:"bg-gray-100 text-gray-700 border-gray-200 dark:bg-gray-800 dark:text-gray-300",children:"Admin"})}),(0,P.jsx)("td",{className:"px-4 py-3 text-gray-500",children:w.birthdate||"-"}),(0,P.jsx)("td",{className:"px-4 py-3",children:w.google_bound?(0,P.jsx)(Me,{className:"bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/30 dark:text-green-400",children:"Verified"}):(0,P.jsx)(Me,{variant:"secondary",className:"text-gray-500",children:"Pending"})}),(0,P.jsx)("td",{className:"px-4 py-3 text-right",children:(0,P.jsxs)(xt,{children:[(0,P.jsx)(wt,{asChild:!0,children:(0,P.jsx)(O,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,P.jsx)(kr,{className:"h-4 w-4"})})}),(0,P.jsxs)(mt,{align:"end",children:[(0,P.jsxs)(qe,{onClick:()=>j(w),children:[(0,P.jsx)(Rr,{className:"mr-2 h-4 w-4"})," Edit"]}),w.role!=="superadmin"&&(0,P.jsxs)(qe,{className:"text-red-600",onClick:()=>{p(w),d(!0)},children:[(0,P.jsx)(Pr,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},w.id))})]})})})})]}),(0,P.jsx)(Ce,{open:s||c,onOpenChange:w=>{w||(i(!1),l(!1))},children:(0,P.jsxs)(ke,{children:[(0,P.jsxs)(Pe,{children:[(0,P.jsx)(Ee,{children:s?"Add Admin":"Edit Admin"}),(0,P.jsx)(Ue,{children:s?"Create administrator account.":"Update details."})]}),(0,P.jsxs)("form",{onSubmit:s?_:S,className:"space-y-4",children:[(0,P.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)(ue,{children:"Admin ID"}),(0,P.jsx)(me,{required:!0,value:m.adminId,onChange:w=>g({...m,adminId:w.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)(ue,{children:"Birthdate"}),(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)(ir,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),(0,P.jsx)(me,{required:!0,type:"date",className:"pl-10",value:m.birthdate,onChange:w=>x(w.target.value)})]})]})]}),(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)(ue,{children:"Full Name"}),(0,P.jsx)(me,{required:!0,value:m.fullName,onChange:w=>g({...m,fullName:w.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)(ue,{children:"Email"}),(0,P.jsx)(me,{required:!0,type:"email",value:m.email,onChange:w=>g({...m,email:w.target.value})})]}),s&&(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)(ue,{children:"Initial Password (Auto-Generated)"}),(0,P.jsxs)("div",{className:"flex gap-2",children:[(0,P.jsxs)("div",{className:"relative flex-1",children:[(0,P.jsx)(me,{disabled:!0,value:m.password,type:N?"text":"password",className:"bg-gray-100 dark:bg-gray-800 font-mono pr-10"}),(0,P.jsx)("button",{type:"button",onClick:()=>k(!N),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:N?(0,P.jsx)(Cr,{className:"w-4 h-4"}):(0,P.jsx)(Qt,{className:"w-4 h-4"})})]}),(0,P.jsx)(O,{type:"button",variant:"outline",size:"icon",onClick:()=>B(m.password),children:(0,P.jsx)(wr,{className:"w-4 h-4"})})]}),(0,P.jsxs)("p",{className:"text-[10px] text-muted-foreground",children:["Format: ",(0,P.jsx)("span",{className:"font-mono",children:"AdmYYYY-MM-DD"})]})]}),(0,P.jsx)(Be,{className:"mt-4",children:(0,P.jsx)(O,{type:"submit",disabled:y,children:y?(0,P.jsx)(Fe,{className:"animate-spin"}):s?"Create Admin":"Save Changes"})})]})]})}),(0,P.jsx)(Ce,{open:u,onOpenChange:d,children:(0,P.jsxs)(ke,{children:[(0,P.jsxs)(Pe,{children:[(0,P.jsx)(Ee,{children:"Delete Admin?"}),(0,P.jsx)(Ue,{children:"This action cannot be undone."})]}),(0,P.jsxs)(Be,{children:[(0,P.jsx)(O,{variant:"ghost",onClick:()=>d(!1),children:"Cancel"}),(0,P.jsx)(O,{variant:"destructive",onClick:T,disabled:y,children:"Delete"})]})]})})]})}var hr=D(J(),1);var K=D(U(),1),zf=["All Sections","BSIT-1A","BSIT-1B","BSCS-1A","BSIS","BSAIS","ACT"];function Jc(){let[e,t]=(0,hr.useState)([]),[r,a]=(0,hr.useState)(!0),[o,n]=(0,hr.useState)(""),[s,i]=(0,hr.useState)("All Sections");(0,hr.useEffect)(()=>{c()},[]);let c=async()=>{a(!0);let{data:d,error:f}=await ee.from("users").select("*").eq("role","user").order("display_name");if(f)H.error("Failed to load reports");else{let p=d.map(m=>({...m,adventure_progress:m.settings?.adventure_progress||Math.floor(Math.random()*100),mp_wins:m.stats?.mp_wins||Math.floor(Math.random()*20),challenge_stars:m.stats?.stars||Math.floor(Math.random()*15)}));t(p||[])}a(!1)},l=()=>{let d=u.map(f=>({"Student ID":f.student_id,Name:f.display_name,Section:f.section,Level:Math.floor((f.xp||0)/1e3)+1,"Total XP":f.xp||0,"Adventure Progress (%)":`${f.adventure_progress}%`,"Multiplayer Wins":f.mp_wins,"Challenge Stars":f.challenge_stars,"Joined Date":new Date(f.created_at).toLocaleDateString()}));qa(d,`Student_Report_${s.replace(" ","_")}`),H.success("Report downloaded successfully")},u=e.filter(d=>{let f=d.display_name?.toLowerCase().includes(o.toLowerCase())||d.student_id?.toLowerCase().includes(o.toLowerCase()),p=s==="All Sections"||d.section===s;return f&&p});return(0,K.jsxs)(ie,{className:"border-gray-200 dark:border-gray-800",children:[(0,K.jsxs)(ye,{children:[(0,K.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,K.jsx)(xe,{children:"Student Progress Report"}),(0,K.jsx)("div",{className:"flex gap-2",children:(0,K.jsxs)(O,{variant:"outline",onClick:l,disabled:r||u.length===0,children:[(0,K.jsx)(ua,{className:"w-4 h-4 mr-2"})," Export CSV"]})})]}),(0,K.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mt-4",children:[(0,K.jsxs)("div",{className:"relative flex-1",children:[(0,K.jsx)(Zt,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,K.jsx)(me,{placeholder:"Search student name or ID...",className:"pl-8",value:o,onChange:d=>n(d.target.value)})]}),(0,K.jsx)("div",{className:"w-full md:w-48",children:(0,K.jsxs)(La,{value:s,onValueChange:i,children:[(0,K.jsxs)(Oa,{children:[(0,K.jsx)(ma,{className:"w-4 h-4 mr-2 text-gray-400"}),(0,K.jsx)(_a,{placeholder:"Filter Section"})]}),(0,K.jsx)(Fa,{children:zf.map(d=>(0,K.jsx)(Ba,{value:d,children:d},d))})]})})]})]}),(0,K.jsx)(ge,{children:(0,K.jsx)("div",{className:"rounded-md border border-gray-200 dark:border-gray-800 overflow-hidden",children:(0,K.jsx)("div",{className:"overflow-x-auto",children:(0,K.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,K.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800 font-medium text-gray-700 dark:text-gray-300",children:(0,K.jsxs)("tr",{children:[(0,K.jsx)("th",{className:"p-3",children:"Student"}),(0,K.jsx)("th",{className:"p-3",children:"Level / XP"}),(0,K.jsx)("th",{className:"p-3",children:"Adventure"}),(0,K.jsx)("th",{className:"p-3",children:"Multiplayer"}),(0,K.jsx)("th",{className:"p-3",children:"Challenges"})]})}),(0,K.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800 bg-white dark:bg-gray-900",children:r?(0,K.jsx)("tr",{children:(0,K.jsx)("td",{colSpan:5,className:"p-8 text-center",children:(0,K.jsx)(Fe,{className:"animate-spin mx-auto"})})}):u.length===0?(0,K.jsx)("tr",{children:(0,K.jsx)("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"No records found."})}):u.map(d=>(0,K.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[(0,K.jsxs)("td",{className:"p-3",children:[(0,K.jsx)("div",{className:"font-bold text-gray-900 dark:text-white",children:d.display_name}),(0,K.jsxs)("div",{className:"text-xs text-gray-500",children:[d.student_id," \u2022 ",d.section]})]}),(0,K.jsxs)("td",{className:"p-3",children:[(0,K.jsxs)("div",{className:"font-mono text-indigo-600 dark:text-indigo-400 font-bold",children:["Lvl ",Math.floor((d.xp||0)/1e3)+1]}),(0,K.jsxs)("div",{className:"text-xs text-gray-500",children:[d.xp?.toLocaleString()," XP"]})]}),(0,K.jsx)("td",{className:"p-3",children:(0,K.jsxs)("div",{className:"flex items-center gap-2",children:[(0,K.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 max-w-[80px]",children:(0,K.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${d.adventure_progress}%`}})}),(0,K.jsxs)("span",{className:"text-xs",children:[d.adventure_progress,"%"]})]})}),(0,K.jsx)("td",{className:"p-3",children:(0,K.jsxs)(Me,{variant:"outline",className:"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300",children:[d.mp_wins," Wins"]})}),(0,K.jsx)("td",{className:"p-3",children:(0,K.jsxs)("div",{className:"flex items-center gap-1 text-yellow-600 dark:text-yellow-500 font-medium",children:["\u2605 ",d.challenge_stars]})})]},d.id))})]})})})})]})}var Le=D(U(),1);var Gf={"user-management":["superadmin","admin","instructor"],"student-management":["superadmin","admin","instructor"],"instructor-management":["superadmin","admin"],"admin-management":["superadmin"],"user-reports":["superadmin","admin","instructor"]};function td({activeTab:e,user:t,onSaveAvatar:r,onStartMultiplayerQuiz:a,onJoinMultiplayerQuiz:o}){return(0,ed.useMemo)(()=>{let s=Gf[e];return s?s.includes(t?.role||"user"):!0},[e,t])?(0,Le.jsxs)("div",{className:"w-full h-full relative fade-in-animation",children:[e==="home"&&(0,Le.jsx)(Pi,{onTabChange:s=>{}}),e==="play"&&(0,Le.jsx)(Mi,{}),e==="leaderboard"&&(0,Le.jsx)(vc,{}),e==="quest"&&(0,Le.jsx)(bc,{}),e==="streak"&&(0,Le.jsx)(Cc,{}),e==="store"&&(0,Le.jsx)(Kc,{}),e==="profile"&&(0,Le.jsx)(Yc,{user:t,onSaveAvatar:r}),e==="settings"&&(0,Le.jsx)(Ic,{}),e==="about"&&(0,Le.jsx)(Ac,{}),e==="student-management"&&(0,Le.jsx)(qc,{}),e==="instructor-management"&&(0,Le.jsx)(Qc,{}),e==="admin-management"&&(0,Le.jsx)(Zc,{}),e==="user-reports"&&(0,Le.jsx)(Jc,{})]}):(0,Le.jsxs)("div",{className:"flex flex-col items-center justify-center h-[50vh] text-center space-y-4",children:[(0,Le.jsx)("div",{className:"p-4 bg-red-100 text-red-600 rounded-full",children:(0,Le.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Le.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Le.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Access Denied"}),(0,Le.jsxs)("p",{className:"text-gray-500 max-w-sm",children:["You do not have permission to view the ",(0,Le.jsx)("strong",{children:e})," ","module. Please contact your administrator."]})]})}var od=D(J(),1);var Pt=D(J(),1);var lt=5,Hr=20*60*1e3,yo=250;function rd(e){let[t,r]=(0,Pt.useState)(e?.hearts??lt),[a,o]=(0,Pt.useState)(!1),[n,s]=(0,Pt.useState)(null),[i,c]=(0,Pt.useState)("");(0,Pt.useEffect)(()=>{if(!e)return;(async()=>{let{data:f}=await ee.from("users").select("hearts, last_heart_regen").eq("id",e.uid).single();if(!f)return;let p=f.hearts;p===0&&o(!0);let m=new Date(f.last_heart_regen).getTime(),g=Date.now();if(p<lt){let y=g-m,v=Math.floor(y/Hr);if(v>0){let N=Math.min(lt,p+v),k=y%Hr,I=new Date(g-k).toISOString();await ee.from("users").update({hearts:N,last_heart_regen:I}).eq("id",e.uid),r(N),N>0&&o(!1),N<lt?s(g+(Hr-k)):s(null)}else r(p),s(m+Hr)}else r(lt),s(null)})()},[e?.uid]),(0,Pt.useEffect)(()=>{if(t>=lt){c("");return}let d=setInterval(()=>{if(!n)return;let f=Date.now(),p=n-f;if(p<=0)r(m=>{let g=Math.min(lt,m+1);return g>0&&o(!1),g<lt?(s(Date.now()+Hr),ee.from("users").update({hearts:g,last_heart_regen:new Date().toISOString()}).eq("id",e?.uid).then()):(ee.from("users").update({hearts:g}).eq("id",e?.uid).then(),s(null)),g});else{let m=Math.floor(p/6e4),g=Math.floor(p%6e4/1e3);c(`${m}:${g.toString().padStart(2,"0")}`)}},1e3);return()=>clearInterval(d)},[t,n,e?.uid]);let l=(0,Pt.useCallback)(async()=>{if(!e)return!1;let d=!1;return r(f=>{if(f>0){let p=f-1;if(f===lt){let m=new Date().toISOString();s(Date.now()+Hr),ee.from("users").update({hearts:p,last_heart_regen:m}).eq("id",e.uid).then()}else ee.from("users").update({hearts:p}).eq("id",e.uid).then();return p===0&&(d=!0,o(!0)),p}return 0}),d},[e]),u=(0,Pt.useCallback)(async()=>{if(e)if(e.coins&&e.coins>=yo){let d=e.coins-yo;r(lt),o(!1),s(null);let{error:f}=await ee.from("users").update({hearts:lt,coins:d}).eq("id",e.uid);f?H.error("Purchase failed."):H.success("Hearts Refilled! \u2764\uFE0F")}else H.error("Not enough coins!")},[e]);return{hearts:t,timeRemaining:i,loseHeart:l,buyHearts:u,isGameOver:a,setIsGameOver:o}}var F=D(U(),1);function ad({icon:e,value:t,color:r}){return(0,F.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 px-3 py-1.5 rounded-full text-lg font-medium transition-transform hover:scale-125 cursor-default",children:[e,(0,F.jsx)("span",{className:`text-gray-900 dark:text-gray-100 ${r||""}`,children:t})]})}function jf({hearts:e,timeRemaining:t,buyHearts:r}){let a=e>=lt;return(0,F.jsxs)(xt,{children:[(0,F.jsx)(wt,{asChild:!0,children:(0,F.jsxs)("button",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 px-3 py-1.5 rounded-full text-lg font-medium transition-transform hover:scale-125 cursor-pointer outline-none focus:ring-2 ring-red-200 dark:ring-red-900",children:[(0,F.jsx)(wa,{className:"h-6 w-6 text-red-500 fill-red-500"}),(0,F.jsx)("span",{className:"text-gray-900 dark:text-gray-100",children:e}),!a&&(0,F.jsx)("span",{className:"text-[10px] text-gray-400 font-mono ml-1",children:t})]})}),(0,F.jsxs)(mt,{align:"end",className:"w-72 p-2",children:[(0,F.jsxs)(oo,{className:"flex items-center justify-between",children:[(0,F.jsx)("span",{children:"Lives"}),(0,F.jsx)(Me,{variant:a?"default":"outline",className:a?"bg-green-500":"text-orange-500 border-orange-500",children:a?"MAX":"REGENERATING"})]}),(0,F.jsx)(sa,{}),(0,F.jsxs)("div",{className:"p-3 bg-secondary/30 rounded-md mb-2 space-y-2",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,F.jsx)("span",{className:"text-muted-foreground",children:"Current Hearts"}),(0,F.jsxs)("span",{className:"font-bold",children:[e," / ",lt]})]}),!a&&(0,F.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,F.jsxs)("span",{className:"text-muted-foreground flex items-center gap-1",children:[(0,F.jsx)(lr,{className:"w-3 h-3"})," Next in"]}),(0,F.jsx)("span",{className:"font-mono font-bold text-orange-500",children:t})]})]}),(0,F.jsxs)(O,{className:"w-full gap-2 font-bold bg-green-500 hover:bg-green-600 text-white",size:"lg",disabled:a,onClick:()=>{a||r()},children:[(0,F.jsx)(dt,{className:"w-4 h-4 fill-white"}),a?"Hearts are Full":`Refill Full (${yo})`]})]})]})}var $f={streaks:0,coins:0,hearts:0};function nd({user:e,sidebarCollapsed:t,onToggleSidebar:r,stats:a=$f,onSwitchTheme:o,onLogout:n}){let[s,i]=(0,od.useState)(!1),{currentLevel:c,progressPercent:l}=Lr(e?.xp||0),{hearts:u,timeRemaining:d,buyHearts:f}=rd(e),p=28,m=32,g=2*Math.PI*p,y=g-l/100*g,v=()=>{i(!1),setTimeout(()=>{document.body.style.pointerEvents="",document.body.style.overflow="",n()},300)};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("header",{className:"border-b bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm sticky top-0 z-10 transition-colors",children:(0,F.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between",children:[(0,F.jsx)("div",{className:"flex-none",children:(0,F.jsx)(O,{variant:"ghost",size:"icon",onClick:r,className:"h-9 w-9",children:t?(0,F.jsx)(bs,{className:"h-5 w-5"}):(0,F.jsx)(hs,{className:"h-5 w-5"})})}),(0,F.jsx)("div",{className:"flex-1 flex justify-center no-scrollbar mx-4",children:(0,F.jsxs)("div",{className:"flex items-center space-x-3 md:space-x-6",children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 bg-yellow-100 dark:bg-yellow-900/30 px-3 py-1.5 rounded-full text-lg font-black text-yellow-600 dark:text-yellow-400 transition-transform hover:scale-125 cursor-default",children:["Lvl ",c]}),(0,F.jsx)("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-700 hidden sm:block"}),(0,F.jsx)(ad,{icon:(0,F.jsx)(er,{className:"h-6 w-5"}),value:a.streaks}),(0,F.jsx)(ad,{icon:(0,F.jsx)(ka,{className:"h-6 w-6"}),value:a.coins}),(0,F.jsx)(jf,{hearts:u,timeRemaining:d,buyHearts:f})]})}),(0,F.jsx)("div",{className:"flex-none",children:(0,F.jsxs)(xt,{children:[(0,F.jsx)(wt,{asChild:!0,children:(0,F.jsxs)("div",{className:"flex items-center space-x-3 cursor-pointer p-1 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group select-none",children:[(0,F.jsxs)("div",{className:"relative flex items-center justify-center w-16 h-16",children:[(0,F.jsxs)("svg",{className:"absolute w-full h-full transform -rotate-90",children:[(0,F.jsx)("circle",{cx:m,cy:m,r:p,fill:"none",className:"stroke-gray-200 dark:stroke-gray-700",strokeWidth:"6"}),(0,F.jsx)("circle",{cx:m,cy:m,r:p,fill:"none",className:"stroke-indigo-500 transition-all duration-1000 ease-out",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:g,strokeDashoffset:y})]}),(0,F.jsx)("div",{className:"h-14 w-14 rounded-full overflow-hidden border-2 border-white dark:border-gray-800 bg-gray-100 dark:bg-gray-800 z-10",children:(0,F.jsx)(Jt,{config:e?.avatarConfig,headOnly:!0})})]}),(0,F.jsxs)("div",{className:"hidden md:block text-left",children:[(0,F.jsx)("p",{className:"text-sm font-bold text-gray-900 dark:text-gray-100 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:e?.displayName||"User"}),(0,F.jsxs)("p",{className:"text-[10px] text-muted-foreground font-mono",children:[Math.floor(l),"% to Lvl ",c+1]})]})]})}),(0,F.jsxs)(mt,{align:"end",className:"w-56",children:[(0,F.jsxs)(oo,{children:["My Account",(0,F.jsx)("span",{className:"ml-2 text-xs font-normal text-muted-foreground bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded capitalize",children:e?.role||"Student"})]}),(0,F.jsx)(sa,{}),(0,F.jsxs)(qe,{onClick:o,className:"cursor-pointer",children:[(0,F.jsx)(ha,{className:"mr-2 h-4 w-4"}),(0,F.jsx)("span",{children:"Switch Theme"})]}),(0,F.jsx)(sa,{}),(0,F.jsxs)(qe,{onSelect:N=>N.preventDefault(),onClick:()=>i(!0),className:"cursor-pointer text-red-600 focus:text-red-600 focus:bg-red-50 dark:focus:bg-red-950/20",children:[(0,F.jsx)(va,{className:"mr-2 h-4 w-4"}),(0,F.jsx)("span",{children:"Logout"})]})]})]})})]})}),(0,F.jsx)(Ce,{open:s,onOpenChange:i,children:(0,F.jsxs)(ke,{children:[(0,F.jsxs)(Pe,{children:[(0,F.jsx)(Ee,{children:"Sign out?"}),(0,F.jsx)(Ue,{children:"Are you sure you want to sign out? You will need to log back in to access your dashboard."})]}),(0,F.jsxs)(Be,{className:"gap-2 sm:gap-0",children:[(0,F.jsx)(O,{variant:"ghost",onClick:()=>i(!1),children:"Cancel"}),(0,F.jsx)(O,{variant:"destructive",onClick:v,className:"bg-red-600 hover:bg-red-700",children:"Sign out"})]})]})})]})}var ce=D(U(),1);async function sd({request:e}){let{data:{session:t}}=await ee.auth.getSession();if(!t)return{user:null};let{data:r,error:a}=await ee.from("users").select("*").eq("id",t.user.id).single();return a||!r?{user:null}:{user:{uid:r.id,email:r.email,studentId:r.student_id,displayName:r.display_name||"Coder",photoURL:r.photo_url,avatarConfig:r.avatar_config,isOnboarded:r.is_onboarded??!1,settings:r.settings,xp:r.xp,level:r.level,streaks:r.streaks,coins:r.coins,hearts:r.hearts,streakFreezes:r.streak_freezes||0,hints:r.hints||0,ownedCosmetics:r.owned_cosmetics||[],inventory:r.inventory||[],trophies:r.trophies,league:r.league,joinedAt:r.joined_at,role:r.role,activeDates:r.active_dates||[],badges:r.badges||[],googleBound:!!r.google_provider_id}}}sd.hydrate=!0;var Vf=({formMethod:e,defaultShouldRevalidate:t})=>e==="GET"?!1:t;function Wf(){return(0,ce.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 transition-colors duration-300",children:[(0,ce.jsxs)("div",{className:"w-64 h-screen border-r border-indigo-100 dark:border-gray-800 bg-white/50 dark:bg-gray-900/50 p-4 space-y-6 hidden md:block backdrop-blur-sm",children:[(0,ce.jsx)(ne,{className:"h-12 w-40 mb-10 bg-indigo-200/50 dark:bg-gray-700"}),(0,ce.jsxs)("div",{className:"space-y-3",children:[(0,ce.jsx)(ne,{className:"h-10 w-full bg-indigo-100 dark:bg-gray-800"}),(0,ce.jsx)(ne,{className:"h-10 w-full bg-indigo-100 dark:bg-gray-800"}),(0,ce.jsx)(ne,{className:"h-10 w-full bg-indigo-100 dark:bg-gray-800"}),(0,ce.jsx)(ne,{className:"h-10 w-full bg-indigo-100 dark:bg-gray-800"})]})]}),(0,ce.jsxs)("div",{className:"flex-1 flex flex-col p-6 space-y-8",children:[(0,ce.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ce.jsxs)("div",{className:"space-y-2",children:[(0,ce.jsx)(ne,{className:"h-8 w-64 bg-indigo-200 dark:bg-gray-700"}),(0,ce.jsx)(ne,{className:"h-4 w-48 bg-indigo-100 dark:bg-gray-800"})]}),(0,ce.jsxs)("div",{className:"flex space-x-3",children:[(0,ce.jsx)(ne,{className:"h-10 w-10 rounded-full bg-indigo-200 dark:bg-gray-700"}),(0,ce.jsx)(ne,{className:"h-10 w-10 rounded-full bg-indigo-200 dark:bg-gray-700"})]})]}),(0,ce.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pt-4",children:[(0,ce.jsx)(ne,{className:"h-48 w-full rounded-3xl bg-white/60 dark:bg-gray-800/60"}),(0,ce.jsx)(ne,{className:"h-48 w-full rounded-3xl bg-white/60 dark:bg-gray-800/60"}),(0,ce.jsx)(ne,{className:"h-48 w-full rounded-3xl bg-white/60 dark:bg-gray-800/60"})]})]})]})}var Xf=()=>[{title:"Dashboard | CodeON"},{name:"description",content:"Your CodeON dashboard"}];function id(){let{user:e}=qn(),{user:t,logout:r,updateProfile:a,syncUser:o}=Ge(),n=yr(),s=(0,Ft.useRef)(!1);(0,Ft.useEffect)(()=>{e&&!s.current&&(JSON.stringify(e)!==JSON.stringify(t)&&(console.log("Syncing fresh loader data..."),o(e)),s.current=!0)},[e,t,o]);let i=t||e;(0,Ft.useEffect)(()=>{i&&i.isOnboarded===!1&&n("/onboarding")},[i,n]);let[c,l]=(0,Ft.useState)("home"),[u,d]=(0,Ft.useState)(!1);(0,Ft.useEffect)(()=>{let k=localStorage.getItem("active_dashboard_tab");k&&l(k)},[]),(0,Ft.useEffect)(()=>{localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]);let f=()=>{let k=document.documentElement.classList.toggle("dark");localStorage.theme=k?"dark":"light"},p=async()=>{try{localStorage.removeItem("active_dashboard_tab"),await r(),n("/login")}catch(k){console.error("Error logging out:",k)}},m=()=>d(!u),g=()=>{let k=Math.random().toString(36).substring(2,8);n(`/multiplayer/${k}`)},y=()=>{let k=prompt("Enter game code:");k&&n(`/multiplayer/${k}`)},v=async k=>{try{await a({avatarConfig:k})}catch(I){console.error("Error saving avatar:",I)}},N=k=>{if(k==="logout"){p();return}l(k),localStorage.setItem("active_dashboard_tab",k)};return i&&i.isOnboarded===!1?null:(0,ce.jsxs)(Ls,{children:[(0,ce.jsx)("style",{children:`
        .scrollbar-hide::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        .scrollbar-hide::-webkit-scrollbar-track {
            background: transparent; 
        }
        .scrollbar-hide::-webkit-scrollbar-thumb {
            background-color: rgba(156, 163, 175, 0.3); /* Gray-400 with opacity */
            border-radius: 9999px;
        }
        .scrollbar-hide::-webkit-scrollbar-thumb:hover {
            background-color: rgba(156, 163, 175, 0.5);
        }
        /* For Firefox */
        .scrollbar-hide {
            scrollbar-width: thin;
            scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
        }
      `}),(0,ce.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 transition-colors duration-300",children:[(0,ce.jsx)("div",{className:`flex-shrink-0 transition-all duration-300 ${u?"w-24":"w-64"} h-screen hidden md:block`,children:(0,ce.jsx)(Qs,{activeTab:c,onTabChange:N,onLogout:p,user:i,collapsed:u})}),(0,ce.jsxs)("div",{className:"flex-1 flex flex-col overflow-y-auto transition-all duration-300 scrollbar-hide",children:[(0,ce.jsx)(nd,{user:i,sidebarCollapsed:u,onToggleSidebar:m,stats:{streaks:i?.streaks||0,coins:i?.coins||0,hearts:i?.hearts||5},onSwitchTheme:f,onLogout:p}),(0,ce.jsx)("main",{className:"p-4 md:p-6 z-0",children:(0,ce.jsx)(td,{activeTab:c,user:i,onSaveAvatar:v,onStartMultiplayerQuiz:g,onJoinMultiplayerQuiz:y})})]})]})]})}export{Wf as HydrateFallback,sd as clientLoader,id as default,Xf as meta,Vf as shouldRevalidate};
