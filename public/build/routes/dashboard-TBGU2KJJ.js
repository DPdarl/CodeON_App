import{a as Dt,b as J,c as ts,d as as}from"/build/_shared/chunk-UJTUMZYS.js";import{a as Tt,b as Ba,c as _a,d as _t,e as gt,f as Nr,g as Oa,h as Fa,i as Ua,j as rs,k as os,l as ss,m as ns,n as Ha,o as za,p as is,q as ls,r as ds,s as cs,t as ms}from"/build/_shared/chunk-7EZOGZHQ.js";import{a as $o,b as Ra,c as Pa,d as La,e as Ea,f as Ia}from"/build/_shared/chunk-QMFEEREC.js";import{a as se,b as ne}from"/build/_shared/chunk-3MHCBXV7.js";import{a as Vo,b as Go,c as Yo,d as qo,e as vr,f as Xo,g as Qo,h as Ge,i as Ye,j as qe,k as _e,l as xr,m as Aa,n as Ma,o as Wo,p as Ko,q as Zo,r as wr,s as Jo,t as es}from"/build/_shared/chunk-IMR44MIP.js";import{a as fe,b as be,c as ve,d as Se,e as xe,f as De}from"/build/_shared/chunk-26W54DZ2.js";import{b as K}from"/build/_shared/chunk-DOHUNQ66.js";import{a as $}from"/build/_shared/chunk-VYNOGOUD.js";import{b as Da,d as Ho,i as yr,j as zo,k as jo,r as Ta}from"/build/_shared/chunk-I2HGCWKY.js";import{a as St}from"/build/_shared/chunk-P4C7VRR7.js";import{e as Z,g as Le}from"/build/_shared/chunk-5MKVG6TO.js";import{a as ye}from"/build/_shared/chunk-E22BWNYG.js";import{a as ee,b as ge,c as pe,d as ut,e as de,f as Sa}from"/build/_shared/chunk-XO4VTVTY.js";import{$ as Qt,A as ho,Aa as Jt,B as qt,Ba as ot,Ca as Bo,D as ba,Da as _o,E as Xt,Ea as Oo,F as kt,Fa as Ca,G as ha,H as ya,Ha as Fo,I as yo,J as va,Ja as He,K as vo,Ka as Uo,La as sa,M as xo,N as xa,P as wo,Pa as W,Q as No,Qa as E,R as Ce,S as at,T as wa,W as pr,X as ko,Y as Co,Z as Na,_ as So,a as io,aa as Do,b as lo,ba as To,c as co,ca as Wt,d as wt,e as At,ea as Ro,f as mo,fa as rt,ga as Po,ha as Kt,j as uo,ja as Ct,k as go,ka as Lo,l as po,m as Mt,ma as Eo,n as Nt,na as fr,o as Gt,p as ct,pa as Io,q as gr,ra as oa,sa as Zt,u as Bt,ua as Ao,v as mt,va as Mo,wa as br,x as fo,y as bo,ya as ka,z as Yt,za as hr}from"/build/_shared/chunk-444ASF66.js";import{a as oe,b as qn,c as Vt,j as no,m as V}from"/build/_shared/chunk-UYURHTCR.js";import{e as L}from"/build/_shared/chunk-ADMCF34Z.js";var it=L(oe(),1);var Ot=L(oe(),1);var ae=L(V(),1);function us({activeTab:e,onTabChange:t,onLogout:a,user:r,collapsed:o=!1}){let[n,s]=(0,Ot.useState)(!1),[i,l]=(0,Ot.useState)(!1),d=(0,Ot.useRef)(null),p=["superadmin","admin","instructor","user"],m=["superadmin","admin","instructor"],c=[{id:"home",label:"Home",icon:ns,roles:p},{id:"play",label:"Play",icon:Ha,roles:p},{id:"leaderboard",label:"Leaderboard",icon:Oa,roles:p},{id:"quest",label:"Quests",icon:za,roles:p},{id:"streak",label:"Streak",icon:Tt,roles:p},{id:"store",label:"Store",icon:Ua,roles:p},{id:"student-management",label:"Students",icon:is,roles:m},{id:"instructor-management",label:"Instructors",icon:Bo,roles:["superadmin","admin"]},{id:"admin-management",label:"Admins",icon:ds,roles:["superadmin"]},{id:"user-reports",label:"Reports",icon:cs,roles:m},{id:"profile",label:"Profile",icon:ls,roles:p},{id:"more",label:"More",icon:So,hasDropdown:!0,roles:p}],w=r?.role||"user",S=c.filter(y=>y.roles.includes(w)),b=[{id:"settings",label:"Settings",icon:Lo},{id:"about",label:"About",icon:xa},{id:"logout-trigger",label:"Logout",icon:wa}];(0,Ot.useEffect)(()=>{let y=B=>{d.current&&!d.current.contains(B.target)&&s(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);let k=()=>{s(!n)},T=y=>{y.id==="logout-trigger"?l(!0):t(y.id),s(!1)},_=()=>{l(!1),setTimeout(()=>{a()},100)};return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("div",{className:`bg-white dark:bg-gray-900 border-r shadow-sm flex flex-col h-full transition-all duration-300 ${o?"w-24":"w-64"}`,children:[(0,ae.jsx)("div",{className:"px-3 py-6 border-b",children:(0,ae.jsxs)("div",{className:"flex items-center  ",children:[(0,ae.jsx)(Fa,{className:"h-8 w-8 mx-3"}),!o&&(0,ae.jsxs)("div",{className:"flex flex-col",children:[(0,ae.jsx)("h1",{className:"text-xl font-bold leading-tight font-pixelify dark:text-white",children:"CodeON"}),(0,ae.jsxs)("span",{className:"text-xs text-muted-foreground leading-tight capitalize",children:[w," View"]})]})]})}),(0,ae.jsx)("div",{className:"flex-1 py-4 overflow-y-auto custom-scrollbar",children:(0,ae.jsx)("nav",{className:"space-y-1 px-3",children:S.map(y=>{let B=y.icon,O=y.id==="more";return(0,ae.jsxs)("div",{className:"relative",ref:O?d:null,children:[(0,ae.jsxs)("button",{className:`w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-left transition-colors group ${e===y.id?"bg-primary/10 text-primary font-medium":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"} ${o?"justify-center":""} ${O&&n?"bg-primary/10 text-primary":""}`,onClick:O?k:()=>t(y.id),title:o?y.label:"",children:[(0,ae.jsx)(B,{className:"h-6 w-6 flex-shrink-0"}),!o&&(0,ae.jsx)("span",{className:"truncate",children:y.label}),o&&(0,ae.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50 pointer-events-none",children:y.label})]}),O&&n&&(0,ae.jsx)("div",{className:`absolute ${o?"left-full ml-4 top-0":"left-0 top-full mt-1 w-full"} bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg py-1 z-50 min-w-48`,children:b.map(M=>{let H=M.icon,X=M.id==="logout-trigger";return(0,ae.jsxs)("button",{className:`w-full flex items-center space-x-3 px-4 py-2 text-sm transition-colors ${X?"text-red-600 hover:bg-red-50 dark:hover:bg-red-950/20":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>T(M),children:[(0,ae.jsx)(H,{className:"h-4 w-4"}),(0,ae.jsx)("span",{children:M.label})]},M.id)})})]},y.id)})})})]}),(0,ae.jsx)(fe,{open:i,onOpenChange:l,children:(0,ae.jsxs)(be,{children:[(0,ae.jsxs)(ve,{children:[(0,ae.jsx)(xe,{children:"Sign out?"}),(0,ae.jsx)(De,{children:"Are you sure you want to sign out? You will need to log back in to access your dashboard."})]}),(0,ae.jsxs)(Se,{className:"gap-2 sm:gap-0",children:[(0,ae.jsx)(E,{variant:"ghost",onClick:()=>l(!1),children:"Cancel"}),(0,ae.jsx)(E,{variant:"destructive",onClick:_,className:"bg-red-600 hover:bg-red-700",children:"Sign out"})]})]})})]})}var Ln=L(oe(),1);var ft=L(oe(),1);var Ds=L(oe(),1);var Cr=L(oe(),1);var pt=L(oe(),1),gs=L(V(),1);function ps(e,t=[]){let a=[];function r(n,s){let i=pt.createContext(s);i.displayName=n+"Context";let l=a.length;a=[...a,s];let d=m=>{let{scope:g,children:x,...c}=m,w=g?.[e]?.[l]||i,S=pt.useMemo(()=>c,Object.values(c));return(0,gs.jsx)(w.Provider,{value:S,children:x})};d.displayName=n+"Provider";function p(m,g){let x=g?.[e]?.[l]||i,c=pt.useContext(x);if(c)return c;if(s!==void 0)return s;throw new Error(`\`${m}\` must be used within \`${n}\``)}return[d,p]}let o=()=>{let n=a.map(s=>pt.createContext(s));return function(i){let l=i?.[e]||n;return pt.useMemo(()=>({[`__scope${e}`]:{...i,[e]:l}}),[i,l])}};return o.scopeName=e,[r,Xn(o,...t)]}function Xn(...e){let t=e[0];if(e.length===1)return t;let a=()=>{let r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(n){let s=r.reduce((i,{useScope:l,scopeName:d})=>{let m=l(n)[`__scope${d}`];return{...i,...m}},{});return pt.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return a.scopeName=t.scopeName,a}var hs=L(oe(),1),ai=L(qn(),1);var Re=L(oe(),1);var ja=L(V(),1),Qn=Symbol.for("react.lazy"),$a=Re[" use ".trim().toString()];function Wn(e){return typeof e=="object"&&e!==null&&"then"in e}function fs(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Qn&&"_payload"in e&&Wn(e._payload)}function bs(e){let t=Kn(e),a=Re.forwardRef((r,o)=>{let{children:n,...s}=r;fs(n)&&typeof $a=="function"&&(n=$a(n._payload));let i=Re.Children.toArray(n),l=i.find(Jn);if(l){let d=l.props.children,p=i.map(m=>m===l?Re.Children.count(d)>1?Re.Children.only(null):Re.isValidElement(d)?d.props.children:null:m);return(0,ja.jsx)(t,{...s,ref:o,children:Re.isValidElement(d)?Re.cloneElement(d,void 0,p):null})}return(0,ja.jsx)(t,{...s,ref:o,children:n})});return a.displayName=`${e}.Slot`,a}function Kn(e){let t=Re.forwardRef((a,r)=>{let{children:o,...n}=a;if(fs(o)&&typeof $a=="function"&&(o=$a(o._payload)),Re.isValidElement(o)){let s=ti(o),i=ei(n,o.props);return o.type!==Re.Fragment&&(i.ref=r?Uo(r,s):s),Re.cloneElement(o,i)}return Re.Children.count(o)>1?Re.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Zn=Symbol("radix.slottable");function Jn(e){return Re.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Zn}function ei(e,t){let a={...t};for(let r in t){let o=e[r],n=t[r];/^on[A-Z]/.test(r)?o&&n?a[r]=(...i)=>{let l=n(...i);return o(...i),l}:o&&(a[r]=o):r==="style"?a[r]={...o,...n}:r==="className"&&(a[r]=[o,n].filter(Boolean).join(" "))}return{...e,...a}}function ti(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}var ys=L(V(),1),ri=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],kr=ri.reduce((e,t)=>{let a=bs(`Primitive.${t}`),r=hs.forwardRef((o,n)=>{let{asChild:s,...i}=o,l=s?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,ys.jsx)(l,{...i,ref:n})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});var Va=L(V(),1),Sr="Progress",Dr=100,[oi,Jl]=ps(Sr),[si,ni]=oi(Sr),ws=Cr.forwardRef((e,t)=>{let{__scopeProgress:a,value:r=null,max:o,getValueLabel:n=ii,...s}=e;(o||o===0)&&!vs(o)&&console.error(li(`${o}`,"Progress"));let i=vs(o)?o:Dr;r!==null&&!xs(r,i)&&console.error(di(`${r}`,"Progress"));let l=xs(r,i)?r:null,d=Ga(l)?n(l,i):void 0;return(0,Va.jsx)(si,{scope:a,value:l,max:i,children:(0,Va.jsx)(kr.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":Ga(l)?l:void 0,"aria-valuetext":d,role:"progressbar","data-state":Cs(l,i),"data-value":l??void 0,"data-max":i,...s,ref:t})})});ws.displayName=Sr;var Ns="ProgressIndicator",ks=Cr.forwardRef((e,t)=>{let{__scopeProgress:a,...r}=e,o=ni(Ns,a);return(0,Va.jsx)(kr.div,{"data-state":Cs(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...r,ref:t})});ks.displayName=Ns;function ii(e,t){return`${Math.round(e/t*100)}%`}function Cs(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Ga(e){return typeof e=="number"}function vs(e){return Ga(e)&&!isNaN(e)&&e>0}function xs(e,t){return Ga(e)&&!isNaN(e)&&e<=t&&e>=0}function li(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Dr}\`.`}function di(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Dr} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Tr=ws,Ss=ks;var Rr=L(V(),1),ea=Ds.forwardRef(({className:e,value:t,indicatorClassName:a,...r},o)=>(0,Rr.jsx)(Tr,{ref:o,className:W("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:(0,Rr.jsx)(Ss,{className:W("h-full w-full flex-1 bg-primary transition-all",a),style:{transform:`translateX(-${100-(t||0)}%)`}})}));ea.displayName=Tr.displayName;var Te=L(oe(),1);var Xe=L(oe(),1);function mi(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ts(e){return mi(e)||Array.isArray(e)}function Ps(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Ya(e,t){let a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;let o=JSON.stringify(Object.keys(e.breakpoints||{})),n=JSON.stringify(Object.keys(t.breakpoints||{}));return o!==n?!1:a.every(s=>{let i=e[s],l=t[s];return typeof i=="function"?`${i}`==`${l}`:!Ts(i)||!Ts(l)?i===l:Ya(i,l)})}function Rs(e){return e.concat().sort((t,a)=>t.name>a.name?1:-1).map(t=>t.options)}function Ls(e,t){if(e.length!==t.length)return!1;let a=Rs(e),r=Rs(t);return a.every((o,n)=>{let s=r[n];return Ya(o,s)})}function Er(e){return typeof e=="number"}function Pr(e){return typeof e=="string"}function qa(e){return typeof e=="boolean"}function Es(e){return Object.prototype.toString.call(e)==="[object Object]"}function we(e){return Math.abs(e)}function Ir(e){return Math.sign(e)}function ia(e,t){return we(e-t)}function ui(e,t){if(e===0||t===0||we(e)<=we(t))return 0;let a=ia(we(e),we(t));return we(a/e)}function gi(e){return Math.round(e*100)/100}function la(e){return da(e).map(Number)}function Ze(e){return e[ma(e)]}function ma(e){return Math.max(0,e.length-1)}function Ar(e,t){return t===ma(e)}function Is(e,t=0){return Array.from(Array(e),(a,r)=>t+r)}function da(e){return Object.keys(e)}function As(e,t){return[e,t].reduce((a,r)=>(da(r).forEach(o=>{let n=a[o],s=r[o],i=Es(n)&&Es(s);a[o]=i?As(n,s):s}),a),{})}function Lr(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function pi(e,t){let a={start:r,center:o,end:n};function r(){return 0}function o(l){return n(l)/2}function n(l){return t-l}function s(l,d){return Pr(e)?a[e](l):e(t,l,d)}return{measure:s}}function ca(){let e=[];function t(o,n,s,i={passive:!0}){let l;if("addEventListener"in o)o.addEventListener(n,s,i),l=()=>o.removeEventListener(n,s,i);else{let d=o;d.addListener(s),l=()=>d.removeListener(s)}return e.push(l),r}function a(){e=e.filter(o=>o())}let r={add:t,clear:a};return r}function fi(e,t,a,r){let o=ca(),n=1e3/60,s=null,i=0,l=0;function d(){o.add(e,"visibilitychange",()=>{e.hidden&&c()})}function p(){x(),o.clear()}function m(S){if(!l)return;s||(s=S,a(),a());let b=S-s;for(s=S,i+=b;i>=n;)a(),i-=n;let k=i/n;r(k),l&&(l=t.requestAnimationFrame(m))}function g(){l||(l=t.requestAnimationFrame(m))}function x(){t.cancelAnimationFrame(l),s=null,i=0,l=0}function c(){s=null,i=0}return{init:d,destroy:p,start:g,stop:x,update:a,render:r}}function bi(e,t){let a=t==="rtl",r=e==="y",o=r?"y":"x",n=r?"x":"y",s=!r&&a?-1:1,i=p(),l=m();function d(c){let{height:w,width:S}=c;return r?w:S}function p(){return r?"top":a?"right":"left"}function m(){return r?"bottom":a?"left":"right"}function g(c){return c*s}return{scroll:o,cross:n,startEdge:i,endEdge:l,measureSize:d,direction:g}}function Ft(e=0,t=0){let a=we(e-t);function r(d){return d<e}function o(d){return d>t}function n(d){return r(d)||o(d)}function s(d){return n(d)?r(d)?e:t:d}function i(d){return a?d-a*Math.ceil((d-t)/a):d}return{length:a,max:t,min:e,constrain:s,reachedAny:n,reachedMax:o,reachedMin:r,removeOffset:i}}function Ms(e,t,a){let{constrain:r}=Ft(0,e),o=e+1,n=s(t);function s(g){return a?we((o+g)%o):r(g)}function i(){return n}function l(g){return n=s(g),m}function d(g){return p().set(i()+g)}function p(){return Ms(e,i(),a)}let m={get:i,set:l,add:d,clone:p};return m}function hi(e,t,a,r,o,n,s,i,l,d,p,m,g,x,c,w,S,b,k){let{cross:T,direction:_}=e,y=["INPUT","SELECT","TEXTAREA"],B={passive:!1},O=ca(),M=ca(),H=Ft(50,225).constrain(x.measure(20)),X={mouse:300,touch:400},Y={mouse:500,touch:600},te=c?43:25,v=!1,I=0,ce=0,Ie=!1,Ue=!1,Ae=!1,We=!1;function Pt(z){if(!k)return;function le(Be){(qa(k)||k(z,Be))&&vt(Be)}let ke=t;O.add(ke,"dragstart",Be=>Be.preventDefault(),B).add(ke,"touchmove",()=>{},B).add(ke,"touchend",()=>{}).add(ke,"touchstart",le).add(ke,"mousedown",le).add(ke,"touchcancel",Pe).add(ke,"contextmenu",Pe).add(ke,"click",R,!0)}function Ve(){O.clear(),M.clear()}function yt(){let z=We?a:t;M.add(z,"touchmove",Me,B).add(z,"touchend",Pe).add(z,"mousemove",Me,B).add(z,"mouseup",Pe)}function lt(z){let le=z.nodeName||"";return y.includes(le)}function Ke(){return(c?Y:X)[We?"mouse":"touch"]}function Lt(z,le){let ke=m.add(Ir(z)*-1),Be=p.byDistance(z,!c).distance;return c||we(z)<H?Be:S&&le?Be*.5:p.byIndex(ke.get(),0).distance}function vt(z){let le=Lr(z,r);We=le,Ae=c&&le&&!z.buttons&&v,v=ia(o.get(),s.get())>=2,!(le&&z.button!==0)&&(lt(z.target)||(Ie=!0,n.pointerDown(z),d.useFriction(0).useDuration(0),o.set(s),yt(),I=n.readPoint(z),ce=n.readPoint(z,T),g.emit("pointerDown")))}function Me(z){if(!Lr(z,r)&&z.touches.length>=2)return Pe(z);let ke=n.readPoint(z),Be=n.readPoint(z,T),tt=ia(ke,I),dt=ia(Be,ce);if(!Ue&&!We&&(!z.cancelable||(Ue=tt>dt,!Ue)))return Pe(z);let Et=n.pointerMove(z);tt>w&&(Ae=!0),d.useFriction(.3).useDuration(.75),i.start(),o.add(_(Et)),z.preventDefault()}function Pe(z){let ke=p.byDistance(0,!1).index!==m.get(),Be=n.pointerUp(z)*Ke(),tt=Lt(_(Be),ke),dt=ui(Be,tt),Et=te-10*dt,xt=b+dt/50;Ue=!1,Ie=!1,M.clear(),d.useDuration(Et).useFriction(xt),l.distance(tt,!c),We=!1,g.emit("pointerUp")}function R(z){Ae&&(z.stopPropagation(),z.preventDefault(),Ae=!1)}function me(){return Ie}return{init:Pt,destroy:Ve,pointerDown:me}}function yi(e,t){let r,o;function n(m){return m.timeStamp}function s(m,g){let c=`client${(g||e.scroll)==="x"?"X":"Y"}`;return(Lr(m,t)?m:m.touches[0])[c]}function i(m){return r=m,o=m,s(m)}function l(m){let g=s(m)-s(o),x=n(m)-n(r)>170;return o=m,x&&(r=m),g}function d(m){if(!r||!o)return 0;let g=s(o)-s(r),x=n(m)-n(r),c=n(m)-n(o)>170,w=g/x;return x&&!c&&we(w)>.1?w:0}return{pointerDown:i,pointerMove:l,pointerUp:d,readPoint:s}}function vi(){function e(a){let{offsetTop:r,offsetLeft:o,offsetWidth:n,offsetHeight:s}=a;return{top:r,right:o+n,bottom:r+s,left:o,width:n,height:s}}return{measure:e}}function xi(e){function t(r){return e*(r/100)}return{measure:t}}function wi(e,t,a,r,o,n,s){let i=[e].concat(r),l,d,p=[],m=!1;function g(S){return o.measureSize(s.measure(S))}function x(S){if(!n)return;d=g(e),p=r.map(g);function b(k){for(let T of k){if(m)return;let _=T.target===e,y=r.indexOf(T.target),B=_?d:p[y],O=g(_?e:r[y]);if(we(O-B)>=.5){S.reInit(),t.emit("resize");break}}}l=new ResizeObserver(k=>{(qa(n)||n(S,k))&&b(k)}),a.requestAnimationFrame(()=>{i.forEach(k=>l.observe(k))})}function c(){m=!0,l&&l.disconnect()}return{init:x,destroy:c}}function Ni(e,t,a,r,o,n){let s=0,i=0,l=o,d=n,p=e.get(),m=0;function g(){let B=r.get()-e.get(),O=!l,M=0;return O?(s=0,a.set(r),e.set(r),M=B):(a.set(e),s+=B/l,s*=d,p+=s,e.add(s),M=p-m),i=Ir(M),m=p,y}function x(){let B=r.get()-t.get();return we(B)<.001}function c(){return l}function w(){return i}function S(){return s}function b(){return T(o)}function k(){return _(n)}function T(B){return l=B,y}function _(B){return d=B,y}let y={direction:w,duration:c,velocity:S,seek:g,settled:x,useBaseFriction:k,useBaseDuration:b,useFriction:_,useDuration:T};return y}function ki(e,t,a,r,o){let n=o.measure(10),s=o.measure(50),i=Ft(.1,.99),l=!1;function d(){return!(l||!e.reachedAny(a.get())||!e.reachedAny(t.get()))}function p(x){if(!d())return;let c=e.reachedMin(t.get())?"min":"max",w=we(e[c]-t.get()),S=a.get()-t.get(),b=i.constrain(w/s);a.subtract(S*b),!x&&we(S)<n&&(a.set(e.constrain(a.get())),r.useDuration(25).useBaseFriction())}function m(x){l=!x}return{shouldConstrain:d,constrain:p,toggleActive:m}}function Ci(e,t,a,r,o){let n=Ft(-t+e,0),s=m(),i=p(),l=g();function d(c,w){return ia(c,w)<=1}function p(){let c=s[0],w=Ze(s),S=s.lastIndexOf(c),b=s.indexOf(w)+1;return Ft(S,b)}function m(){return a.map((c,w)=>{let{min:S,max:b}=n,k=n.constrain(c),T=!w,_=Ar(a,w);return T?b:_||d(S,k)?S:d(b,k)?b:k}).map(c=>parseFloat(c.toFixed(3)))}function g(){if(t<=e+o)return[n.max];if(r==="keepSnaps")return s;let{min:c,max:w}=i;return s.slice(c,w)}return{snapsContained:l,scrollContainLimit:i}}function Si(e,t,a){let r=t[0],o=a?r-e:Ze(t);return{limit:Ft(o,r)}}function Di(e,t,a,r){let n=t.min+.1,s=t.max+.1,{reachedMin:i,reachedMax:l}=Ft(n,s);function d(g){return g===1?l(a.get()):g===-1?i(a.get()):!1}function p(g){if(!d(g))return;let x=e*(g*-1);r.forEach(c=>c.add(x))}return{loop:p}}function Ti(e){let{max:t,length:a}=e;function r(n){let s=n-t;return a?s/-a:0}return{get:r}}function Ri(e,t,a,r,o){let{startEdge:n,endEdge:s}=e,{groupSlides:i}=o,l=m().map(t.measure),d=g(),p=x();function m(){return i(r).map(w=>Ze(w)[s]-w[0][n]).map(we)}function g(){return r.map(w=>a[n]-w[n]).map(w=>-we(w))}function x(){return i(d).map(w=>w[0]).map((w,S)=>w+l[S])}return{snaps:d,snapsAligned:p}}function Pi(e,t,a,r,o,n){let{groupSlides:s}=o,{min:i,max:l}=r,d=p();function p(){let g=s(n),x=!e||t==="keepSnaps";return a.length===1?[n]:x?g:g.slice(i,l).map((c,w,S)=>{let b=!w,k=Ar(S,w);if(b){let T=Ze(S[0])+1;return Is(T)}if(k){let T=ma(n)-Ze(S)[0]+1;return Is(T,Ze(S)[0])}return c})}return{slideRegistry:d}}function Li(e,t,a,r,o){let{reachedAny:n,removeOffset:s,constrain:i}=r;function l(c){return c.concat().sort((w,S)=>we(w)-we(S))[0]}function d(c){let w=e?s(c):i(c),S=t.map((k,T)=>({diff:p(k-w,0),index:T})).sort((k,T)=>we(k.diff)-we(T.diff)),{index:b}=S[0];return{index:b,distance:w}}function p(c,w){let S=[c,c+a,c-a];if(!e)return c;if(!w)return l(S);let b=S.filter(k=>Ir(k)===w);return b.length?l(b):Ze(S)-a}function m(c,w){let S=t[c]-o.get(),b=p(S,w);return{index:c,distance:b}}function g(c,w){let S=o.get()+c,{index:b,distance:k}=d(S),T=!e&&n(S);if(!w||T)return{index:b,distance:c};let _=t[b]-k,y=c+p(_,0);return{index:b,distance:y}}return{byDistance:g,byIndex:m,shortcut:p}}function Ei(e,t,a,r,o,n,s){function i(m){let g=m.distance,x=m.index!==t.get();n.add(g),g&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),x&&(a.set(t.get()),t.set(m.index),s.emit("select"))}function l(m,g){let x=o.byDistance(m,g);i(x)}function d(m,g){let x=t.clone().set(m),c=o.byIndex(x.get(),g);i(c)}return{distance:l,index:d}}function Ii(e,t,a,r,o,n,s,i){let l={passive:!0,capture:!0},d=0;function p(x){if(!i)return;function c(w){if(new Date().getTime()-d>10)return;s.emit("slideFocusStart"),e.scrollLeft=0;let k=a.findIndex(T=>T.includes(w));Er(k)&&(o.useDuration(0),r.index(k,0),s.emit("slideFocus"))}n.add(document,"keydown",m,!1),t.forEach((w,S)=>{n.add(w,"focus",b=>{(qa(i)||i(x,b))&&c(S)},l)})}function m(x){x.code==="Tab"&&(d=new Date().getTime())}return{init:p}}function na(e){let t=e;function a(){return t}function r(l){t=s(l)}function o(l){t+=s(l)}function n(l){t-=s(l)}function s(l){return Er(l)?l:l.get()}return{get:a,set:r,add:o,subtract:n}}function Bs(e,t){let a=e.scroll==="x"?s:i,r=t.style,o=null,n=!1;function s(g){return`translate3d(${g}px,0px,0px)`}function i(g){return`translate3d(0px,${g}px,0px)`}function l(g){if(n)return;let x=gi(e.direction(g));x!==o&&(r.transform=a(x),o=x)}function d(g){n=!g}function p(){n||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:p,to:l,toggleActive:d}}function Ai(e,t,a,r,o,n,s,i,l){let p=la(o),m=la(o).reverse(),g=b().concat(k());function x(O,M){return O.reduce((H,X)=>H-o[X],M)}function c(O,M){return O.reduce((H,X)=>x(H,M)>0?H.concat([X]):H,[])}function w(O){return n.map((M,H)=>({start:M-r[H]+.5+O,end:M+t-.5+O}))}function S(O,M,H){let X=w(M);return O.map(Y=>{let te=H?0:-a,v=H?a:0,I=H?"end":"start",ce=X[Y][I];return{index:Y,loopPoint:ce,slideLocation:na(-1),translate:Bs(e,l[Y]),target:()=>i.get()>ce?te:v}})}function b(){let O=s[0],M=c(m,O);return S(M,a,!1)}function k(){let O=t-s[0]-1,M=c(p,O);return S(M,-a,!0)}function T(){return g.every(({index:O})=>{let M=p.filter(H=>H!==O);return x(M,t)<=.1})}function _(){g.forEach(O=>{let{target:M,translate:H,slideLocation:X}=O,Y=M();Y!==X.get()&&(H.to(Y),X.set(Y))})}function y(){g.forEach(O=>O.translate.clear())}return{canLoop:T,clear:y,loop:_,loopPoints:g}}function Mi(e,t,a){let r,o=!1;function n(l){if(!a)return;function d(p){for(let m of p)if(m.type==="childList"){l.reInit(),t.emit("slidesChanged");break}}r=new MutationObserver(p=>{o||(qa(a)||a(l,p))&&d(p)}),r.observe(e,{childList:!0})}function s(){r&&r.disconnect(),o=!0}return{init:n,destroy:s}}function Bi(e,t,a,r){let o={},n=null,s=null,i,l=!1;function d(){i=new IntersectionObserver(c=>{l||(c.forEach(w=>{let S=t.indexOf(w.target);o[S]=w}),n=null,s=null,a.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(c=>i.observe(c))}function p(){i&&i.disconnect(),l=!0}function m(c){return da(o).reduce((w,S)=>{let b=parseInt(S),{isIntersecting:k}=o[b];return(c&&k||!c&&!k)&&w.push(b),w},[])}function g(c=!0){if(c&&n)return n;if(!c&&s)return s;let w=m(c);return c&&(n=w),c||(s=w),w}return{init:d,destroy:p,get:g}}function _i(e,t,a,r,o,n){let{measureSize:s,startEdge:i,endEdge:l}=e,d=a[0]&&o,p=c(),m=w(),g=a.map(s),x=S();function c(){if(!d)return 0;let k=a[0];return we(t[i]-k[i])}function w(){if(!d)return 0;let k=n.getComputedStyle(Ze(r));return parseFloat(k.getPropertyValue(`margin-${l}`))}function S(){return a.map((k,T,_)=>{let y=!T,B=Ar(_,T);return y?g[T]+p:B?g[T]+m:_[T+1][i]-k[i]}).map(we)}return{slideSizes:g,slideSizesWithGaps:x,startGap:p,endGap:m}}function Oi(e,t,a,r,o,n,s,i,l){let{startEdge:d,endEdge:p,direction:m}=e,g=Er(a);function x(b,k){return la(b).filter(T=>T%k===0).map(T=>b.slice(T,T+k))}function c(b){return b.length?la(b).reduce((k,T,_)=>{let y=Ze(k)||0,B=y===0,O=T===ma(b),M=o[d]-n[y][d],H=o[d]-n[T][p],X=!r&&B?m(s):0,Y=!r&&O?m(i):0,te=we(H-Y-(M+X));return _&&te>t+l&&k.push(T),O&&k.push(b.length),k},[]).map((k,T,_)=>{let y=Math.max(_[T-1]||0);return b.slice(y,k)}):[]}function w(b){return g?x(b,a):c(b)}return{groupSlides:w}}function Fi(e,t,a,r,o,n,s){let{align:i,axis:l,direction:d,startIndex:p,loop:m,duration:g,dragFree:x,dragThreshold:c,inViewThreshold:w,slidesToScroll:S,skipSnaps:b,containScroll:k,watchResize:T,watchSlides:_,watchDrag:y,watchFocus:B}=n,O=2,M=vi(),H=M.measure(t),X=a.map(M.measure),Y=bi(l,d),te=Y.measureSize(H),v=xi(te),I=pi(i,te),ce=!m&&!!k,Ie=m||!!k,{slideSizes:Ue,slideSizesWithGaps:Ae,startGap:We,endGap:Pt}=_i(Y,H,X,a,Ie,o),Ve=Oi(Y,te,S,m,H,X,We,Pt,O),{snaps:yt,snapsAligned:lt}=Ri(Y,I,H,X,Ve),Ke=-Ze(yt)+Ze(Ae),{snapsContained:Lt,scrollContainLimit:vt}=Ci(te,Ke,lt,k,O),Me=ce?Lt:lt,{limit:Pe}=Si(Ke,Me,m),R=Ms(ma(Me),p,m),me=R.clone(),ue=la(a),z=({dragHandler:$t,scrollBody:mr,scrollBounds:ur,options:{loop:fa}})=>{fa||ur.constrain($t.pointerDown()),mr.seek()},le=({scrollBody:$t,translate:mr,location:ur,offsetLocation:fa,previousLocation:Un,scrollLooper:Hn,slideLooper:zn,dragHandler:jn,animation:$n,eventHandler:eo,scrollBounds:Vn,options:{loop:to}},ao)=>{let ro=$t.settled(),Gn=!Vn.shouldConstrain(),oo=to?ro:ro&&Gn,so=oo&&!jn.pointerDown();so&&$n.stop();let Yn=ur.get()*ao+Un.get()*(1-ao);fa.set(Yn),to&&(Hn.loop($t.direction()),zn.loop()),mr.to(fa.get()),so&&eo.emit("settle"),oo||eo.emit("scroll")},ke=fi(r,o,()=>z(cr),$t=>le(cr,$t)),Be=.68,tt=Me[R.get()],dt=na(tt),Et=na(tt),xt=na(tt),It=na(tt),ra=Ni(dt,xt,Et,It,g,Be),lr=Li(m,Me,Ke,Pe,It),dr=Ei(ke,R,me,ra,lr,It,s),Kr=Ti(Pe),Zr=ca(),On=Bi(t,a,s,w),{slideRegistry:Jr}=Pi(ce,k,Me,vt,Ve,ue),Fn=Ii(e,a,Jr,dr,ra,Zr,s,B),cr={ownerDocument:r,ownerWindow:o,eventHandler:s,containerRect:H,slideRects:X,animation:ke,axis:Y,dragHandler:hi(Y,e,r,o,It,yi(Y,o),dt,ke,dr,ra,lr,R,s,v,x,c,b,Be,y),eventStore:Zr,percentOfView:v,index:R,indexPrevious:me,limit:Pe,location:dt,offsetLocation:xt,previousLocation:Et,options:n,resizeHandler:wi(t,s,o,a,Y,T,M),scrollBody:ra,scrollBounds:ki(Pe,xt,It,ra,v),scrollLooper:Di(Ke,Pe,xt,[dt,xt,Et,It]),scrollProgress:Kr,scrollSnapList:Me.map(Kr.get),scrollSnaps:Me,scrollTarget:lr,scrollTo:dr,slideLooper:Ai(Y,te,Ke,Ue,Ae,yt,Me,xt,a),slideFocus:Fn,slidesHandler:Mi(t,s,_),slidesInView:On,slideIndexes:ue,slideRegistry:Jr,slidesToScroll:Ve,target:It,translate:Bs(Y,t)};return cr}function Ui(){let e={},t;function a(d){t=d}function r(d){return e[d]||[]}function o(d){return r(d).forEach(p=>p(t,d)),l}function n(d,p){return e[d]=r(d).concat([p]),l}function s(d,p){return e[d]=r(d).filter(m=>m!==p),l}function i(){e={}}let l={init:a,emit:o,off:s,on:n,clear:i};return l}var Hi={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function zi(e){function t(n,s){return As(n,s||{})}function a(n){let s=n.breakpoints||{},i=da(s).filter(l=>e.matchMedia(l).matches).map(l=>s[l]).reduce((l,d)=>t(l,d),{});return t(n,i)}function r(n){return n.map(s=>da(s.breakpoints||{})).reduce((s,i)=>s.concat(i),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:a,optionsMediaQueries:r}}function ji(e){let t=[];function a(n,s){return t=s.filter(({options:i})=>e.optionsAtMedia(i).active!==!1),t.forEach(i=>i.init(n,e)),s.reduce((i,l)=>Object.assign(i,{[l.name]:l}),{})}function r(){t=t.filter(n=>n.destroy())}return{init:a,destroy:r}}function ua(e,t,a){let r=e.ownerDocument,o=r.defaultView,n=zi(o),s=ji(n),i=ca(),l=Ui(),{mergeOptions:d,optionsAtMedia:p,optionsMediaQueries:m}=n,{on:g,off:x,emit:c}=l,w=Y,S=!1,b,k=d(Hi,ua.globalOptions),T=d(k),_=[],y,B,O;function M(){let{container:ue,slides:z}=T;B=(Pr(ue)?e.querySelector(ue):ue)||e.children[0];let ke=Pr(z)?B.querySelectorAll(z):z;O=[].slice.call(ke||B.children)}function H(ue){let z=Fi(e,B,O,r,o,ue,l);if(ue.loop&&!z.slideLooper.canLoop()){let le=Object.assign({},ue,{loop:!1});return H(le)}return z}function X(ue,z){S||(k=d(k,ue),T=p(k),_=z||_,M(),b=H(T),m([k,..._.map(({options:le})=>le)]).forEach(le=>i.add(le,"change",Y)),T.active&&(b.translate.to(b.location.get()),b.animation.init(),b.slidesInView.init(),b.slideFocus.init(me),b.eventHandler.init(me),b.resizeHandler.init(me),b.slidesHandler.init(me),b.options.loop&&b.slideLooper.loop(),B.offsetParent&&O.length&&b.dragHandler.init(me),y=s.init(me,_)))}function Y(ue,z){let le=Ve();te(),X(d({startIndex:le},ue),z),l.emit("reInit")}function te(){b.dragHandler.destroy(),b.eventStore.clear(),b.translate.clear(),b.slideLooper.clear(),b.resizeHandler.destroy(),b.slidesHandler.destroy(),b.slidesInView.destroy(),b.animation.destroy(),s.destroy(),i.clear()}function v(){S||(S=!0,i.clear(),te(),l.emit("destroy"),l.clear())}function I(ue,z,le){!T.active||S||(b.scrollBody.useBaseFriction().useDuration(z===!0?0:T.duration),b.scrollTo.index(ue,le||0))}function ce(ue){let z=b.index.add(1).get();I(z,ue,-1)}function Ie(ue){let z=b.index.add(-1).get();I(z,ue,1)}function Ue(){return b.index.add(1).get()!==Ve()}function Ae(){return b.index.add(-1).get()!==Ve()}function We(){return b.scrollSnapList}function Pt(){return b.scrollProgress.get(b.offsetLocation.get())}function Ve(){return b.index.get()}function yt(){return b.indexPrevious.get()}function lt(){return b.slidesInView.get()}function Ke(){return b.slidesInView.get(!1)}function Lt(){return y}function vt(){return b}function Me(){return e}function Pe(){return B}function R(){return O}let me={canScrollNext:Ue,canScrollPrev:Ae,containerNode:Pe,internalEngine:vt,destroy:v,off:x,on:g,emit:c,plugins:Lt,previousScrollSnap:yt,reInit:w,rootNode:Me,scrollNext:ce,scrollPrev:Ie,scrollProgress:Pt,scrollSnapList:We,scrollTo:I,selectedScrollSnap:Ve,slideNodes:R,slidesInView:lt,slidesNotInView:Ke};return X(t,a),setTimeout(()=>l.emit("init"),0),me}ua.globalOptions=void 0;function Xa(e={},t=[]){let a=(0,Xe.useRef)(e),r=(0,Xe.useRef)(t),[o,n]=(0,Xe.useState)(),[s,i]=(0,Xe.useState)(),l=(0,Xe.useCallback)(()=>{o&&o.reInit(a.current,r.current)},[o]);return(0,Xe.useEffect)(()=>{Ya(a.current,e)||(a.current=e,l())},[e,l]),(0,Xe.useEffect)(()=>{Ls(r.current,t)||(r.current=t,l())},[t,l]),(0,Xe.useEffect)(()=>{if(Ps()&&s){ua.globalOptions=Xa.globalOptions;let d=ua(s,a.current,r.current);return n(d),()=>d.destroy()}else n(void 0)},[s,n]),[i,o]}Xa.globalOptions=void 0;var ze=L(V(),1),_s=Te.createContext(null);function Qa(){let e=Te.useContext(_s);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}var Mr=Te.forwardRef(({orientation:e="horizontal",opts:t,setApi:a,plugins:r,className:o,children:n,...s},i)=>{let[l,d]=Xa({...t,axis:e==="horizontal"?"x":"y"},r),[p,m]=Te.useState(!1),[g,x]=Te.useState(!1),c=Te.useCallback(k=>{k&&(m(k.canScrollPrev()),x(k.canScrollNext()))},[]),w=Te.useCallback(()=>{d?.scrollPrev()},[d]),S=Te.useCallback(()=>{d?.scrollNext()},[d]),b=Te.useCallback(k=>{k.key==="ArrowLeft"?(k.preventDefault(),w()):k.key==="ArrowRight"&&(k.preventDefault(),S())},[w,S]);return Te.useEffect(()=>{!d||!a||a(d)},[d,a]),Te.useEffect(()=>{if(d)return c(d),d.on("reInit",c),d.on("select",c),()=>{d?.off("select",c)}},[d,c]),(0,ze.jsx)(_s.Provider,{value:{carouselRef:l,api:d,opts:t,orientation:e||(t?.axis==="y"?"vertical":"horizontal"),scrollPrev:w,scrollNext:S,canScrollPrev:p,canScrollNext:g},children:(0,ze.jsx)("div",{ref:i,onKeyDownCapture:b,className:W("relative",o),role:"region","aria-roledescription":"carousel",...s,children:n})})});Mr.displayName="Carousel";var Br=Te.forwardRef(({className:e,...t},a)=>{let{carouselRef:r,orientation:o}=Qa();return(0,ze.jsx)("div",{ref:r,className:"overflow-hidden",children:(0,ze.jsx)("div",{ref:a,className:W("flex",o==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...t})})});Br.displayName="CarouselContent";var _r=Te.forwardRef(({className:e,...t},a)=>{let{orientation:r}=Qa();return(0,ze.jsx)("div",{ref:a,role:"group","aria-roledescription":"slide",className:W("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",e),...t})});_r.displayName="CarouselItem";var Or=Te.forwardRef(({className:e,variant:t="outline",size:a="icon",...r},o)=>{let{orientation:n,scrollPrev:s,canScrollPrev:i}=Qa();return(0,ze.jsxs)(E,{ref:o,variant:t,size:a,className:W("absolute  h-8 w-8 rounded-full",n==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!i,onClick:s,...r,children:[(0,ze.jsx)(co,{className:"h-4 w-4"}),(0,ze.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});Or.displayName="CarouselPrevious";var Fr=Te.forwardRef(({className:e,variant:t="outline",size:a="icon",...r},o)=>{let{orientation:n,scrollNext:s,canScrollNext:i}=Qa();return(0,ze.jsxs)(E,{ref:o,variant:t,size:a,className:W("absolute h-8 w-8 rounded-full",n==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!i,onClick:s,...r,children:[(0,ze.jsx)(wt,{className:"h-4 w-4"}),(0,ze.jsx)("span",{className:"sr-only",children:"Next slide"})]})});Fr.displayName="CarouselNext";var Q=L(V(),1),$i=e=>{let t=e?.toLowerCase()||"";return t.includes("python")?{icon:ka,bgGradient:"from-blue-500 to-yellow-400",shadow:"shadow-blue-500/25",text:"text-blue-600 dark:text-blue-400",border:"border-blue-200 dark:border-blue-900"}:t.includes("javascript")||t.includes("js")?{icon:mt,bgGradient:"from-yellow-400 to-orange-500",shadow:"shadow-yellow-500/25",text:"text-yellow-600 dark:text-yellow-400",border:"border-yellow-200 dark:border-yellow-900"}:t.includes("html")||t.includes("css")?{icon:mt,bgGradient:"from-orange-500 to-red-500",shadow:"shadow-orange-500/25",text:"text-orange-600 dark:text-orange-400",border:"border-orange-200 dark:border-orange-900"}:t.includes("react")?{icon:ho,bgGradient:"from-cyan-400 to-blue-600",shadow:"shadow-cyan-500/25",text:"text-cyan-600 dark:text-cyan-400",border:"border-cyan-200 dark:border-cyan-900"}:{icon:uo,bgGradient:"from-indigo-500 to-purple-600",shadow:"shadow-indigo-500/25",text:"text-indigo-600 dark:text-indigo-400",border:"border-indigo-200 dark:border-indigo-900"}};function Os({challenges:e,onSelectChallenge:t,completedChallenges:a}){return(0,Q.jsxs)(Mr,{opts:{align:"start",loop:!1},className:"w-full py-4",children:[(0,Q.jsxs)("div",{className:"flex justify-end gap-2 mb-4 px-1",children:[(0,Q.jsx)(Or,{className:"static translate-y-0 translate-x-0 h-10 w-10 border-indigo-200 dark:border-indigo-800 bg-white dark:bg-gray-800 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/50 shadow-sm",variant:"outline"}),(0,Q.jsx)(Fr,{className:"static translate-y-0 translate-x-0 h-10 w-10 border-indigo-200 dark:border-indigo-800 bg-white dark:bg-gray-800 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/50 shadow-sm",variant:"outline"})]}),(0,Q.jsx)(Br,{className:"-ml-4",children:e.map((r,o)=>{let n=o>0?e[o-1]:null,i=!(n?a.includes(n.id):!0),l=a.includes(r.id);return(0,Q.jsx)(_r,{className:"pl-4 md:basis-1/2 lg:basis-1/3 xl:basis-1/3",children:(0,Q.jsx)(Vi,{challenge:r,onSelect:()=>t(r),isLocked:i,isCompleted:l,index:o+1})},r.id)})})]})}function Vi({challenge:e,onSelect:t,isLocked:a,isCompleted:r,index:o}){let n=$i(e.language||"General"),s=n.icon;return(0,Q.jsxs)("div",{className:`
        group relative h-[420px] w-full flex flex-col rounded-[2rem] overflow-hidden 
        transition-all duration-500 ease-out
        ${a?"scale-[0.98] opacity-90":"hover:-translate-y-3 hover:shadow-2xl hover:shadow-indigo-500/20"}
        bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800
      `,children:[(0,Q.jsx)("div",{className:`absolute -top-24 -right-24 w-64 h-64 rounded-full bg-gradient-to-br ${n.bgGradient} opacity-20 blur-3xl transition-opacity duration-500 group-hover:opacity-30`}),(0,Q.jsx)("div",{className:`absolute -bottom-24 -left-24 w-64 h-64 rounded-full bg-gradient-to-tr ${n.bgGradient} opacity-10 blur-3xl`}),a&&(0,Q.jsxs)("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-white/30 dark:bg-black/40 backdrop-blur-md transition-all duration-500",children:[(0,Q.jsx)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-full shadow-2xl mb-4 animate-in zoom-in duration-300 border border-gray-100 dark:border-gray-700",children:(0,Q.jsx)(at,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),(0,Q.jsx)("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-1",children:"Locked"}),(0,Q.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 px-8 text-center leading-relaxed",children:"Complete the previous challenge to unlock this level."})]}),(0,Q.jsxs)("div",{className:"relative z-10 flex flex-col h-full p-6",children:[(0,Q.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Q.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,Q.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-400",children:"Challenge"}),(0,Q.jsx)("span",{className:"text-4xl font-black text-gray-900 dark:text-white font-pixelify",children:o.toString().padStart(2,"0")})]}),(0,Q.jsx)("div",{className:`
            px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border
            ${n.border} ${n.text} bg-white dark:bg-gray-800 shadow-sm
          `,children:e.difficulty})]}),(0,Q.jsxs)("div",{className:"relative h-32 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-500",children:[(0,Q.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br ${n.bgGradient} opacity-20 blur-xl rounded-full scale-75`}),(0,Q.jsx)(s,{className:`w-20 h-20 ${n.text} drop-shadow-md relative z-10`}),r&&!a&&(0,Q.jsx)("div",{className:"absolute -right-2 -bottom-2 bg-green-500 text-white p-1.5 rounded-full shadow-lg border-2 border-white dark:border-gray-900 animate-in zoom-in",children:(0,Q.jsx)(Gt,{className:"w-5 h-5"})})]}),(0,Q.jsxs)("div",{className:"mb-auto",children:[(0,Q.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white leading-tight mb-2 line-clamp-2 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:e.title}),(0,Q.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 leading-relaxed",children:e.description})]}),(0,Q.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-100 dark:border-gray-800 flex items-center justify-between",children:[(0,Q.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Q.jsx)("div",{className:"bg-yellow-100 dark:bg-yellow-900/30 p-1.5 rounded-lg text-yellow-600 dark:text-yellow-400",children:(0,Q.jsx)(He,{className:"w-4 h-4 fill-current"})}),(0,Q.jsxs)("span",{className:"font-bold text-gray-900 dark:text-white",children:[e.xp," ",(0,Q.jsx)("span",{className:"text-xs font-normal text-gray-500",children:"XP"})]})]}),(0,Q.jsxs)(E,{onClick:t,disabled:a,className:`
              rounded-xl px-6 font-bold shadow-lg transition-all duration-300
              active:scale-95
              ${a?"bg-gray-100 text-gray-400 dark:bg-gray-800 dark:text-gray-600 shadow-none":`bg-gradient-to-r ${n.bgGradient} text-white hover:brightness-110 hover:shadow-xl hover:shadow-indigo-500/20`}
            `,children:[r?"Redo":"Start",!r&&(0,Q.jsx)(wt,{className:"w-4 h-4 ml-2"}),r&&(0,Q.jsx)(Ro,{className:"w-4 h-4 ml-2 fill-current"})]})]})]})]})}var Wa=L(oe(),1),he=L(V(),1);function Fs({isOpen:e,newLevel:t,rewards:a,onClose:r}){let[o,n]=(0,Wa.useState)(!1);return(0,Wa.useEffect)(()=>{if(e){n(!0);let s=setTimeout(()=>n(!1),3e3);return()=>clearTimeout(s)}},[e]),(0,he.jsx)(fe,{open:e,onOpenChange:s=>!s&&r(),children:(0,he.jsx)(be,{className:"sm:max-w-md bg-transparent border-none shadow-none p-0 flex items-center justify-center min-h-[500px]",children:(0,he.jsxs)(K.div,{initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0},className:"bg-gradient-to-b from-indigo-900 to-slate-900 border-2 border-indigo-500/50 p-8 rounded-3xl w-full max-w-sm text-center shadow-2xl relative overflow-hidden",children:[(0,he.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-full bg-indigo-500/20 blur-3xl rounded-full -z-10"}),o&&(0,he.jsx)("div",{className:"absolute inset-0 pointer-events-none bg-yellow-500/10 animate-pulse z-0"}),(0,he.jsxs)(K.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,delay:.2},className:"w-24 h-24 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-white shadow-lg relative z-10",children:[(0,he.jsx)("span",{className:"text-4xl font-black text-white drop-shadow-md",children:t}),(0,he.jsx)(ot,{className:"absolute -top-6 -right-6 w-12 h-12 text-yellow-300 drop-shadow-lg animate-bounce"})]}),(0,he.jsx)("h2",{className:"text-3xl font-black text-white mb-2 uppercase tracking-wide",children:"Level Up!"}),(0,he.jsxs)("p",{className:"text-indigo-200 mb-8 flex items-center justify-center gap-2",children:[(0,he.jsx)(Zt,{className:"w-4 h-4 text-yellow-300"}),"You are getting stronger!"]}),(0,he.jsxs)("div",{className:"space-y-3 mb-8 text-left bg-black/20 p-4 rounded-2xl border border-white/10",children:[(0,he.jsx)("p",{className:"text-xs font-bold text-indigo-300 uppercase tracking-wider mb-2",children:"Rewards Claimed"}),a.map((s,i)=>(0,he.jsxs)(K.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.4+i*.1},className:"flex items-center gap-3 bg-white/5 p-2 rounded-lg",children:[s.type==="coin"&&(0,he.jsx)("div",{className:"p-2 bg-yellow-500/20 rounded-full",children:(0,he.jsx)(fo,{className:"w-5 h-5 text-yellow-400"})}),s.type==="badge"&&(0,he.jsx)("div",{className:"p-2 bg-purple-500/20 rounded-full",children:(0,he.jsx)(At,{className:"w-5 h-5 text-purple-400"})}),s.type==="unlock"&&(0,he.jsx)("div",{className:"p-2 bg-green-500/20 rounded-full",children:(0,he.jsx)(ct,{className:"w-5 h-5 text-green-400"})}),(0,he.jsx)("span",{className:"font-bold text-white text-sm",children:s.label})]},i))]}),(0,he.jsx)(E,{onClick:r,className:"w-full h-12 text-lg font-bold bg-green-500 hover:bg-green-600 text-white rounded-xl shadow-lg shadow-green-500/25 transition-all hover:scale-105 active:scale-95",children:"Claim Rewards"})]})})})}var F=L(V(),1);function Us({onTabChange:e}){let{user:t}=Le(),a=Vt(),[r,o]=(0,ft.useState)([]),[n,s]=(0,ft.useState)(!0),[i,l]=(0,ft.useState)({chapter:1,title:"Loading...",isCompleted:!1}),{grantXP:d,levelUpModal:p,isProcessing:m}=Zo();(0,ft.useEffect)(()=>{(async()=>{try{let{data:k,error:T}=await Z.from("challenges").select("*");if(T)throw T;if(k){let _=k.sort((y,B)=>y.page-B.page);o(_)}}catch(k){console.error("Error fetching challenges:",k)}finally{s(!1)}})()},[]);let g=(0,ft.useCallback)(async()=>{if(t)try{let{data:b,error:k}=await Z.from("lessons").select("id, title, order_index").order("order_index",{ascending:!0});if(k&&console.error("Error fetching lessons:",k),b){let T=t?.completedChapters||[],_=b.find(y=>!T.includes(y.id));_?l({chapter:_.order_index,title:_.title,isCompleted:!1}):b.length>0?l({chapter:b.length,title:"Mastery Reached",isCompleted:!0}):l({chapter:1,title:"The Beginning",isCompleted:!1})}}catch(b){console.error("Failed to calculate current chapter:",b)}},[t]);(0,ft.useEffect)(()=>{g()},[g]);let x=Ma(t?.xp||0),c={level:x.currentLevel,currentBarXP:x.currentXP,maxBarXP:x.xpForNextLevel,streak:t?.streaks||0,trophies:t?.trophies||0,league:t?.league||"Novice",starsEarned:t?.completedChapters?.length||0},w=b=>{a("/solo-challenge",{state:{challenge:b}})},S={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return(0,F.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 pb-12",children:[(0,F.jsx)(Fs,{isOpen:p.isOpen,newLevel:p.newLevel,rewards:p.rewards,onClose:p.close}),(0,F.jsxs)(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-xl",children:[(0,F.jsx)("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 h-64 w-64 rounded-full bg-white/10 blur-3xl"}),(0,F.jsx)("div",{className:"absolute bottom-0 left-0 -ml-16 -mb-16 h-64 w-64 rounded-full bg-white/10 blur-3xl"}),(0,F.jsx)("div",{className:"relative p-8 md:p-10",children:(0,F.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,F.jsxs)("span",{className:"bg-white/20 backdrop-blur-md px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider flex items-center gap-1",children:[c.league," League"]})}),(0,F.jsxs)("h1",{className:"text-3xl md:text-4xl font-extrabold mb-2 tracking-tight font-pixelify",children:["Welcome back, ",t?.displayName||"Traveler","!"]})]}),(0,F.jsxs)("div",{className:"bg-black/20 backdrop-blur-sm rounded-2xl p-6 min-w-[280px] border border-white/10",children:[(0,F.jsxs)("div",{className:"flex justify-between items-end mb-2",children:[(0,F.jsxs)("span",{className:"text-2xl font-black flex items-center gap-2",children:["Level ",c.level,(0,F.jsx)(Zt,{className:"w-4 h-4 text-yellow-300"})]}),(0,F.jsxs)("span",{className:"text-sm text-indigo-200 font-mono",children:[Math.round(c.currentBarXP),"/",c.maxBarXP," XP"]})]}),(0,F.jsx)(ea,{value:c.currentBarXP/c.maxBarXP*100,className:"h-3 bg-black/30",indicatorClassName:"bg-gradient-to-r from-yellow-300 to-yellow-500"}),(0,F.jsxs)("p",{className:"text-xs text-indigo-200 mt-3 text-right",children:[Math.round(c.maxBarXP-c.currentBarXP)," XP to Level"," ",c.level+1]})]})]})})]}),(0,F.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,F.jsx)(Ka,{icon:Tt,label:"Day Streak",value:c.streak.toString(),color:"text-orange-500",bgColor:"bg-orange-50 dark:bg-orange-950/30",iconClassName:"h-6 w-5"}),(0,F.jsx)(Ka,{icon:gt,label:"Total Trophies",value:c.trophies.toLocaleString(),color:"text-yellow-500",bgColor:"bg-yellow-50 dark:bg-yellow-950/30"}),(0,F.jsx)(Ka,{icon:Oa,label:"Current League",value:c.league,color:"text-purple-500",bgColor:"bg-purple-50 dark:bg-purple-950/30"}),(0,F.jsx)(Ka,{icon:_t,label:"Chapters Done",value:c.starsEarned.toString(),color:"text-blue-500",bgColor:"bg-blue-50 dark:bg-blue-950/30"})]}),(0,F.jsxs)(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"group relative overflow-hidden rounded-3xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 shadow-md hover:shadow-xl transition-all duration-300",children:[(0,F.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/5 to-red-500/5 dark:from-orange-900/20 dark:to-red-900/20 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,F.jsxs)("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row items-center justify-between gap-6",children:[(0,F.jsxs)("div",{className:"flex items-start gap-5",children:[(0,F.jsx)("div",{className:"h-16 w-16 shrink-0 rounded-2xl bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400 shadow-sm",children:(0,F.jsx)(bo,{className:"w-8 h-8"})}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,F.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider bg-orange-100 text-orange-700 dark:bg-orange-950 dark:text-orange-300",children:"Adventure Mode"}),i.isCompleted&&(0,F.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider bg-green-100 text-green-700",children:"Completed"})]}),(0,F.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.isCompleted?"All Adventures Completed!":"Where you left off"}),(0,F.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-1 max-w-md",children:i.isCompleted?"You have mastered all currently available chapters. Feel free to replay any level.":(0,F.jsxs)(F.Fragment,{children:["You are currently facing challenges in"," ",(0,F.jsxs)("span",{className:"font-bold text-orange-600 dark:text-orange-400",children:["Chapter ",i.chapter,":"," ",i.title]}),". Ready to continue your journey?"]})})]})]}),(0,F.jsxs)(E,{onClick:()=>a("/play/adventure"),className:"w-full md:w-auto h-12 px-8 text-base font-bold bg-orange-600 hover:bg-orange-700 text-white rounded-xl shadow-lg shadow-orange-500/20 transition-transform active:scale-95",children:[i.isCompleted?"Replay Levels":"Resume Journey"," ",(0,F.jsx)(wt,{className:"w-5 h-5 ml-2"})]})]})]}),(0,F.jsxs)(K.div,{variants:S,initial:"hidden",animate:"visible",className:"space-y-4 pt-2",children:[(0,F.jsx)("div",{className:"flex justify-between items-end px-2",children:(0,F.jsxs)("div",{children:[(0,F.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,F.jsx)(mt,{className:"w-6 h-6 text-indigo-500"}),"Practice Arena"]}),(0,F.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"Complete challenges in order to unlock the next one."})]})}),(0,F.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-white dark:from-gray-900 dark:to-gray-900/50 rounded-[2rem] p-6 border border-gray-100 dark:border-gray-800 shadow-sm relative overflow-hidden",children:[(0,F.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),(0,F.jsx)("div",{className:"relative z-10",children:n?(0,F.jsx)("div",{className:"flex justify-center py-24",children:(0,F.jsx)(Ce,{className:"h-10 w-10 animate-spin text-indigo-500"})}):r.length>0?(0,F.jsx)(Os,{challenges:r,onSelectChallenge:w,completedChallenges:t?.completedChapters||[]}):(0,F.jsx)("div",{className:"text-center py-20 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:(0,F.jsx)("p",{className:"text-gray-500 text-lg",children:"No challenges found in the database."})})})]})]})]})}function Ka({icon:e,label:t,value:a,color:r,bgColor:o}){return(0,F.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-4 border border-gray-100 dark:border-gray-800 shadow-sm dark:hover:shadow-white hover:shadow-md flex items-center gap-4 transition-transform hover:scale-105",children:[(0,F.jsx)("div",{className:`p-3 rounded-xl ${o}`,children:(0,F.jsx)(e,{className:`w-8 h-8 ${r}`})}),(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"text-2xl font-black text-gray-900 dark:text-white",children:a}),(0,F.jsx)("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:t})]})]})}var ga=L(oe(),1);function Za(e,t){if(!e||!e.length)return;let a=Object.keys(e[0]),r=[a.join(","),...e.map(i=>a.map(l=>{let d=i[l]||"";return typeof d=="string"&&d.includes(",")&&(d=`"${d}"`),d}).join(","))].join(`
`),o=new Blob([r],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(o),s=document.createElement("a");s.setAttribute("href",n),s.setAttribute("download",`${t}_${new Date().toISOString().split("T")[0]}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}var q=L(V(),1);function Hs(){let[e,t]=(0,ga.useState)([]),[a,r]=(0,ga.useState)(!0);(0,ga.useEffect)(()=>{(async()=>{try{let{data:s,error:i}=await Z.from("match_history").select("*").order("played_at",{ascending:!1});if(i)throw i;s&&t(s)}catch(s){console.error("Error fetching match history:",s),$.error("Failed to load match history.")}finally{r(!1)}})()},[]);let o=n=>{if(!n.results||n.results.length===0){$.error("No detailed results available for this match.");return}let s=n.results.map(i=>({Rank:i.rank,"Player Name":i.name,"Total Score":i.score,Accuracy:i.accuracy,"Game Mode":n.mode,"Date Played":new Date(n.played_at).toLocaleDateString()}));Za(s,`Match_${n.mode.replace(/\s+/g,"_")}_${n.id.slice(0,4)}`),$.success(`Exported results for ${n.mode}`)};return(0,q.jsxs)(ee,{className:"border-gray-200 dark:border-gray-800",children:[(0,q.jsxs)(ge,{children:[(0,q.jsx)(pe,{children:"Multiplayer Match History"}),(0,q.jsx)(ut,{children:"Review past game sessions and export results."})]}),(0,q.jsx)(de,{children:(0,q.jsx)("div",{className:"rounded-md border border-gray-200 dark:border-gray-800 overflow-hidden",children:(0,q.jsx)("div",{className:"overflow-x-auto",children:(0,q.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,q.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800 font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700",children:(0,q.jsxs)("tr",{children:[(0,q.jsx)("th",{className:"p-4",children:"Game Session"}),(0,q.jsx)("th",{className:"p-4",children:"Date & Time"}),(0,q.jsx)("th",{className:"p-4",children:"Participants"}),(0,q.jsx)("th",{className:"p-4",children:"Winner"}),(0,q.jsx)("th",{className:"p-4 text-right",children:"Actions"})]})}),(0,q.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800 bg-white dark:bg-gray-900",children:a?(0,q.jsx)("tr",{children:(0,q.jsxs)("td",{colSpan:5,className:"p-12 text-center",children:[(0,q.jsx)(Ce,{className:"animate-spin mx-auto w-8 h-8 text-indigo-500"}),(0,q.jsx)("p",{className:"text-gray-500 mt-2",children:"Loading matches..."})]})}):e.length===0?(0,q.jsx)("tr",{children:(0,q.jsx)("td",{colSpan:5,className:"p-12 text-center text-gray-500",children:(0,q.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,q.jsx)(io,{className:"w-8 h-8 opacity-20"}),(0,q.jsx)("p",{children:"No matches found."})]})})}):e.map(n=>(0,q.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[(0,q.jsx)("td",{className:"p-4",children:(0,q.jsxs)("div",{className:"flex items-center gap-3",children:[(0,q.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg text-purple-600",children:(0,q.jsx)(va,{className:"w-5 h-5"})}),(0,q.jsxs)("div",{children:[(0,q.jsx)("div",{className:"font-bold text-gray-900 dark:text-white",children:n.mode}),(0,q.jsxs)("div",{className:"text-xs text-gray-500 font-mono",children:["ID: ",n.id.slice(0,8),"..."]})]})]})}),(0,q.jsx)("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:(0,q.jsxs)("div",{className:"flex items-center gap-2",children:[(0,q.jsx)(Nt,{className:"w-4 h-4"}),new Date(n.played_at).toLocaleDateString(),(0,q.jsxs)("span",{className:"text-xs opacity-70",children:["(",new Date(n.played_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),")"]})]})}),(0,q.jsx)("td",{className:"p-4",children:(0,q.jsxs)("div",{className:"flex items-center gap-2",children:[(0,q.jsx)(Ca,{className:"w-4 h-4 text-gray-400"}),(0,q.jsxs)("span",{children:[n.participants_count," Players"]})]})}),(0,q.jsx)("td",{className:"p-4",children:n.winner_name?(0,q.jsxs)(ye,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 gap-1",children:[(0,q.jsx)(ot,{className:"w-3 h-3"})," ",n.winner_name]}):(0,q.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})}),(0,q.jsx)("td",{className:"p-4 text-right",children:(0,q.jsxs)(E,{size:"sm",variant:"outline",onClick:()=>o(n),className:"gap-2",children:[(0,q.jsx)(ba,{className:"w-4 h-4"})," Results"]})})]},n.id))})]})})})})]})}var ie=L(V(),1);function zs(){let e=Vt(),{user:t}=Le(),a=t?.level||1,r=[{id:"adventure",title:"C# Adventures",description:"Your main journey. Master C# concepts step-by-step through interactive lessons and mini-games.",icon:ms,color:"text-emerald-500",bgColor:"bg-emerald-500/10",borderColor:"hover:border-emerald-500/50",route:"/play/adventure",minLevel:1},{id:"multiplayer",title:"Multiplayer Arena",description:"Compete with peers in real-time coding battles. Prove your speed and accuracy.",icon:Ca,color:"text-indigo-500",bgColor:"bg-indigo-500/10",borderColor:"hover:border-indigo-500/50",route:"/play/multiplayer",minLevel:5},{id:"challenges",title:"C#allenges",description:"Test your logic with raw machine problems. No hand-holding, just code.",icon:mt,color:"text-orange-500",bgColor:"bg-orange-500/10",borderColor:"hover:border-orange-500/50",route:"/play/challenges",minLevel:1}];return(0,ie.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8 pb-12 pt-4 px-4",children:[(0,ie.jsx)(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-8",children:(0,ie.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ie.jsx)("div",{className:"p-3 bg-indigo-600 rounded-xl shadow-lg shadow-indigo-600/20",children:(0,ie.jsx)(Ha,{className:"w-10 h-10 text-white"})}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h1",{className:"text-3xl font-black tracking-tight text-foreground",children:"Game Center"}),(0,ie.jsx)("p",{className:"text-muted-foreground",children:"Choose your path and level up your skills."})]})]})}),(0,ie.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.map((o,n)=>{let s=a<o.minLevel;return(0,ie.jsx)(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1},className:"h-full",children:(0,ie.jsxs)(ee,{className:W("h-full relative overflow-hidden transition-all duration-300 border-2",s?"opacity-80 grayscale-[0.5] border-dashed":`cursor-pointer hover:shadow-xl hover:-translate-y-1 ${o.borderColor}`),onClick:()=>!s&&e(o.route),children:[s&&(0,ie.jsxs)("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-[1px] z-20 flex flex-col items-center justify-center text-center p-6",children:[(0,ie.jsx)("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-3",children:(0,ie.jsx)(at,{className:"w-6 h-6 text-muted-foreground"})}),(0,ie.jsx)("p",{className:"font-bold text-foreground",children:"Locked"}),(0,ie.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Reach Level ",o.minLevel," to unlock"]})]}),(0,ie.jsx)("div",{className:W("absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl -mr-16 -mt-16 opacity-20",o.color.replace("text-","bg-"))}),(0,ie.jsxs)(ge,{children:[(0,ie.jsx)("div",{className:W("w-14 h-14 rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110",o.bgColor),children:(0,ie.jsx)(o.icon,{className:W("w-10 h-10",o.color)})}),(0,ie.jsxs)(pe,{className:"text-xl flex items-center justify-between",children:[o.title,!s&&o.id==="adventure"&&(0,ie.jsx)(ye,{variant:"secondary",className:"text-[10px] bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"RECOMMENDED"})]})]}),(0,ie.jsxs)(de,{className:"space-y-6",children:[(0,ie.jsx)("p",{className:"text-muted-foreground text-sm leading-relaxed min-h-[60px]",children:o.description}),(0,ie.jsxs)(E,{variant:s?"outline":"default",className:W("w-full justify-between group",!s&&"bg-foreground text-background hover:bg-foreground/90"),disabled:s,children:[s?"Locked":"Play Now",!s&&(0,ie.jsx)(wt,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]})},o.id)})}),(0,ie.jsx)("div",{className:"mt-8",children:(0,ie.jsx)(Hs,{})})]})}var Oe=L(oe(),1);var u=L(V(),1),js=[{name:"Novice",minXp:0,color:"text-gray-500"},{name:"Bronze",minXp:500,color:"text-orange-600"},{name:"Silver",minXp:2e3,color:"text-slate-400"},{name:"Gold",minXp:5e3,color:"text-yellow-500"},{name:"Platinum",minXp:1e4,color:"text-cyan-400"},{name:"Diamond",minXp:25e3,color:"text-indigo-400"}],Gi=["ALL","BSCS","BSIS","BSAIS","ACT"],Ja=[{id:"MULTIPLAYER",label:"Multiplayer",icon:gt},{id:"CHALLENGES",label:"Challenges",icon:_t},{id:"ADVENTURE",label:"Adventure",icon:Bt}],$s="codeon_leaderboard_cache",Yi=e=>new Promise(t=>setTimeout(t,e)),Hr=e=>{if(!e&&e!==0)return"--:--";let t=Math.floor(e/60),a=Math.round(e%60);return`${t}:${a.toString().padStart(2,"0")}`};function Gs(){let{user:e,updateProfile:t}=Le(),[a,r]=(0,Oe.useState)(null),[o,n]=(0,Oe.useState)("ALL"),[s,i]=(0,Oe.useState)("MULTIPLAYER"),[l,d]=(0,Oe.useState)(()=>{if(typeof window<"u"){let y=localStorage.getItem($s);if(y)try{return JSON.parse(y)}catch{}}return[]}),[p,m]=(0,Oe.useState)(l.length===0),g=(0,Oe.useCallback)(async(y=!1)=>{y||m(!0);let B=0,O=3,M=!1;for(;B<O&&!M;)try{let H=Z.from("users").select("*");s==="MULTIPLAYER"?H=H.order("trophies",{ascending:!1}):s==="CHALLENGES"?H=H.order("stars",{ascending:!1}):s==="ADVENTURE"&&(H=H.gt("total_runtime",0).order("total_runtime",{ascending:!0}));let{data:X,error:Y}=await H.limit(100);if(Y)throw Y;let te=(X||[]).map(v=>({id:v.id,displayName:v.display_name||"Anonymous User",photoURL:v.photo_url||null,xp:v.xp||0,level:v.level||1,trophies:v.trophies||0,league:v.league||"Novice",avatarConfig:v.avatar_config||null,joinedAt:v.joined_at,badges:v.badges||[],streaks:v.streaks||0,section:v.section,stars:v.stars||0,totalRuntime:v.total_runtime}));d(te),localStorage.setItem($s,JSON.stringify(te)),M=!0}catch(H){console.error("Fetch error:",H),B++,B<O&&await Yi(1e3)}y||m(!1)},[s]);(0,Oe.useEffect)(()=>{g(!1);let y=()=>{setTimeout(()=>{document.visibilityState==="visible"&&g(!0)},500)};return window.addEventListener("focus",y),()=>window.removeEventListener("focus",y)},[g]),(0,Oe.useEffect)(()=>{e&&l.length>0&&d(y=>{let B=y.findIndex(O=>O.id===e.uid);if(B!==-1&&(y[B].xp!==e.xp||y[B].level!==e.level)){let O=[...y];return O[B]={...O[B],xp:e.xp||0,level:e.level||1,league:js.slice().reverse().find(M=>(e.xp||0)>=M.minXp)?.name||""},O}return y})},[e]),(0,Oe.useEffect)(()=>{if(e?.xp){let y=Wo(e.xp);e.league!==y&&t({league:y})}},[e?.xp,e?.league,t]);let x=(0,Oe.useMemo)(()=>o==="ALL"?l:l.filter(y=>y.section?.toUpperCase().includes(o)),[l,o]),c=x.slice(0,3),w=x.slice(3),S=x.findIndex(y=>y.id===e?.uid),b=S!==-1?x[S]:null,k={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},T={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},_=Ja.find(y=>y.id===s)?.icon||gt;return(0,u.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8 pb-12",children:[(0,u.jsxs)(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center relative",children:[(0,u.jsx)(gt,{className:"w-20 h-20 text-yellow-500 mx-auto drop-shadow-lg"}),(0,u.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900 dark:text-white mt-4 font-pixelify tracking-wide",children:"Hall of Champions"}),(0,u.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3 mt-4 relative z-20",children:[(0,u.jsx)(Vo,{delayDuration:0,children:(0,u.jsxs)(Go,{children:[(0,u.jsx)(Yo,{asChild:!0,children:(0,u.jsx)("div",{className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-help",children:(0,u.jsx)(xa,{className:"w-5 h-5 text-gray-400 hover:text-indigo-500"})})}),(0,u.jsx)(qo,{side:"bottom",className:"p-4 bg-white dark:bg-gray-950 border-gray-200 dark:border-gray-800 shadow-xl rounded-2xl w-64",children:(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 border-b pb-2 mb-2 dark:border-gray-800",children:[(0,u.jsx)(At,{className:"w-4 h-4 text-indigo-500"}),(0,u.jsx)("h4",{className:"font-bold text-sm",children:"League System"})]}),(0,u.jsx)("div",{className:"space-y-2",children:js.map(y=>(0,u.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,u.jsx)("span",{className:`font-bold ${y.color}`,children:y.name}),(0,u.jsxs)("span",{className:"text-muted-foreground font-mono",children:[y.minXp.toLocaleString(),"+ XP"]})]},y.name))})]})})]})}),(0,u.jsxs)(Ge,{children:[(0,u.jsx)(Ye,{asChild:!0,children:(0,u.jsxs)(E,{variant:"outline",className:"h-9 rounded-full px-4 border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 text-sm font-semibold shadow-sm hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,u.jsx)(va,{className:"w-3.5 h-3.5 mr-2 text-orange-500"}),Ja.find(y=>y.id===s)?.label,(0,u.jsx)(gr,{className:"w-3.5 h-3.5 ml-2 opacity-50"})]})}),(0,u.jsx)(qe,{align:"center",className:"w-40",children:Ja.map(y=>(0,u.jsxs)(_e,{onClick:()=>i(y.id),className:`cursor-pointer font-medium ${s===y.id?"text-orange-600 bg-orange-50 dark:bg-orange-950/30":""}`,children:[(0,u.jsx)(y.icon,{className:"w-4 h-4 mr-2"}),y.label]},y.id))})]}),(0,u.jsxs)(Ge,{children:[(0,u.jsx)(Ye,{asChild:!0,children:(0,u.jsxs)(E,{variant:"outline",className:"h-9 rounded-full px-4 border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 text-sm font-semibold shadow-sm hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,u.jsx)(ha,{className:"w-3.5 h-3.5 mr-2 text-indigo-500"}),o==="ALL"?"All Sections":o,(0,u.jsx)(gr,{className:"w-3.5 h-3.5 ml-2 opacity-50"})]})}),(0,u.jsx)(qe,{align:"center",className:"w-40",children:Gi.map(y=>(0,u.jsx)(_e,{onClick:()=>n(y),className:`cursor-pointer font-medium ${o===y?"text-indigo-600 bg-indigo-50 dark:bg-indigo-950/30":""}`,children:y==="ALL"?"All Sections":y},y))})]})]}),(0,u.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:["Ranked by ",Ja.find(y=>y.id===s)?.label]})]}),p&&(0,u.jsx)(Xi,{}),!p&&x.length>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(K.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-4",variants:k,initial:"hidden",animate:"visible",children:[(0,u.jsx)(K.div,{variants:T,className:"md:mt-8 order-2 md:order-1",children:c[1]&&(0,u.jsx)(Ur,{user:c[1],rank:2,onClick:()=>r(c[1]),gamemode:s})}),(0,u.jsx)(K.div,{variants:T,className:"order-1 md:order-2",children:c[0]&&(0,u.jsx)(Ur,{user:c[0],rank:1,onClick:()=>r(c[0]),gamemode:s})}),(0,u.jsx)(K.div,{variants:T,className:"md:mt-8 order-3",children:c[2]&&(0,u.jsx)(Ur,{user:c[2],rank:3,onClick:()=>r(c[2]),gamemode:s})})]}),(0,u.jsx)(K.div,{className:"space-y-3",variants:k,initial:"hidden",animate:"visible",children:w.map((y,B)=>(0,u.jsx)(K.div,{variants:T,children:(0,u.jsx)(Vs,{user:y,rank:B+4,isCurrentUser:y.id===e?.uid,onClick:()=>r(y),gamemode:s})},y.id))})]}),!p&&x.length===0&&(0,u.jsxs)(ee,{className:"p-12 text-center bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800 shadow-sm rounded-3xl",children:[(0,u.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,u.jsx)(_,{className:"w-8 h-8 text-gray-400"})}),(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"No Champions Found"}),(0,u.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"No one matches the current filters yet."})]}),b&&(0,u.jsx)(K.div,{className:"sticky bottom-6 z-20",initial:{opacity:0,y:100},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:100},children:(0,u.jsx)("div",{className:"mx-4 md:mx-0 shadow-2xl rounded-xl",children:(0,u.jsx)(Vs,{user:b,rank:S+1,isCurrentUser:!0,isSticky:!0,onClick:()=>r(b),gamemode:s})})}),(0,u.jsx)(qi,{user:a,onClose:()=>r(null)})]})}function qi({user:e,onClose:t}){return e?(0,u.jsx)(fe,{open:!!e,onOpenChange:a=>!a&&t(),children:(0,u.jsxs)(be,{className:"sm:max-w-md bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800 p-0 overflow-hidden rounded-3xl",children:[(0,u.jsx)(ve,{className:"p-6 pb-0",children:(0,u.jsx)(xe,{className:"text-center text-xl font-bold font-pixelify",children:"Player Card"})}),(0,u.jsxs)("div",{className:"flex flex-col items-center p-6 space-y-6",children:[(0,u.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-indigo-500 bg-gray-100 dark:bg-gray-800 shadow-xl relative",children:(0,u.jsx)(Dt,{config:e.avatarConfig,headOnly:!0})}),(0,u.jsxs)("div",{className:"text-center space-y-1",children:[(0,u.jsx)("h2",{className:"text-2xl font-black text-gray-900 dark:text-white",children:e.displayName}),(0,u.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500 font-medium",children:[(0,u.jsxs)("span",{className:"uppercase tracking-wider",children:[e.league," League"]}),(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsxs)("span",{className:"text-indigo-500",children:["Lvl ",e.level]}),e.section&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsx)("span",{className:"font-bold text-gray-600 dark:text-gray-400",children:e.section})]})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-3 gap-3 w-full",children:[(0,u.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-2xl flex flex-col items-center justify-center gap-1 border border-gray-100 dark:border-gray-700",children:[(0,u.jsx)(gt,{className:"w-8 h-8 text-yellow-500"}),(0,u.jsx)("span",{className:"text-lg font-bold",children:e.trophies}),(0,u.jsx)("span",{className:"text-[10px] uppercase text-gray-400 font-bold",children:"Trophies"})]}),(0,u.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-2xl flex flex-col items-center justify-center gap-1 border border-gray-100 dark:border-gray-700",children:[(0,u.jsx)(_t,{className:"w-8 h-8 text-yellow-400"}),(0,u.jsx)("span",{className:"text-lg font-bold",children:e.stars||0}),(0,u.jsx)("span",{className:"text-[10px] uppercase text-gray-400 font-bold",children:"Stars"})]}),(0,u.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-2xl flex flex-col items-center justify-center gap-1 border border-gray-100 dark:border-gray-700",children:[(0,u.jsx)(Bt,{className:"w-8 h-8 text-blue-500"}),(0,u.jsx)("span",{className:"text-lg font-bold",children:e.totalRuntime?Hr(e.totalRuntime):"--"}),(0,u.jsx)("span",{className:"text-[10px] uppercase text-gray-400 font-bold",children:"Total Run Time"})]})]}),(0,u.jsxs)("div",{className:"w-full space-y-3",children:[(0,u.jsx)("div",{className:"text-sm font-bold uppercase text-gray-400 tracking-wider ml-1",children:"Badges Earned"}),e.badges&&e.badges.length>0?(0,u.jsx)("div",{className:"flex flex-wrap gap-2",children:e.badges.map((a,r)=>(0,u.jsx)(ye,{variant:"secondary",className:"px-3 py-1 text-xs",children:a},r))}):(0,u.jsx)("div",{className:"text-sm text-gray-400 italic bg-gray-50 dark:bg-gray-800/50 p-3 rounded-xl text-center",children:"No badges earned yet."})]}),e.joinedAt&&(0,u.jsxs)("div",{className:"flex items-center text-xs text-gray-400 gap-1 pt-2",children:[(0,u.jsx)(Nt,{className:"w-3 h-3"}),"Joined ",new Date(e.joinedAt).toLocaleDateString()]})]})]})}):null}function Ur({user:e,rank:t,onClick:a,gamemode:r}){let o=t===1,n=t===2,s=t===3,i=()=>{if(r==="MULTIPLAYER")return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(gt,{className:`w-5 h-5 ${o?"text-yellow-400":"text-gray-300"}`}),e.trophies]});if(r==="CHALLENGES")return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(_t,{className:"w-5 h-5 text-yellow-400"}),e.stars||0]});if(r==="ADVENTURE")return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Bt,{className:"w-5 h-5 text-blue-400"}),(0,u.jsx)("span",{className:"text-lg",children:e.totalRuntime?Hr(e.totalRuntime):"--"})]})};return(0,u.jsxs)("div",{onClick:a,className:`relative rounded-3xl p-6 flex flex-col items-center text-center shadow-lg transition-all hover:scale-[1.03] cursor-pointer group
      ${o?"bg-gradient-to-b from-yellow-50 to-white dark:from-yellow-900/20 dark:to-gray-900 border-2 border-yellow-400":""}
      ${n?"bg-gradient-to-b from-gray-50 to-white dark:from-gray-800/40 dark:to-gray-900 border border-gray-300 dark:border-gray-600":""}
      ${s?"bg-gradient-to-b from-orange-50 to-white dark:from-orange-900/20 dark:to-gray-900 border border-orange-300 dark:border-orange-700":""}
    `,children:[(0,u.jsx)("div",{className:`absolute -top-6 w-12 h-12 rounded-full flex items-center justify-center border-4 shadow-md z-10
        ${o?"bg-yellow-400 border-white dark:border-gray-900":""}
        ${n?"bg-gray-300 border-white dark:border-gray-900":""}
        ${s?"bg-orange-500 border-white dark:border-gray-900":""}
      `,children:o?(0,u.jsx)(rs,{className:"w-8 h-8 text-white fill-current"}):n?(0,u.jsx)(os,{className:"w-8 h-8 text-white fill-current"}):s?(0,u.jsx)(ss,{className:"w-8 h-8 text-white fill-current"}):null}),(0,u.jsx)("div",{className:`mt-6 w-24 h-24 rounded-full overflow-hidden border-4 bg-gray-100 dark:bg-gray-800 flex-shrink-0 relative transition-transform group-hover:scale-105
          ${o?"border-yellow-400 ring-4 ring-yellow-400/20":"border-gray-200 dark:border-gray-700"}
      `,children:(0,u.jsx)(Dt,{config:e.avatarConfig,headOnly:!0})}),(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mt-4 truncate w-full px-2 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:e.displayName}),(0,u.jsxs)("div",{className:"flex flex-col items-center mt-1 space-y-1",children:[(0,u.jsx)("span",{className:"px-2 py-0.5 rounded-md bg-gray-100 dark:bg-gray-800 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:e.league}),(0,u.jsxs)("span",{className:"text-xs text-indigo-500 font-semibold",children:["Level ",e.level]}),e.section&&(0,u.jsx)("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:e.section})]}),(0,u.jsx)("div",{className:"mt-4 bg-gray-900 dark:bg-white/10 rounded-xl px-4 py-2 text-xl font-black text-white flex items-center gap-2 shadow-inner",children:i()})]})}function Vs({user:e,rank:t,isCurrentUser:a,isSticky:r=!1,onClick:o,gamemode:n}){let s="bg-white dark:bg-gray-900",i="border-gray-100 dark:border-gray-800",l="";a&&(t===1?(s="bg-yellow-50 dark:bg-yellow-900",i="border-yellow-400",l="ring-2 ring-yellow-400 ring-offset-2 dark:ring-offset-gray-900"):t===2?(s="bg-gray-100 dark:bg-gray-800",i="border-gray-400",l="ring-2 ring-gray-400 ring-offset-2 dark:ring-offset-gray-900"):t===3?(s="bg-orange-50 dark:bg-orange-900",i="border-orange-400",l="ring-2 ring-orange-400 ring-offset-2 dark:ring-offset-gray-900"):(s="bg-indigo-50 dark:bg-indigo-950",i="border-indigo-200 dark:border-indigo-800"));let d=()=>{if(n==="MULTIPLAYER")return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(gt,{className:"w-4 h-4 text-yellow-500 fill-current"}),e.trophies]});if(n==="CHALLENGES")return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(_t,{className:"w-4 h-4 text-yellow-500 fill-current"}),e.stars||0]});if(n==="ADVENTURE")return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Bt,{className:"w-4 h-4 text-blue-500"}),e.totalRuntime?Hr(e.totalRuntime):"--"]})};return(0,u.jsxs)("div",{onClick:o,className:`flex items-center p-4 rounded-xl transition-all border cursor-pointer hover:shadow-md hover:scale-[1.01] active:scale-[0.99]
      ${s} ${i} ${l}
      ${r?"shadow-2xl":"shadow-sm"}
    `,children:[(0,u.jsxs)("div",{className:`w-10 text-center text-lg font-black italic ${t<=3?"text-gray-900 dark:text-white scale-110":"text-gray-400 dark:text-gray-500"}`,children:["#",t]}),(0,u.jsxs)("div",{className:"flex-1 flex items-center gap-3 ml-3 overflow-hidden",children:[(0,u.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800 flex-shrink-0 relative",children:(0,u.jsx)(Dt,{config:e.avatarConfig,headOnly:!0})}),(0,u.jsxs)("div",{className:"min-w-0",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsxs)("div",{className:"text-sm font-bold text-gray-900 dark:text-white truncate hover:text-indigo-500 transition-colors",children:[e.displayName," ",a&&"(You)"]}),t===1&&(0,u.jsx)(qt,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),(0,u.jsxs)("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 gap-2",children:[(0,u.jsx)("span",{className:"font-semibold text-indigo-500",children:e.league}),(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsxs)("span",{children:["Lvl ",e.level]}),e.section&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsx)("span",{className:"uppercase font-bold tracking-wide",children:e.section})]})]})]})]}),(0,u.jsx)("div",{className:"text-right pl-2",children:(0,u.jsx)("div",{className:`flex items-center justify-end gap-1.5 text-base font-black ${a?"text-indigo-700 dark:text-indigo-300":"text-gray-900 dark:text-white"}`,children:d()})})]})}function Xi(){return(0,u.jsxs)("div",{className:"space-y-8",children:[(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,u.jsxs)("div",{className:`p-6 rounded-3xl border border-gray-200 dark:border-gray-800 flex flex-col items-center ${e!==2?"md:mt-8":""}`,children:[(0,u.jsx)(J,{className:"w-20 h-20 rounded-full"}),(0,u.jsx)(J,{className:"h-6 w-3/4 mt-4"}),(0,u.jsx)(J,{className:"h-4 w-1/3 mt-2"}),(0,u.jsx)(J,{className:"h-10 w-1/2 mt-4 rounded-xl"})]},e))}),(0,u.jsx)("div",{className:"space-y-3",children:[...Array(5)].map((e,t)=>(0,u.jsxs)("div",{className:"flex items-center p-4 rounded-xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800",children:[(0,u.jsx)(J,{className:"h-6 w-8 rounded"}),(0,u.jsx)(J,{className:"w-10 h-10 rounded-full ml-3"}),(0,u.jsxs)("div",{className:"flex-1 ml-3 space-y-2",children:[(0,u.jsx)(J,{className:"h-4 w-1/3"}),(0,u.jsx)(J,{className:"h-3 w-1/4"})]}),(0,u.jsx)(J,{className:"h-6 w-16 rounded"})]},t))})]})}var Ys=L(oe(),1);var U=L(V(),1),Qi=[{id:1,title:"Syntax Slayer",description:"Complete 2 C# Challenges with 100% accuracy",current:1,target:2,reward:20,icon:br,color:"text-red-500",bgColor:"bg-red-500/10",status:"in-progress"},{id:2,title:"Bug Hunter",description:"Fix 5 syntax errors in the playground",current:5,target:5,reward:50,icon:po,color:"text-orange-500",bgColor:"bg-orange-500/10",status:"ready-to-claim"},{id:3,title:"Runtime Runner",description:"Spend 15 minutes coding today",current:15,target:15,reward:30,icon:hr,color:"text-blue-500",bgColor:"bg-blue-500/10",status:"claimed"}],Wi=[{id:"a1",name:"First Compilation",desc:"Run your first code",icon:ka,unlocked:!0},{id:"a2",name:"Week Warrior",desc:"7 Day Streak",icon:He,unlocked:!0},{id:"a3",name:"Code Ninja",desc:"Solve a Hard challenge",icon:br,unlocked:!1},{id:"a4",name:"Polyglot",desc:"Try 3 different languages",icon:mt,unlocked:!1},{id:"a5",name:"Millionaire",desc:"Earn 1,000 Coins",icon:ot,unlocked:!1}];function qs(){let{user:e}=Le(),[t,a]=(0,Ys.useState)(Qi),r=o=>{a(n=>n.map(s=>s.id===o?{...s,status:"claimed"}:s))};return(0,U.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8 pb-12 font-pixelify",children:[(0,U.jsxs)(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[(0,U.jsxs)("div",{className:"flex items-center gap-3",children:[(0,U.jsx)(za,{className:"w-8 h-8 text-indigo-500"}),(0,U.jsxs)("div",{children:[(0,U.jsx)("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Quest Board"}),(0,U.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Complete tasks to earn rewards and glory."})]})]}),(0,U.jsxs)("div",{className:"hidden md:flex items-center gap-2 bg-indigo-100 dark:bg-indigo-900/30 px-4 py-2 rounded-full text-indigo-600 dark:text-indigo-400 font-bold text-sm",children:[(0,U.jsx)(hr,{className:"w-4 h-4"}),(0,U.jsx)("span",{children:"Resets in 12h 30m"})]})]}),(0,U.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,U.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,U.jsxs)(K.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 shadow-xl",children:[(0,U.jsx)("div",{className:"absolute top-0 right-0 -mr-10 -mt-10 h-40 w-40 bg-white/10 rounded-full blur-3xl"}),(0,U.jsxs)("div",{className:"relative z-10 flex items-center gap-6",children:[(0,U.jsx)("div",{className:"h-20 w-20 bg-white/20 rounded-full flex items-center justify-center border-4 border-white/30 shadow-inner shrink-0",children:(0,U.jsx)(ot,{className:"w-10 h-10 text-yellow-300 fill-current"})}),(0,U.jsxs)("div",{className:"flex-1",children:[(0,U.jsx)("h3",{className:"text-xl font-bold mb-1",children:"November Challenger"}),(0,U.jsx)("p",{className:"text-purple-100 text-sm mb-3",children:"Complete 30 quests this month to unlock this exclusive badge!"}),(0,U.jsxs)("div",{className:"flex items-center gap-3",children:[(0,U.jsx)(ea,{value:45,className:"h-3 bg-black/20",indicatorClassName:"bg-yellow-400"}),(0,U.jsx)("span",{className:"text-sm font-bold font-mono",children:"14/30"})]})]})]})]}),(0,U.jsxs)("div",{className:"space-y-4",children:[(0,U.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,U.jsx)(He,{className:"w-5 h-5 text-yellow-500 fill-current"}),"Daily Quests"]}),(0,U.jsx)("div",{className:"grid gap-4",children:t.map((o,n)=>(0,U.jsx)(Ki,{quest:o,onClaim:r,index:n},o.id))})]})]}),(0,U.jsx)("div",{className:"space-y-6",children:(0,U.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-3xl p-6 border border-gray-100 dark:border-gray-800 shadow-sm",children:[(0,U.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,U.jsx)(ot,{className:"w-5 h-5 text-orange-500"}),"Lifetime Achievements"]}),(0,U.jsx)("div",{className:"grid grid-cols-3 gap-4",children:Wi.map(o=>(0,U.jsx)(Zi,{achievement:o},o.id))}),(0,U.jsx)(E,{variant:"ghost",className:"w-full mt-6 text-indigo-500 hover:text-indigo-600",children:"View All"})]})})]})]})}function Ki({quest:e,onClaim:t,index:a}){let r=e.icon,o=e.status==="claimed",n=e.status==="ready-to-claim";return(0,U.jsxs)(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},className:W("flex items-center gap-4 p-4 rounded-2xl border-2 transition-all duration-300",o?"bg-gray-50 dark:bg-gray-900 border-gray-100 dark:border-gray-800 opacity-60 grayscale-[0.5]":"bg-white dark:bg-gray-900 border-gray-100 dark:border-gray-700 shadow-sm hover:border-indigo-200 dark:hover:border-indigo-800"),children:[(0,U.jsx)("div",{className:W("w-14 h-14 rounded-xl flex items-center justify-center shrink-0",e.bgColor),children:(0,U.jsx)(r,{className:W("w-7 h-7",e.color)})}),(0,U.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,U.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,U.jsx)("h4",{className:W("font-bold text-lg truncate",o&&"line-through"),children:e.title}),(0,U.jsxs)("span",{className:"text-xs font-bold text-gray-400 font-mono",children:[e.current,"/",e.target]})]}),(0,U.jsx)("div",{className:"mb-1 text-sm text-gray-500 dark:text-gray-400 truncate",children:e.description}),(0,U.jsx)(ea,{value:e.current/e.target*100,className:"h-2.5 rounded-full bg-gray-100 dark:bg-gray-800",indicatorClassName:o?"bg-gray-400":"bg-green-500"})]}),(0,U.jsx)("div",{className:"shrink-0 w-24 flex justify-end",children:n?(0,U.jsx)(K.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:1.5},children:(0,U.jsxs)(E,{onClick:()=>t(e.id),className:"bg-yellow-400 hover:bg-yellow-500 text-yellow-950 font-bold shadow-lg shadow-yellow-400/20",children:[(0,U.jsx)(vo,{className:"w-4 h-4 mr-2"}),"Claim"]})}):o?(0,U.jsxs)("div",{className:"flex flex-col items-center text-green-500 font-bold text-xs",children:[(0,U.jsx)(Gt,{className:"w-6 h-6 mb-1"}),"Done"]}):(0,U.jsxs)("div",{className:"flex flex-col items-center text-gray-400 font-bold text-xs",children:[(0,U.jsx)("span",{className:"text-base",children:e.reward}),(0,U.jsx)("span",{children:"XP"})]})})]})}function Zi({achievement:e}){let t=e.icon;return(0,U.jsxs)("div",{className:"flex flex-col items-center text-center gap-2 group",children:[(0,U.jsx)("div",{className:W("w-16 h-16 rounded-2xl flex items-center justify-center border-b-4 transition-all duration-300",e.unlocked?"bg-gradient-to-br from-indigo-400 to-purple-500 text-white border-purple-700 shadow-lg group-hover:-translate-y-1":"bg-gray-100 dark:bg-gray-800 text-gray-400 border-gray-300 dark:border-gray-700"),children:e.unlocked?(0,U.jsx)(t,{className:"w-8 h-8"}):(0,U.jsx)(at,{className:"w-6 h-6"})}),(0,U.jsx)("span",{className:W("text-xs font-bold leading-tight",e.unlocked?"text-gray-900 dark:text-white":"text-gray-400"),children:e.name})]})}var Rt=L(oe(),1);var zr={3:{coins:50,title:"3-Day Spark"},7:{coins:100,badge:"week-warrior",title:"Week Warrior"},14:{coins:250,title:"Fortnight Fighter"},30:{coins:500,badge:"consistency-king",title:"Consistency King"},100:{coins:1e3,badge:"century-club",title:"Century Club"}},ta=(e=0)=>{let t=new Date;return e!==0&&t.setDate(t.getDate()+e),new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Manila",year:"numeric",month:"2-digit",day:"2-digit"}).format(t)},Ji=(e,t)=>{let a=new Date(e),r=new Date(t);return Math.round((r.getTime()-a.getTime())/(1e3*60*60*24))};function Qs(e){if(!e)return"BROKEN";let t=ta(),a=e.activeDates??[],r=e.frozenDates??[];if(a.includes(t))return"ACTIVE";let o=a.at(-1);if(!o)return"BROKEN";let n=ta(-1);return o===n?"ACTIVE":r.includes(n)||r.includes(n)?"FROZEN":"BROKEN"}function Ws(e){let t=ta(),a=e.activeDates??[],r=e.frozenDates??[],o=a.at(-1)??null,n={shouldUpdate:!1,status:"NONE",newStreak:e.streaks??0,newActiveDates:[...a],newFrozenDates:[...r],newCoins:e.coins??0,newFreezes:e.streakFreezes??0,newBadges:e.badges??[],messages:[]};if(o===t)return n;if(n.shouldUpdate=!0,n.newActiveDates.push(t),!o)return n.newStreak=1,n.status="FIRST",n.messages.push("\u{1F525} Streak Started!"),Xs(n);let s=Ji(o,t);if(s<=1)return n.newStreak+=1,n.status="CONTINUED",n.messages.push("\u{1F525} Streak Continued!"),Xs(n);{let i=s-1;if(n.newFreezes>=i){n.newFreezes-=i,n.newStreak+=1,n.status="FROZEN";for(let l=1;l<=i;l++){let d=ta(-l);n.newFrozenDates.includes(d)||n.newFrozenDates.push(d)}n.messages.push(`\u2744\uFE0F Streak Frozen! Used ${i} freeze(s) to save your streak.`)}else n.newStreak=1,n.status="BROKEN",n.messages.push("\u{1F494} Streak Broken. Starting fresh!")}return n}function Xs(e){let t=zr[e.newStreak];return t&&(t.badge&&e.newBadges.includes(t.badge)||(e.newCoins+=t.coins,e.messages.push(`\u{1F389} ${t.title}! +${t.coins} Coins`),t.badge&&(e.newBadges.push(t.badge),e.messages.push(`\u{1F3C5} Badge Unlocked: ${t.title}`)))),e}var N=L(V(),1),el={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Ks={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};function Zs(){let{user:e,updateProfile:t}=Le(),[a,r]=(0,Rt.useState)([]),[o,n]=(0,Rt.useState)(""),[s,i]=(0,Rt.useState)(!1),[l,d]=(0,Rt.useState)(null),[p,m]=(0,Rt.useState)({show:!1,status:"NONE",message:""}),g=e?.streaks||0,x=e?.streakFreezes||0,c=e?.activeDates||[],w=e?.frozenDates||[],S=Qs(e),b=ta(),k=c.includes(b),T=Object.entries(zr).map(([y,B])=>({days:Number(y),...B,earned:g>=Number(y)})).sort((y,B)=>y.days-B.days);(0,Rt.useEffect)(()=>{let y=new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Manila"}));n(y.toLocaleString("default",{month:"long"}));let B=y.getFullYear(),O=y.getMonth(),M=new Date(B,O,1).getDay(),H=new Date(B,O+1,0).getDate(),X=[];for(let Y=0;Y<M;Y++)X.push({isPadding:!0});for(let Y=1;Y<=H;Y++){let te=new Date(B,O,Y,12,0,0),v=new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Manila",year:"numeric",month:"2-digit",day:"2-digit"}).format(te),I=v===b;X.push({day:Y,isPadding:!1,isToday:I,isActive:c.includes(v),isFrozen:w.includes(v),isFuture:v>b})}r(X)},[g,c,w,b]);let _=async()=>{if(!(!e||s)){i(!0);try{let y=Ws(e);if(!y.shouldUpdate){alert("\u{1F4C5} You already saved your streak today!"),i(!1);return}await t({streaks:y.newStreak,activeDates:y.newActiveDates,coins:y.newCoins,streakFreezes:y.newFreezes,badges:y.newBadges,frozenDates:y.newFrozenDates}),m({show:!0,status:y.status,message:y.messages.join(" ")})}catch(y){console.error(y),alert("\u274C Failed to update streak.")}finally{i(!1)}}};return(0,N.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 pb-12",children:[(0,N.jsxs)(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between gap-3",children:[(0,N.jsxs)("div",{className:"flex items-center gap-3",children:[(0,N.jsx)(Tt,{className:"w-8 h-8 text-orange-500"}),(0,N.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900 dark:text-white",children:"Your Streak"})]}),(0,N.jsx)(E,{variant:"outline",onClick:_,disabled:s||k,className:"gap-2",children:s?"Processing...":(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(He,{className:"w-4 h-4"}),k?"Streak Saved":"Test Streak"]})})]}),(0,N.jsxs)(K.div,{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",variants:el,initial:"hidden",animate:"visible",children:[(0,N.jsxs)(K.div,{variants:Ks,className:"lg:col-span-2 space-y-6",children:[(0,N.jsx)(tl,{streak:g,visualState:S}),(0,N.jsx)(al,{month:o,days:a})]}),(0,N.jsxs)(K.div,{variants:Ks,className:"lg:col-span-1 space-y-6",children:[(0,N.jsx)(rl,{freezeCount:x}),(0,N.jsx)(ol,{milestones:T,onViewMilestone:d})]})]}),(0,N.jsx)(fe,{open:p.show,onOpenChange:y=>!y&&m(B=>({...B,show:!1})),children:(0,N.jsx)(be,{className:"sm:max-w-sm text-center",children:(0,N.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[p.status==="FROZEN"&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"w-24 h-24 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mb-2 animate-bounce",children:(0,N.jsx)(oa,{className:"w-12 h-12 text-blue-500"})}),(0,N.jsx)("h2",{className:"text-2xl font-black text-blue-600 dark:text-blue-400",children:"Streak Frozen!"}),(0,N.jsxs)("p",{className:"text-gray-600 dark:text-gray-300",children:["You missed a day, but your"," ",(0,N.jsx)("span",{className:"font-bold",children:"Streak Freeze"})," saved you."]})]}),p.status==="BROKEN"&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center mb-2 grayscale",children:(0,N.jsx)(yo,{className:"w-12 h-12 text-gray-500"})}),(0,N.jsx)("h2",{className:"text-2xl font-black text-gray-700 dark:text-gray-300",children:"Streak Broken"}),(0,N.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"You missed a day without a freeze. Your streak has reset to 1."})]}),(p.status==="CONTINUED"||p.status==="FIRST")&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"w-24 h-24 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center mb-2 animate-pulse",children:(0,N.jsx)(ya,{className:"w-12 h-12 text-orange-500 fill-orange-500"})}),(0,N.jsx)("h2",{className:"text-2xl font-black text-orange-500",children:"Streak Extended!"}),(0,N.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Keep up the great work!"})]}),(0,N.jsx)(E,{className:"w-full mt-4",variant:p.status==="FROZEN"?"default":p.status==="BROKEN"?"secondary":"default",onClick:()=>m(y=>({...y,show:!1})),children:"Continue"})]})})}),(0,N.jsx)(fe,{open:!!l,onOpenChange:y=>!y&&d(null),children:(0,N.jsxs)(be,{className:"sm:max-w-sm text-center",children:[(0,N.jsxs)(ve,{children:[(0,N.jsxs)(xe,{className:"text-2xl font-bold flex flex-col items-center gap-2",children:[(0,N.jsx)("div",{className:"p-4 bg-yellow-100 dark:bg-yellow-900/30 rounded-full mb-2",children:(0,N.jsx)(sl,{className:"w-12 h-12 text-yellow-500"})}),l?.title]}),(0,N.jsxs)(De,{className:"text-center text-lg",children:["You hit a ",l?.days," day streak!"]})]}),(0,N.jsx)("div",{className:"py-6 space-y-4",children:(0,N.jsxs)("div",{className:"flex items-center justify-center gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700",children:[(0,N.jsxs)("div",{className:"flex flex-col items-center",children:[(0,N.jsx)("span",{className:"text-xs uppercase font-bold text-gray-400",children:"Reward"}),(0,N.jsxs)("div",{className:"flex items-center gap-2 text-xl font-black text-yellow-500",children:[(0,N.jsx)("img",{src:"/assets/icons/coinv2.png",className:"w-6 h-6",alt:"Coin"}),"+",l?.coins]})]}),l?.badge&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"w-[1px] h-10 bg-gray-300 dark:bg-gray-600"}),(0,N.jsxs)("div",{className:"flex flex-col items-center",children:[(0,N.jsx)("span",{className:"text-xs uppercase font-bold text-gray-400",children:"Badge"}),(0,N.jsxs)("div",{className:"flex items-center gap-2 text-lg font-bold text-purple-500",children:[(0,N.jsx)(At,{className:"w-5 h-5"}),"Unlocked"]})]})]})]})}),(0,N.jsx)(Se,{className:"sm:justify-center",children:(0,N.jsx)(E,{className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl",onClick:()=>d(null),children:"Awesome!"})})]})})]})}function tl({streak:e,visualState:t}){let a="bg-gray-200 dark:bg-gray-800",r="text-gray-500 dark:text-gray-400",o="text-gray-400 fill-gray-400",n="Streak Inactive",s=(0,N.jsx)(ya,{className:"w-16 h-16 drop-shadow-md"});return t==="ACTIVE"?(a="bg-gradient-to-br from-orange-400 to-red-500",r="text-white",o="text-white fill-white animate-pulse",n="\u{1F525} You're on fire!"):t==="FROZEN"?(a="bg-gradient-to-br from-blue-400 to-cyan-500",r="text-white",o="text-white fill-white",n="\u2744\uFE0F Streak Frozen",s=(0,N.jsx)(oa,{className:"w-16 h-16 drop-shadow-md text-white"})):(a="bg-gray-200 dark:bg-gray-800",r="text-gray-500 dark:text-gray-400",o="text-gray-400 fill-gray-400 grayscale",n="\u26A0\uFE0F Start a streak!"),(0,N.jsxs)(ee,{className:W("rounded-3xl shadow-lg overflow-hidden relative transition-all duration-500",a,r),children:[(0,N.jsx)("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),(0,N.jsxs)(de,{className:"p-8 flex items-center gap-6 relative z-10",children:[(0,N.jsx)("div",{className:W("p-4 rounded-full backdrop-blur-sm shadow-inner transition-all",t==="ACTIVE"||t==="FROZEN"?"bg-white/20":"bg-gray-300 dark:bg-gray-700"),children:t==="FROZEN"?s:(0,N.jsx)(ya,{className:W("w-16 h-16 drop-shadow-md transition-all",o)})}),(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{className:"text-sm font-bold uppercase tracking-wider opacity-80 mb-1",children:"Current Streak"}),(0,N.jsx)("p",{className:"text-6xl font-black drop-shadow-sm leading-none mb-2",children:e}),(0,N.jsx)("div",{className:W("inline-flex items-center px-3 py-1 rounded-full text-xs font-bold backdrop-blur-sm",t==="ACTIVE"||t==="FROZEN"?"bg-white/20":"bg-black/10"),children:n})]})]})]})}function al({month:e,days:t}){let a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return(0,N.jsxs)(ee,{className:"bg-white dark:bg-gray-900 shadow-lg border-gray-100 dark:border-gray-800 rounded-3xl",children:[(0,N.jsx)(ge,{children:(0,N.jsxs)(pe,{className:"text-2xl font-bold flex items-center justify-between",children:[(0,N.jsx)("span",{children:e}),(0,N.jsxs)("div",{className:`text-xs px-3 py-1 rounded-full font-bold flex items-center gap-1 ${t.find(r=>r.isToday)?.isActive?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-500 dark:bg-gray-800"}`,children:[t.find(r=>r.isToday)?.isActive?(0,N.jsx)(ct,{className:"w-3 h-3"}):(0,N.jsx)(Nt,{className:"w-3 h-3"}),t.find(r=>r.isToday)?.isActive?"Streak Saved":"Pending"]})]})}),(0,N.jsxs)(de,{children:[(0,N.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-3",children:a.map(r=>(0,N.jsx)("div",{className:"text-center text-[10px] font-bold text-gray-400 uppercase",children:r},r))}),(0,N.jsx)("div",{className:"grid grid-cols-7 gap-2",children:t.map((r,o)=>{let n=r.isToday&&!r.isActive;return(0,N.jsx)("div",{className:W("relative aspect-square rounded-xl flex items-center justify-center font-bold text-sm transition-all",r.isPadding&&"bg-transparent",r.isFuture&&"bg-gray-50 dark:bg-gray-800/20 text-gray-300 dark:text-gray-700",!r.isPadding&&!r.isFuture&&!r.isActive&&!r.isFrozen&&!r.isToday&&"bg-gray-100 dark:bg-gray-800/50 text-gray-400",r.isActive&&"bg-orange-500 text-white shadow-md shadow-orange-500/20 scale-105 border-2 border-white dark:border-gray-900",r.isFrozen&&"bg-blue-500 text-white shadow-md shadow-blue-500/20 border-2 border-white dark:border-gray-900",n&&"bg-transparent text-gray-900 dark:text-white border-2 border-dashed border-red-400 dark:border-red-500 animate-pulse bg-red-50 dark:bg-red-900/10",r.isToday&&r.isActive&&"ring-2 ring-offset-2 ring-orange-500 dark:ring-offset-gray-900"),children:!r.isPadding&&(0,N.jsx)("span",{children:r.day})},o)})})]})]})}function rl({freezeCount:e}){return(0,N.jsxs)(ee,{className:"bg-white dark:bg-gray-900 shadow-sm border border-gray-100 dark:border-gray-800 rounded-3xl",children:[(0,N.jsx)(ge,{className:"pb-2",children:(0,N.jsx)(pe,{className:"text-lg font-bold",children:"Power-Ups"})}),(0,N.jsxs)(de,{children:[(0,N.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-2xl border border-blue-100 dark:border-blue-900/50",children:[(0,N.jsxs)("div",{className:"flex items-center gap-3",children:[(0,N.jsx)("div",{className:"p-2 bg-white dark:bg-blue-900 rounded-xl shadow-sm",children:(0,N.jsx)(_a,{className:"w-8 h-8 text-blue-500"})}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:"font-bold text-blue-900 dark:text-blue-100",children:"Streak Freeze"}),(0,N.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-300",children:"Auto-equips on miss"})]})]}),(0,N.jsxs)("div",{className:"text-2xl font-black text-blue-600 dark:text-blue-400",children:["x",e]})]}),(0,N.jsxs)(E,{variant:"ghost",className:"w-full mt-2 text-indigo-600 hover:text-indigo-700 h-auto py-2 text-xs",children:[(0,N.jsx)(Ao,{className:"w-3 h-3 mr-1"})," Get more in Store"]})]})]})}function ol({milestones:e,onViewMilestone:t}){return(0,N.jsxs)(ee,{className:"bg-white dark:bg-gray-900 shadow-sm border border-gray-100 dark:border-gray-800 rounded-3xl",children:[(0,N.jsx)(ge,{children:(0,N.jsx)(pe,{className:"text-lg font-bold",children:"Next Goals"})}),(0,N.jsx)(de,{className:"space-y-3",children:e.map(a=>(0,N.jsxs)("div",{onClick:()=>a.earned&&t(a),className:W("flex items-center justify-between p-3 rounded-xl transition-all border",a.earned?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 cursor-pointer hover:scale-[1.02]":"bg-gray-50 dark:bg-gray-800/50 border-transparent opacity-70"),children:[(0,N.jsxs)("div",{className:"flex items-center gap-3",children:[(0,N.jsx)("div",{className:W("p-2 rounded-lg",a.earned?"bg-yellow-100 dark:bg-yellow-800 text-yellow-600 dark:text-yellow-400":"bg-gray-200 dark:bg-gray-700 text-gray-400"),children:a.earned?(0,N.jsx)(qt,{className:"w-5 h-5"}):(0,N.jsx)(at,{className:"w-5 h-5"})}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:W("font-bold text-sm",a.earned?"text-yellow-900 dark:text-yellow-100":"text-gray-500"),children:[a.days,"-Day Streak"]}),a.earned&&(0,N.jsx)("div",{className:"text-[10px] font-bold text-yellow-600 uppercase",children:"Completed"})]})]}),(0,N.jsxs)("div",{className:"flex items-center gap-1 bg-white dark:bg-black/20 px-2 py-1 rounded-lg text-xs font-bold text-gray-500",children:[(0,N.jsx)("img",{src:"/assets/icons/coinv2.png",className:"w-3 h-3",alt:"Coin"}),a.coins]})]},a.days))})]})}function sl({className:e}){return(0,N.jsx)(At,{className:e})}var nn=L(oe(),1);var Je=L(oe(),1);var Hc=!!(typeof window<"u"&&window.document&&window.document.createElement);function Js(e,t,{checkForDefaultPrevented:a=!0}={}){return function(o){if(e?.(o),a===!1||!o.defaultPrevented)return t?.(o)}}var Ut=L(V(),1),er="Switch",[nl,Qc]=Da(er),[il,ll]=nl(er),en=Je.forwardRef((e,t)=>{let{__scopeSwitch:a,name:r,checked:o,defaultChecked:n,required:s,disabled:i,value:l="on",onCheckedChange:d,form:p,...m}=e,[g,x]=Je.useState(null),c=sa(t,T=>x(T)),w=Je.useRef(!1),S=g?p||!!g.closest("form"):!0,[b,k]=Ta({prop:o,defaultProp:n??!1,onChange:d,caller:er});return(0,Ut.jsxs)(il,{scope:a,checked:b,disabled:i,children:[(0,Ut.jsx)(St.button,{type:"button",role:"switch","aria-checked":b,"aria-required":s,"data-state":on(b),"data-disabled":i?"":void 0,disabled:i,value:l,...m,ref:c,onClick:Js(e.onClick,T=>{k(_=>!_),S&&(w.current=T.isPropagationStopped(),w.current||T.stopPropagation())})}),S&&(0,Ut.jsx)(rn,{control:g,bubbles:!w.current,name:r,value:l,checked:b,required:s,disabled:i,form:p,style:{transform:"translateX(-100%)"}})]})});en.displayName=er;var tn="SwitchThumb",an=Je.forwardRef((e,t)=>{let{__scopeSwitch:a,...r}=e,o=ll(tn,a);return(0,Ut.jsx)(St.span,{"data-state":on(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:t})});an.displayName=tn;var dl="SwitchBubbleInput",rn=Je.forwardRef(({__scopeSwitch:e,control:t,checked:a,bubbles:r=!0,...o},n)=>{let s=Je.useRef(null),i=sa(s,n),l=$o(a),d=jo(t);return Je.useEffect(()=>{let p=s.current;if(!p)return;let m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(l!==a&&x){let c=new Event("click",{bubbles:r});x.call(p,a),p.dispatchEvent(c)}},[l,a,r]),(0,Ut.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...o,tabIndex:-1,ref:i,style:{...o.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});rn.displayName=dl;function on(e){return e?"checked":"unchecked"}var jr=en,sn=an;var $r=L(V(),1),pa=nn.forwardRef(({className:e,...t},a)=>(0,$r.jsx)(jr,{className:W("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:(0,$r.jsx)(sn,{className:W("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));pa.displayName=jr.displayName;var Ht=L(oe(),1);var j=L(V(),1);function ln(){let{user:e,updateProfile:t,updatePassword:a}=Le(),[r,o]=(0,Ht.useState)({theme:e?.settings?.theme||"system",reduceMotion:e?.settings?.reduceMotion||!1,highContrast:e?.settings?.highContrast||!1,soundEnabled:e?.settings?.soundEnabled??!0}),[n,s]=(0,Ht.useState)(""),[i,l]=(0,Ht.useState)(""),[d,p]=(0,Ht.useState)(!1);(0,Ht.useEffect)(()=>{e?.settings&&o({theme:e.settings.theme||"system",reduceMotion:e.settings.reduceMotion||!1,highContrast:e.settings.highContrast||!1,soundEnabled:e.settings.soundEnabled??!0})},[e]);let m=async(x,c)=>{let w={...r,[x]:c};o(w),x==="theme"&&(c==="dark"?document.documentElement.classList.add("dark"):c==="light"?document.documentElement.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"));try{await t({settings:w})}catch(S){console.error("Failed to save settings:",S)}},g=async x=>{if(x.preventDefault(),n!==i){$.error("Passwords do not match.");return}if(n.length<6){$.error("Password must be at least 6 characters.");return}p(!0);try{await a(n),$.success("Password updated successfully."),s(""),l("")}catch(c){console.error(c),$.error("Failed to update password. "+c.message)}finally{p(!1)}};return(0,j.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6 pb-12",children:[(0,j.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Settings"}),(0,j.jsxs)(ee,{className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800",children:[(0,j.jsxs)(ge,{children:[(0,j.jsxs)(pe,{className:"flex items-center gap-2",children:[(0,j.jsx)(kt,{className:"w-5 h-5"}),"Accessibility"]}),(0,j.jsx)(ut,{children:"Customize your experience."})]}),(0,j.jsxs)(de,{className:"space-y-6",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{className:"space-y-0.5",children:[(0,j.jsx)(ne,{className:"text-base",children:"Reduce Motion"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Minimize animations for a simpler experience."})]}),(0,j.jsx)(pa,{checked:r.reduceMotion,onCheckedChange:x=>m("reduceMotion",x)})]}),(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{className:"space-y-0.5",children:[(0,j.jsx)(ne,{className:"text-base",children:"High Contrast"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Increase contrast for better visibility."})]}),(0,j.jsx)(pa,{checked:r.highContrast,onCheckedChange:x=>m("highContrast",x)})]})]})]}),(0,j.jsxs)(ee,{className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800",children:[(0,j.jsx)(ge,{children:(0,j.jsxs)(pe,{className:"flex items-center gap-2",children:[(0,j.jsx)(He,{className:"w-5 h-5"}),"Preferences"]})}),(0,j.jsxs)(de,{className:"space-y-6",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{className:"space-y-0.5",children:[(0,j.jsx)(ne,{className:"text-base",children:"Sound Effects"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Play sounds when completing tasks."})]}),(0,j.jsx)(pa,{checked:r.soundEnabled,onCheckedChange:x=>m("soundEnabled",x)})]}),(0,j.jsxs)("div",{className:"space-y-3",children:[(0,j.jsx)(ne,{className:"text-base",children:"Theme"}),(0,j.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,j.jsx)(Vr,{active:r.theme==="light",onClick:()=>m("theme","light"),icon:Mo,label:"Light"}),(0,j.jsx)(Vr,{active:r.theme==="dark",onClick:()=>m("theme","dark"),icon:Na,label:"Dark"}),(0,j.jsx)(Vr,{active:r.theme==="system",onClick:()=>m("theme","system"),icon:Co,label:"System"})]})]})]})]}),(0,j.jsxs)(ee,{className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800 border-t-4 border-t-red-500",children:[(0,j.jsxs)(ge,{children:[(0,j.jsxs)(pe,{className:"flex items-center gap-2",children:[(0,j.jsx)(at,{className:"w-5 h-5 text-red-500"}),"Security"]}),(0,j.jsx)(ut,{children:"Update your password."})]}),(0,j.jsxs)("form",{onSubmit:g,children:[(0,j.jsxs)(de,{className:"space-y-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(ne,{htmlFor:"newPass",children:"New Password"}),(0,j.jsx)(se,{id:"newPass",type:"password",value:n,onChange:x=>s(x.target.value),required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022"})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(ne,{htmlFor:"confirmPass",children:"Confirm Password"}),(0,j.jsx)(se,{id:"confirmPass",type:"password",value:i,onChange:x=>l(x.target.value),required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022"})]})]}),(0,j.jsx)(Sa,{children:(0,j.jsx)(E,{type:"submit",disabled:d,className:"w-full sm:w-auto",children:d?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ce,{className:"w-4 h-4 mr-2 animate-spin"})," Updating..."]}):"Change Password"})})]})]})]})}function Vr({active:e,onClick:t,icon:a,label:r}){return(0,j.jsxs)("button",{onClick:t,className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${e?"border-indigo-500 bg-indigo-50 dark:bg-indigo-950/30 text-indigo-600 dark:text-indigo-400":"border-gray-200 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[(0,j.jsx)(a,{className:"w-6 h-6 mb-2"}),(0,j.jsx)("span",{className:"font-medium text-sm",children:r})]})}var Qe=L(V(),1);function dn(){return(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("div",{className:"mb-8",children:[(0,Qe.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"About \u2139\uFE0F"}),(0,Qe.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Learn more about CodeON"})]}),(0,Qe.jsxs)("div",{className:"max-w-2xl space-y-6",children:[(0,Qe.jsxs)("div",{className:"bg-blue-100 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded-lg p-6",children:[(0,Qe.jsx)("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"CodeON - Learn & Compete"}),(0,Qe.jsx)("p",{className:"text-blue-800 dark:text-blue-200 text-sm",children:"CodeON is an interactive platform for learning C# programming through gamified lessons and multiplayer coding challenges."})]}),(0,Qe.jsx)("div",{className:"bg-green-100 dark:bg-green-900/20 border border-green-300 dark:border-green-700 rounded-lg p-4",children:(0,Qe.jsx)("p",{className:"text-green-800 dark:text-green-200 text-sm",children:"Version 1.0.0 \u2022 Built with passion for developers"})})]})]})}var nr=L(oe(),1);var or=L(oe(),1);var ht=L(oe(),1);var lm=!!(typeof window<"u"&&window.document&&window.document.createElement);function tr(e,t,{checkForDefaultPrevented:a=!0}={}){return function(o){if(e?.(o),a===!1||!o.defaultPrevented)return t?.(o)}}var Fe=L(oe(),1);var cn=L(oe(),1);function ml(e,t){return cn.useReducer((a,r)=>t[a][r]??a,e)}var Gr=e=>{let{present:t,children:a}=e,r=ul(t),o=typeof a=="function"?a({present:r.isPresent}):Fe.Children.only(a),n=sa(r.ref,gl(o));return typeof a=="function"||r.isPresent?Fe.cloneElement(o,{ref:n}):null};Gr.displayName="Presence";function ul(e){let[t,a]=Fe.useState(),r=Fe.useRef(null),o=Fe.useRef(e),n=Fe.useRef("none"),s=e?"mounted":"unmounted",[i,l]=ml(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Fe.useEffect(()=>{let d=ar(r.current);n.current=i==="mounted"?d:"none"},[i]),yr(()=>{let d=r.current,p=o.current;if(p!==e){let g=n.current,x=ar(d);e?l("MOUNT"):x==="none"||d?.display==="none"?l("UNMOUNT"):l(p&&g!==x?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,l]),yr(()=>{if(t){let d,p=t.ownerDocument.defaultView??window,m=x=>{let w=ar(r.current).includes(CSS.escape(x.animationName));if(x.target===t&&w&&(l("ANIMATION_END"),!o.current)){let S=t.style.animationFillMode;t.style.animationFillMode="forwards",d=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=S)})}},g=x=>{x.target===t&&(n.current=ar(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{p.clearTimeout(d),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:Fe.useCallback(d=>{r.current=d?getComputedStyle(d):null,a(d)},[])}}function ar(e){return e?.animationName||"none"}function gl(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}var bt=L(V(),1),rr="Tabs",[pl,Nm]=Da(rr,[vr]),mn=vr(),[fl,Yr]=pl(rr),un=ht.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,onValueChange:o,defaultValue:n,orientation:s="horizontal",dir:i,activationMode:l="automatic",...d}=e,p=Ho(i),[m,g]=Ta({prop:r,onChange:o,defaultProp:n??"",caller:rr});return(0,bt.jsx)(fl,{scope:a,baseId:zo(),value:m,onValueChange:g,orientation:s,dir:p,activationMode:l,children:(0,bt.jsx)(St.div,{dir:p,"data-orientation":s,...d,ref:t})})});un.displayName=rr;var gn="TabsList",pn=ht.forwardRef((e,t)=>{let{__scopeTabs:a,loop:r=!0,...o}=e,n=Yr(gn,a),s=mn(a);return(0,bt.jsx)(Xo,{asChild:!0,...s,orientation:n.orientation,dir:n.dir,loop:r,children:(0,bt.jsx)(St.div,{role:"tablist","aria-orientation":n.orientation,...o,ref:t})})});pn.displayName=gn;var fn="TabsTrigger",bn=ht.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,disabled:o=!1,...n}=e,s=Yr(fn,a),i=mn(a),l=vn(s.baseId,r),d=xn(s.baseId,r),p=r===s.value;return(0,bt.jsx)(Qo,{asChild:!0,...i,focusable:!o,active:p,children:(0,bt.jsx)(St.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":d,"data-state":p?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...n,ref:t,onMouseDown:tr(e.onMouseDown,m=>{!o&&m.button===0&&m.ctrlKey===!1?s.onValueChange(r):m.preventDefault()}),onKeyDown:tr(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&s.onValueChange(r)}),onFocus:tr(e.onFocus,()=>{let m=s.activationMode!=="manual";!p&&!o&&m&&s.onValueChange(r)})})})});bn.displayName=fn;var hn="TabsContent",yn=ht.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,forceMount:o,children:n,...s}=e,i=Yr(hn,a),l=vn(i.baseId,r),d=xn(i.baseId,r),p=r===i.value,m=ht.useRef(p);return ht.useEffect(()=>{let g=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(g)},[]),(0,bt.jsx)(Gr,{present:o||p,children:({present:g})=>(0,bt.jsx)(St.div,{"data-state":p?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":l,hidden:!g,id:d,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:g&&n})})});yn.displayName=hn;function vn(e,t){return`${e}-trigger-${t}`}function xn(e,t){return`${e}-content-${t}`}var wn=un,qr=pn,Xr=bn,Qr=yn;var sr=L(V(),1),aa=wn,zt=or.forwardRef(({className:e,...t},a)=>(0,sr.jsx)(qr,{ref:a,className:W("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));zt.displayName=qr.displayName;var st=or.forwardRef(({className:e,...t},a)=>(0,sr.jsx)(Xr,{ref:a,className:W("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));st.displayName=Xr.displayName;var nt=or.forwardRef(({className:e,...t},a)=>(0,sr.jsx)(Qr,{ref:a,className:W("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));nt.displayName=Qr.displayName;var Nn=[{id:"heart-refill",name:"Heart Refill",description:"Refill your hearts to max (5).",icon:xo,image:"/assets/icons/heart.png",cost:250,color:"text-red-500",bgColor:"bg-red-50 dark:bg-red-950/30",allowQuantity:!1},{id:"streak-freeze",name:"Streak Freeze",description:"Protect your streak for one missed day.",icon:oa,image:"/assets/icons/snowflake.png",cost:500,color:"text-blue-500",bgColor:"bg-blue-50 dark:bg-blue-950/30",allowQuantity:!0},{id:"hint-power",name:"Hint",description:"Get a hint on a tough challenge.",icon:wo,image:"/assets/icons/bulb.png",cost:100,color:"text-yellow-500",bgColor:"bg-yellow-50 dark:bg-yellow-950/30",allowQuantity:!0}];async function kn(e,t,a,r=1){let{coins:o,hearts:n,streakFreezes:s,hints:i}=a,l=t.cost*r;if((o||0)<l)return{success:!1,message:`Not enough coins! You need ${l}.`};let d={coins:(o||0)-l};switch(t.id){case"heart-refill":if((n||0)>=5)return{success:!1,message:"Hearts are already full!"};d.hearts=5;break;case"streak-freeze":d.streak_freezes=(s||0)+r;break;case"hint-power":d.hints=(i||0)+r;break;default:return{success:!1,message:"Unknown item type."}}let{error:p}=await Z.from("users").update(d).eq("id",e);return p?(console.error("Purchase Transaction Failed:",p),{success:!1,message:"Transaction failed. Please try again."}):{success:!0,message:`Successfully purchased ${r} ${t.name}${r>1?"s":""}!`}}var P=L(V(),1);function Cn(){let{user:e,updateProfile:t}=Le(),[a,r]=(0,nr.useState)(null),[o,n]=(0,nr.useState)(1),[s,i]=(0,nr.useState)(!1),l=e?.coins||0,d=g=>{r(g),n(1)},p=g=>{n(x=>Math.max(1,Math.min(10,x+g)))},m=async()=>{if(!e||!a)return;i(!0);let g=await kn(e.uid,a,e,o);if(g.success){let x=a.cost*o,c={coins:l-x};a.id==="heart-refill"&&(c.hearts=5),a.id==="streak-freeze"&&(c.streakFreezes=(e.streakFreezes||0)+o),a.id==="hint-power"&&(c.hints=(e.hints||0)+o),await t(c),$.success(g.message),r(null)}else $.error(g.message);i(!1)};return(0,P.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 pb-12",children:[(0,P.jsx)(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:(0,P.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsx)(Ua,{className:"w-8 h-8 text-indigo-500"}),(0,P.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900 dark:text-white",children:"The Store"})]}),(0,P.jsxs)("div",{className:"flex-shrink-0 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-full p-2 pr-6 shadow-md flex items-center gap-3",children:[(0,P.jsx)("img",{src:"/assets/icons/coinv2.png",alt:"Coins",className:"w-8 h-8"}),(0,P.jsxs)("div",{className:"flex flex-col",children:[(0,P.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium leading-none",children:"Your Coins"}),(0,P.jsx)("span",{className:"text-lg font-bold text-gray-900 dark:text-white leading-none",children:l.toLocaleString()})]})]})]})}),(0,P.jsxs)(aa,{defaultValue:"powerups",className:"w-full",children:[(0,P.jsxs)(zt,{className:"grid w-full grid-cols-2 max-w-md mx-auto h-12 rounded-xl",children:[(0,P.jsxs)(st,{value:"powerups",className:"h-10 rounded-lg",children:[(0,P.jsx)(Nr,{className:"w-4 h-4 mr-2"}),"Power-Ups"]}),(0,P.jsxs)(st,{value:"inventory",className:"h-10 rounded-lg",children:[(0,P.jsx)(mo,{className:"w-4 h-4 mr-2"}),"Inventory"]})]}),(0,P.jsx)(nt,{value:"powerups",children:(0,P.jsx)(K.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:Nn.map(g=>(0,P.jsx)(hl,{item:g,onPurchaseClick:()=>d(g),userCoins:l},g.id))})}),(0,P.jsx)(nt,{value:"inventory",children:(0,P.jsxs)(K.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[(0,P.jsx)(Wr,{name:"Streak Freeze",count:e?.streakFreezes||0,icon:_a,color:"text-blue-500",description:"Protect your streak for a day."}),(0,P.jsx)(Wr,{name:"Hints",count:e?.hints||0,icon:Nr,image:"/assets/icons/bulb.png",color:"text-yellow-500",description:"Get help on tough challenges."}),(0,P.jsx)(Wr,{name:"Hearts",count:e?.hearts||0,max:5,icon:Ba,color:"text-red-500",description:"Lives remaining."})]})})]}),(0,P.jsx)(fe,{open:!!a,onOpenChange:g=>!g&&r(null),children:(0,P.jsxs)(be,{className:"sm:max-w-md",children:[(0,P.jsxs)(ve,{children:[(0,P.jsxs)(xe,{className:"flex items-center gap-2",children:[(0,P.jsx)(Io,{className:"w-5 h-5 text-indigo-500"}),"Confirm Purchase"]}),(0,P.jsx)(De,{children:"Are you sure you want to buy this item?"})]}),a&&(0,P.jsxs)("div",{className:"py-4 space-y-6",children:[(0,P.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border border-gray-100 dark:border-gray-800",children:[(0,P.jsx)("div",{className:`w-16 h-16 rounded-xl ${a.bgColor} flex items-center justify-center shrink-0`,children:a.image?(0,P.jsx)("img",{src:a.image,alt:a.name,className:"w-10 h-10 object-contain"}):(0,P.jsx)(a.icon,{className:`w-8 h-8 ${a.color}`})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h4",{className:"font-bold text-lg",children:a.name}),(0,P.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,P.jsx)("img",{src:"/assets/icons/coinv2.png",alt:"C",className:"w-4 h-4"}),(0,P.jsx)("span",{className:"font-mono font-bold",children:a.cost})," ","each"]})]})]}),a.allowQuantity&&(0,P.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,P.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Quantity"}),(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsx)(E,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-lg",onClick:()=>p(-1),disabled:o<=1,children:(0,P.jsx)(ko,{className:"w-4 h-4"})}),(0,P.jsx)("span",{className:"w-8 text-center font-bold text-lg",children:o}),(0,P.jsx)(E,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-lg",onClick:()=>p(1),disabled:o>=10,children:(0,P.jsx)(rt,{className:"w-4 h-4"})})]})]}),(0,P.jsxs)("div",{className:"flex items-center justify-between border-t pt-4 mt-4",children:[(0,P.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:"Total Cost"}),(0,P.jsxs)("div",{className:"flex items-center gap-2",children:[(0,P.jsx)("img",{src:"/assets/icons/coinv2.png",alt:"C",className:"w-5 h-5"}),(0,P.jsx)("span",{className:`text-xl font-black ${l<a.cost*o?"text-red-500":"text-indigo-600 dark:text-indigo-400"}`,children:(a.cost*o).toLocaleString()})]})]}),l<a.cost*o&&(0,P.jsxs)("p",{className:"text-red-500 text-sm text-center font-medium bg-red-50 dark:bg-red-950/30 p-2 rounded-lg",children:["You need"," ",(a.cost*o-l).toLocaleString()," ","more coins!"]})]}),(0,P.jsxs)(Se,{className:"gap-2 sm:gap-0",children:[(0,P.jsx)(E,{variant:"ghost",onClick:()=>r(null),disabled:s,children:"Cancel"}),(0,P.jsx)(E,{onClick:m,disabled:!a||l<a.cost*o||s,className:"bg-indigo-600 hover:bg-indigo-700 text-white w-full sm:w-auto font-bold",children:s?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Ce,{className:"w-4 h-4 mr-2 animate-spin"})," ","Processing..."]}):"Confirm Purchase"})]})]})})]})}function hl({item:e,onPurchaseClick:t,userCoins:a}){let{icon:r}=e,o=a>=e.cost;return(0,P.jsxs)(ee,{className:"bg-white dark:bg-gray-900 shadow-lg border-gray-100 dark:border-gray-800 rounded-3xl flex flex-col overflow-hidden hover:shadow-xl transition-shadow cursor-pointer group",onClick:t,children:[(0,P.jsxs)(ge,{className:"flex-col items-center text-center pb-2",children:[(0,P.jsx)("div",{className:`w-20 h-20 rounded-3xl ${e.bgColor} flex items-center justify-center mb-4 transition-transform group-hover:scale-110`,children:e.image?(0,P.jsx)("img",{src:e.image,alt:e.name,className:"w-12 h-12 object-contain"}):(0,P.jsx)(r,{className:`w-10 h-10 ${e.color}`})}),(0,P.jsx)(pe,{className:"text-xl font-bold",children:e.name})]}),(0,P.jsx)(de,{className:"flex-1 text-center px-6",children:(0,P.jsx)(ut,{className:"text-sm",children:e.description})}),(0,P.jsx)(Sa,{className:"pt-2 pb-6",children:(0,P.jsx)(E,{className:"w-full h-12 rounded-xl text-base font-bold",variant:o?"default":"secondary",children:(0,P.jsxs)("div",{className:"flex items-center gap-2",children:[(0,P.jsx)("span",{children:"Buy"}),(0,P.jsxs)("div",{className:"flex items-center gap-1 bg-black/10 dark:bg-white/10 px-2 py-0.5 rounded-lg",children:[(0,P.jsx)("img",{src:"/assets/icons/coinv2.png",alt:"C",className:"w-4 h-4"}),(0,P.jsx)("span",{children:e.cost})]})]})})})]})}function Wr({name:e,count:t,max:a,icon:r,color:o,description:n,image:s}){return(0,P.jsxs)(ee,{className:"bg-white dark:bg-gray-900 shadow-sm border border-gray-100 dark:border-gray-800 rounded-3xl flex items-center p-4 gap-4",children:[(0,P.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-gray-50 dark:bg-gray-800 flex items-center justify-center shrink-0",children:s?(0,P.jsx)("img",{src:s,alt:e,className:"w-9 h-9 object-contain"}):(0,P.jsx)(r,{className:`w-7 h-7 ${o}`})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:e}),(0,P.jsxs)("div",{className:"text-2xl font-black text-gray-900 dark:text-white",children:["x",t," ",a&&(0,P.jsxs)("span",{className:"text-gray-400 text-lg",children:["/ ",a]})]})]})]})}var et=L(oe(),1);var h=L(V(),1),yl=["week-warrior","consistency-king","century-club","bug-hunter","code-wizard","night-owl","early-bird","quest-master"];function Sn({user:e,onSaveAvatar:t}){let{updateProfile:a,linkGoogleAccount:r,unlinkGoogleAccount:o,refreshSession:n}=Le(),[s,i]=(0,et.useState)(e?.displayName||""),[l,d]=(0,et.useState)(e?.badges||[]),[p,m]=(0,et.useState)(null),[g,x]=(0,et.useState)(!1),[c,w]=(0,et.useState)(!1),[S,b]=(0,et.useState)(!1),[k,T]=(0,et.useState)(!1),_=s.trim()!==""&&s.trim()!==e?.displayName,y=JSON.stringify(l.sort())!==JSON.stringify((e?.badges||[]).sort());(0,et.useEffect)(()=>{e?.displayName&&i(e.displayName),e?.badges&&d(e.badges),(async()=>{if(e?.trophies!==void 0)try{let ce=await Ko(e.trophies);m(ce)}catch(ce){console.warn("Could not fetch rank",ce)}})()},[e]),(0,et.useEffect)(()=>{(async()=>{if(sessionStorage.getItem("codeon_linking_status")==="pending"){sessionStorage.removeItem("codeon_linking_status"),w(!0),$.loading("Verifying Google account...",{id:"bind-load"});try{let Ie=await n();if(Ie&&Ie.identities){let Ue=Ie.identities.find(Ae=>Ae.provider==="google");if(Ue){let Ae=Ue.identity_data?.email;await a({googleBound:!0,...Ae?{email:Ae}:{}}),$.success("Account successfully linked!",{id:"bind-load"})}else $.error("Linking failed: Identity not found.",{id:"bind-load"})}}catch(Ie){console.error("Binding error:",Ie),$.error("Error finalizing link.",{id:"bind-load"})}finally{w(!1)}}})()},[n,a]);let B=async()=>{if(!(!_&&!y)){x(!0);try{await a({displayName:s.trim(),badges:l}),$.success("Profile updated successfully!")}catch{$.error("Failed to update profile.")}finally{x(!1)}}},O=async I=>{await t(I),$.success("Avatar updated! Looking good.")},M=()=>{b(!0)},H=async()=>{b(!1),w(!0);try{await r()}catch(I){console.error(I),w(!1),I.message?.includes("already linked")?$.error("This Google account is already used."):$.error(`Error: ${I.message}`)}},X=async()=>{T(!1),w(!0);try{await o(),await r()}catch(I){console.error(I),$.error(`Change account failed: ${I.message}`),w(!1)}},Y=I=>{d(ce=>ce.includes(I)?ce.filter(Ie=>Ie!==I):[...ce,I])};if(!e)return(0,h.jsx)(vl,{});let te=e.joinedAt?new Date(e.joinedAt).toLocaleDateString():"N/A",v={trophies:e.trophies||0,xp:e.xp||0,league:e.league||"Novice",rank:p?`#${p}`:"..."};return(0,h.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 pb-12 font-pixelify",children:[(0,h.jsx)(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:(0,h.jsx)(ee,{className:"bg-white dark:bg-gray-900 shadow-lg rounded-3xl overflow-hidden",children:(0,h.jsxs)(de,{className:"p-6 flex flex-col sm:flex-row items-center gap-6",children:[(0,h.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-indigo-500 bg-gray-100 dark:bg-gray-800 flex-shrink-0",children:(0,h.jsx)(Dt,{config:e.avatarConfig,headOnly:!0})}),(0,h.jsxs)("div",{className:"text-center sm:text-left flex-1",children:[(0,h.jsx)("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:e.displayName||"New Coder"}),(0,h.jsxs)("p",{className:"text-lg text-gray-600 dark:text-gray-400 font-mono",children:["ID: ",e.studentId||"Student"]}),(0,h.jsxs)("div",{className:"flex items-center justify-center sm:justify-start text-sm text-gray-500 mt-2",children:[(0,h.jsx)(Nt,{className:"w-4 h-4 mr-2"})," Joined: ",te]})]}),(0,h.jsxs)("div",{className:"hidden sm:flex ml-auto flex-col items-end gap-2 max-w-[250px]",children:[(0,h.jsx)("div",{className:"text-sm text-gray-500 font-bold uppercase tracking-wider",children:"Active Badges"}),(0,h.jsx)("div",{className:"flex flex-wrap justify-end gap-1.5",children:e.badges&&e.badges.length>0?e.badges.slice(0,5).map(I=>(0,h.jsx)(ye,{variant:"secondary",className:"text-[10px] px-2 py-0.5 bg-indigo-50 text-indigo-600 border-indigo-100 dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-800",children:I},I)):(0,h.jsx)("span",{className:"text-xs text-gray-400 italic",children:"No badges equipped"})})]})]})})}),(0,h.jsxs)(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,h.jsx)(ir,{icon:ot,value:v.trophies.toLocaleString(),label:"Total Trophies",color:"text-yellow-500"}),(0,h.jsx)(ir,{icon:He,value:v.xp.toLocaleString(),label:"Total XP",color:"text-blue-500"}),(0,h.jsx)(ir,{icon:qt,value:v.league,label:"League",color:"text-purple-500"}),(0,h.jsx)(ir,{icon:pr,value:v.rank,label:"Global Rank",color:"text-indigo-500"})]}),(0,h.jsx)(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,h.jsxs)(aa,{defaultValue:"profile",className:"w-full",children:[(0,h.jsxs)(zt,{className:"grid w-full grid-cols-2 max-w-sm mx-auto h-12 rounded-xl",children:[(0,h.jsxs)(st,{value:"profile",className:"h-10 rounded-lg",children:[(0,h.jsx)(Oo,{className:"w-4 h-4 mr-2"})," Edit Profile"]}),(0,h.jsxs)(st,{value:"avatar",className:"h-10 rounded-lg",children:[(0,h.jsx)(Zt,{className:"w-4 h-4 mr-2"})," Edit Avatar"]})]}),(0,h.jsx)(nt,{value:"profile",children:(0,h.jsxs)("div",{className:"grid gap-6 mt-4",children:[(0,h.jsxs)(ee,{className:"bg-white dark:bg-gray-900 shadow-lg rounded-3xl",children:[(0,h.jsx)(ge,{children:(0,h.jsx)(pe,{children:"Your Details"})}),(0,h.jsxs)(de,{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)(ne,{htmlFor:"studentId",children:"Student ID (Read-only)"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)(fr,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,h.jsx)(se,{id:"studentId",value:e.studentId||"N/A",disabled:!0,className:"pl-9 bg-gray-50 dark:bg-gray-800"})]})]}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)(ne,{htmlFor:"displayName",children:"Display Name"}),(0,h.jsx)(se,{id:"displayName",value:s,onChange:I=>i(I.target.value),placeholder:"Enter your coder name"})]}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsx)(ne,{htmlFor:"email",children:"Email"}),e.googleBound?(0,h.jsxs)("span",{className:"text-[10px] uppercase font-bold text-green-600 dark:text-green-400 flex items-center gap-1 bg-green-50 dark:bg-green-900/20 px-2 py-0.5 rounded-full",children:[(0,h.jsx)(ct,{className:"w-3 h-3"})," Google Linked"]}):(0,h.jsx)("span",{className:"text-[10px] uppercase font-bold text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded-full",children:"Not Linked"})]}),(0,h.jsx)(se,{id:"email",value:e.email||"",disabled:!0,className:"bg-gray-50 dark:bg-gray-800",placeholder:"No email associated"})]})]})]}),(0,h.jsxs)(ee,{className:"bg-white dark:bg-gray-900 shadow-lg rounded-3xl",children:[(0,h.jsxs)(ge,{children:[(0,h.jsxs)(pe,{className:"flex items-center gap-2",children:[(0,h.jsx)(pr,{className:"w-5 h-5 text-orange-500"})," Badge Showcase"]}),(0,h.jsx)(ut,{children:"Select the badges you want to display."})]}),(0,h.jsx)(de,{children:(0,h.jsx)("div",{className:"flex flex-wrap gap-2",children:yl.map(I=>{let ce=l.includes(I);return(0,h.jsxs)("div",{onClick:()=>Y(I),className:`cursor-pointer px-3 py-2 rounded-xl border-2 transition-all flex items-center gap-2 ${ce?"bg-orange-50 border-orange-500 text-orange-700 dark:bg-orange-900/20 dark:border-orange-500 dark:text-orange-300":"bg-gray-50 border-transparent text-gray-500 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-400"}`,children:[ce?(0,h.jsx)(ct,{className:"w-3.5 h-3.5"}):(0,h.jsx)(rt,{className:"w-3.5 h-3.5 opacity-50"}),(0,h.jsx)("span",{className:"text-xs font-bold uppercase",children:I.replace(/-/g," ")})]},I)})})})]}),(0,h.jsxs)(ee,{className:"bg-white dark:bg-gray-900 shadow-lg rounded-3xl border-t-4 border-t-blue-500",children:[(0,h.jsx)(ge,{children:(0,h.jsxs)(pe,{className:"flex items-center gap-2",children:[(0,h.jsx)(fr,{className:"w-5 h-5 text-blue-500"})," Account Security"]})}),(0,h.jsx)(de,{children:(0,h.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsx)("div",{className:"p-3 bg-white dark:bg-gray-700 rounded-full shadow-sm",children:(0,h.jsx)("svg",{className:"w-6 h-6",viewBox:"0 0 488 512",children:(0,h.jsx)("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"})})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h4",{className:"font-bold text-gray-900 dark:text-white",children:"Google Account"}),(0,h.jsx)("p",{className:"text-sm text-gray-500",children:e?.googleBound?"Linked to "+e.email:"Link for easier login."})]})]}),e?.googleBound?(0,h.jsx)(E,{variant:"outline",onClick:()=>T(!0),disabled:c,children:c?(0,h.jsx)(Ce,{className:"w-4 h-4 animate-spin"}):(0,h.jsxs)(h.Fragment,{children:[" ",(0,h.jsx)(Po,{className:"w-4 h-4 mr-2"})," Change Account"]})}):(0,h.jsx)(E,{onClick:()=>b(!0),disabled:c,variant:"outline",className:"hover:bg-blue-50 dark:hover:bg-blue-900/20 border-blue-200 text-blue-600",children:c?(0,h.jsx)(Ce,{className:"w-4 h-4 animate-spin"}):(0,h.jsxs)(h.Fragment,{children:[" ",(0,h.jsx)(No,{className:"w-4 h-4 mr-2"})," Bind Account"]})})]})})]}),(0,h.jsx)("div",{className:"sticky bottom-4 z-10",children:(0,h.jsx)(E,{onClick:B,disabled:!_&&!y||g,className:`w-full h-12 font-bold rounded-xl transition-all shadow-xl ${!_&&!y?"bg-gray-200 text-gray-400 dark:bg-gray-800 dark:text-gray-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 text-white hover:scale-[1.01]"}`,children:g?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Ce,{className:"w-4 h-4 mr-2 animate-spin"})," ","Saving..."]}):"Save Changes"})})]})}),(0,h.jsx)(nt,{value:"avatar",children:(0,h.jsx)("div",{className:"mt-4",children:(0,h.jsx)(ts,{user:e,initialConfig:e.avatarConfig,onSave:O})})})]})}),(0,h.jsx)(fe,{open:S,onOpenChange:b,children:(0,h.jsxs)(be,{children:[(0,h.jsxs)(ve,{children:[(0,h.jsx)(xe,{children:"Bind Google Account?"}),(0,h.jsx)(De,{children:"Redirecting to Google to verify your account."})]}),(0,h.jsxs)(Se,{children:[(0,h.jsx)(E,{variant:"ghost",onClick:()=>b(!1),children:"Cancel"}),(0,h.jsx)(E,{onClick:H,className:"bg-blue-600 hover:bg-blue-700",children:"Continue"})]})]})}),(0,h.jsx)(fe,{open:k,onOpenChange:T,children:(0,h.jsxs)(be,{children:[(0,h.jsxs)(ve,{children:[(0,h.jsx)(xe,{children:"Change Linked Account?"}),(0,h.jsxs)(De,{children:["This will disconnect ",(0,h.jsx)("b",{children:e?.email})," and allow you to sign in with a different Google account."]})]}),(0,h.jsxs)(Se,{children:[(0,h.jsx)(E,{variant:"ghost",onClick:()=>T(!1),children:"Cancel"}),(0,h.jsx)(E,{onClick:X,className:"bg-blue-600 hover:bg-blue-700",children:"Yes, Change Account"})]})]})})]})}function ir({icon:e,value:t,label:a,color:r}){return(0,h.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-3 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border border-gray-100 dark:border-gray-800 shadow-sm transition-transform hover:scale-[1.02]",children:[(0,h.jsx)("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:(0,h.jsx)(e,{className:`w-5 h-5 ${r}`})}),(0,h.jsxs)("div",{className:"text-center md:text-left",children:[(0,h.jsx)("div",{className:"text-xl md:text-2xl font-black text-gray-900 dark:text-white",children:t}),(0,h.jsx)("div",{className:"text-[10px] md:text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:a})]})]})}function vl(){return(0,h.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 pb-12",children:[(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-900 shadow-lg rounded-3xl p-6 flex flex-col sm:flex-row items-center gap-6",children:[(0,h.jsx)(J,{className:"w-24 h-24 rounded-full"}),(0,h.jsxs)("div",{className:"space-y-2 flex-1 w-full sm:w-auto text-center sm:text-left",children:[(0,h.jsx)(J,{className:"h-8 w-48 mx-auto sm:mx-0"}),(0,h.jsx)(J,{className:"h-4 w-64 mx-auto sm:mx-0"}),(0,h.jsx)(J,{className:"h-4 w-32 mx-auto sm:mx-0"})]}),(0,h.jsx)("div",{className:"hidden sm:block",children:(0,h.jsx)(J,{className:"h-12 w-24"})})]}),(0,h.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(4)].map((e,t)=>(0,h.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border border-gray-100 dark:border-gray-800 h-24 flex items-center gap-3",children:[(0,h.jsx)(J,{className:"w-10 h-10 rounded-xl"}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)(J,{className:"w-16 h-6"}),(0,h.jsx)(J,{className:"w-20 h-3"})]})]},t))}),(0,h.jsxs)("div",{className:"w-full space-y-6",children:[(0,h.jsx)(J,{className:"h-12 w-full max-w-sm rounded-xl mx-auto"}),(0,h.jsx)(J,{className:"h-[400px] w-full rounded-3xl"})]})]})}var Ee=L(oe(),1);var f=L(V(),1),xl=["BSIT-1A","BSIT-1B","BSCS-1A","BSIS","BSAIS","ACT"];function Dn(){let[e,t]=(0,Ee.useState)([]),[a,r]=(0,Ee.useState)([]),[o,n]=(0,Ee.useState)(!0),[s,i]=(0,Ee.useState)(""),[l,d]=(0,Ee.useState)(""),[p,m]=(0,Ee.useState)(!1),[g,x]=(0,Ee.useState)(!1),[c,w]=(0,Ee.useState)(!1),[S,b]=(0,Ee.useState)(!1),[k,T]=(0,Ee.useState)(null),[_,y]=(0,Ee.useState)(null),[B,O]=(0,Ee.useState)(null),[M,H]=(0,Ee.useState)({studentId:"",fullName:"",email:"",section:"",birthdate:"",password:""}),[X,Y]=(0,Ee.useState)(!1),[te,v]=(0,Ee.useState)(!1),I=async()=>{n(!0);let{data:{user:R}}=await Z.auth.getUser();if(R){let{data:ke}=await Z.from("users").select("role").eq("id",R.id).single();d(ke?.role||"")}let{data:me,error:ue}=await Z.from("users").select("*").in("role",["user","student"]).order("student_id",{ascending:!0});ue?console.error("Error fetching students:",ue):t(me||[]);let{data:z,error:le}=await Z.from("account_requests").select("*").order("created_at",{ascending:!1});le?console.error("Error fetching requests:",le):r(z||[]),n(!1)};(0,Ee.useEffect)(()=>{I()},[]);let ce=R=>{let me=R?`Ici${R}`:"";H(ue=>({...ue,birthdate:R,password:me}))},Ie=async R=>{R.preventDefault(),Y(!0);try{let{error:me}=await Z.from("users").insert([{student_id:M.studentId,display_name:M.fullName,email:M.email,section:M.section,birthdate:M.birthdate,role:"user"}]);if(me)throw me;B&&await Z.from("account_requests").update({is_approved:!0}).eq("id",B),$.success((0,f.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,f.jsx)("span",{className:"font-bold",children:"Student Created!"}),(0,f.jsxs)("span",{className:"text-xs",children:["Pass: ",(0,f.jsx)("span",{className:"font-mono",children:M.password})]})]})),lt(),I()}catch(me){console.error(me),me.message.includes("users_student_id_key")?$.error("This Student ID is already registered!",{description:"Check the 'Active Students' tab. You can delete the duplicate there."}):$.error("Failed to create: "+me.message)}finally{Y(!1)}},Ue=async R=>{if(R.preventDefault(),!!k){Y(!0);try{let{error:me}=await Z.from("users").update({student_id:M.studentId,display_name:M.fullName,email:M.email,section:M.section,birthdate:M.birthdate}).eq("id",k.id);if(me)throw me;$.success("Student updated successfully"),x(!1),I()}catch(me){$.error("Update failed: "+me.message)}finally{Y(!1)}}},Ae=async()=>{if(k){Y(!0);try{let{error:R}=await Z.from("users").delete().eq("id",k.id);if(R)throw R;$.success("Student record deleted"),w(!1),I()}catch(R){$.error("Delete failed: "+R.message)}finally{Y(!1)}}},We=R=>{O(R.id),H({studentId:R.student_id,fullName:R.full_name,email:`${R.student_id.toLowerCase()}@student.school.edu`,section:R.section,birthdate:R.birthdate||"",password:R.birthdate?`Ici${R.birthdate}`:""}),m(!0)},Pt=R=>{y(R),b(!0)},Ve=async()=>{if(_){Y(!0);try{let{error:R}=await Z.from("account_requests").delete().eq("id",_);if(R)throw R;$.success("Request rejected"),b(!1),I()}catch(R){$.error("Failed: "+R.message)}finally{Y(!1)}}},yt=R=>{navigator.clipboard.writeText(R),$.success("Copied to clipboard")},lt=()=>{m(!1),O(null),H({studentId:"",fullName:"",email:"",section:"",birthdate:"",password:""})},Ke=()=>{O(null),H({studentId:"",fullName:"",email:"",section:"",birthdate:"",password:""}),m(!0)},Lt=R=>{T(R),H({studentId:R.student_id,fullName:R.display_name,email:R.email,section:R.section,birthdate:R.birthdate||"",password:""}),x(!0)},vt=e.filter(R=>R.display_name?.toLowerCase().includes(s.toLowerCase())||R.student_id?.toLowerCase().includes(s.toLowerCase())),Me=a.filter(R=>!R.is_approved).length,Pe=!0;return(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Student Management"}),(0,f.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage student accounts and records."})]}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsxs)(E,{variant:"outline",onClick:I,disabled:o,children:[(0,f.jsx)(Kt,{className:`w-4 h-4 mr-2 ${o?"animate-spin":""}`})," ","Refresh"]}),Pe&&(0,f.jsxs)(E,{onClick:Ke,className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,f.jsx)(rt,{className:"w-4 h-4 mr-2"})," Add Student"]})]})]}),(0,f.jsxs)(aa,{defaultValue:"active",className:"w-full",children:[(0,f.jsxs)(zt,{className:"grid w-full max-w-md grid-cols-2",children:[(0,f.jsx)(st,{value:"active",children:"Active Students"}),(0,f.jsxs)(st,{value:"requests",className:"relative",children:["Account Requests",Me>0&&(0,f.jsx)("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] text-white",children:Me})]})]}),(0,f.jsx)(nt,{value:"active",className:"mt-4",children:(0,f.jsxs)(ee,{className:"border-gray-200 dark:border-gray-800",children:[(0,f.jsx)(ge,{children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)(pe,{children:"Student Directory"}),(0,f.jsxs)("div",{className:"relative w-64",children:[(0,f.jsx)(Ct,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,f.jsx)(se,{placeholder:"Search...",className:"pl-8 bg-gray-50 dark:bg-gray-900",value:s,onChange:R=>i(R.target.value)})]})]})}),(0,f.jsx)(de,{children:(0,f.jsx)("div",{className:"rounded-md border border-gray-200 dark:border-gray-800 overflow-hidden",children:(0,f.jsx)("div",{className:"overflow-x-auto",children:(0,f.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,f.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700",children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:"px-4 py-3",children:"ID"}),(0,f.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,f.jsx)("th",{className:"px-4 py-3",children:"Section"}),(0,f.jsx)("th",{className:"px-4 py-3",children:"Birthdate"}),(0,f.jsx)("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),(0,f.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800 bg-white dark:bg-gray-900",children:o?(0,f.jsx)("tr",{children:(0,f.jsx)("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:"Loading..."})}):vt.length===0?(0,f.jsx)("tr",{children:(0,f.jsx)("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:"No students found."})}):vt.map(R=>(0,f.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[(0,f.jsx)("td",{className:"px-4 py-3 font-mono text-gray-600 dark:text-gray-400",children:R.student_id}),(0,f.jsx)("td",{className:"px-4 py-3 font-bold",children:R.display_name}),(0,f.jsx)("td",{className:"px-4 py-3",children:(0,f.jsx)(ye,{variant:"outline",children:R.section})}),(0,f.jsx)("td",{className:"px-4 py-3 text-gray-500",children:R.birthdate||"-"}),(0,f.jsx)("td",{className:"px-4 py-3 text-right",children:Pe&&(0,f.jsxs)(Ge,{children:[(0,f.jsx)(Ye,{asChild:!0,children:(0,f.jsx)(E,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,f.jsx)(Qt,{className:"h-4 w-4"})})}),(0,f.jsxs)(qe,{align:"end",children:[(0,f.jsxs)(_e,{onClick:()=>Lt(R),children:[(0,f.jsx)(Wt,{className:"mr-2 h-4 w-4"})," Edit"]}),(0,f.jsxs)(_e,{className:"text-red-600",onClick:()=>{T(R),w(!0)},children:[(0,f.jsx)(Jt,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},R.id))})]})})})})]})}),(0,f.jsx)(nt,{value:"requests",className:"mt-4",children:(0,f.jsxs)(ee,{className:"border-gray-200 dark:border-gray-800",children:[(0,f.jsx)(ge,{children:(0,f.jsx)(pe,{children:"Access Requests"})}),(0,f.jsx)(de,{children:a.length===0?(0,f.jsxs)("div",{className:"text-center py-12 text-gray-500 bg-gray-50 dark:bg-gray-900 rounded-xl border border-dashed border-gray-200 dark:border-gray-800",children:[(0,f.jsx)(_o,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),(0,f.jsx)("p",{children:"No requests found."})]}):(0,f.jsx)("div",{className:"space-y-4",children:a.map(R=>(0,f.jsxs)("div",{className:`flex items-center justify-between p-4 border rounded-xl shadow-sm transition-all ${R.is_approved?"bg-gray-100 dark:bg-gray-800/50 border-gray-200 dark:border-gray-800 opacity-70":"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800"}`,children:[(0,f.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,f.jsx)("div",{className:`h-10 w-10 rounded-full flex items-center justify-center font-bold text-lg ${R.is_approved?"bg-gray-300 dark:bg-gray-700 text-gray-500":"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400"}`,children:R.full_name[0]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h4",{className:`font-bold ${R.is_approved?"line-through text-gray-500":"text-gray-900 dark:text-white"}`,children:R.full_name}),(0,f.jsxs)("div",{className:"flex gap-2 text-sm text-gray-500",children:[(0,f.jsx)("span",{className:"font-mono",children:R.student_id}),(0,f.jsx)("span",{children:"\u2022"}),(0,f.jsx)("span",{children:R.section}),(0,f.jsx)("span",{children:"\u2022"}),(0,f.jsxs)("span",{className:"flex items-center gap-1",children:[(0,f.jsx)(Mt,{className:"w-3 h-3"})," ",R.birthdate]})]})]})]}),(0,f.jsx)("div",{className:"flex gap-2",children:R.is_approved?(0,f.jsxs)(ye,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 gap-1 px-3 py-1",children:[(0,f.jsx)(ct,{className:"w-3 h-3"})," Approved"]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(E,{size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>Pt(R.id),children:(0,f.jsx)(Fo,{className:"w-5 h-5"})}),(0,f.jsxs)(E,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white gap-2",onClick:()=>We(R),children:[(0,f.jsx)(Gt,{className:"w-4 h-4"})," Approve"]})]})})]},R.id))})})]})})]}),(0,f.jsx)(fe,{open:p||g,onOpenChange:R=>{R||(lt(),x(!1))},children:(0,f.jsxs)(be,{children:[(0,f.jsxs)(ve,{children:[(0,f.jsx)(xe,{children:p?"Add New Student":"Edit Student"}),(0,f.jsx)(De,{children:p?"Create student record.":"Update details."})]}),(0,f.jsxs)("form",{onSubmit:p?Ie:Ue,className:"space-y-4",children:[(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsx)(ne,{children:"Student ID"}),(0,f.jsx)(se,{required:!0,value:M.studentId,onChange:R=>H({...M,studentId:R.target.value})})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsx)(ne,{children:"Section"}),(0,f.jsxs)(Ra,{value:M.section,onValueChange:R=>H({...M,section:R}),children:[(0,f.jsx)(La,{children:(0,f.jsx)(Pa,{placeholder:"Select"})}),(0,f.jsx)(Ea,{children:xl.map(R=>(0,f.jsx)(Ia,{value:R,children:R},R))})]})]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsx)(ne,{children:"Full Name"}),(0,f.jsx)(se,{required:!0,value:M.fullName,onChange:R=>H({...M,fullName:R.target.value})})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsx)(ne,{children:"Email"}),(0,f.jsx)(se,{required:!0,type:"email",value:M.email,onChange:R=>H({...M,email:R.target.value})})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsx)(ne,{children:"Birthdate"}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)(Mt,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),(0,f.jsx)(se,{required:!0,type:"date",className:"pl-10",value:M.birthdate,onChange:R=>ce(R.target.value)})]})]}),p&&(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsx)(ne,{children:"Initial Password (Auto-Generated)"}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsxs)("div",{className:"relative flex-1",children:[(0,f.jsx)(se,{disabled:!0,value:M.password,type:te?"text":"password",className:"bg-gray-100 dark:bg-gray-800 font-mono pr-10"}),(0,f.jsx)("button",{type:"button",onClick:()=>v(!te),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:te?(0,f.jsx)(Xt,{className:"w-4 h-4"}):(0,f.jsx)(kt,{className:"w-4 h-4"})})]}),(0,f.jsx)(E,{type:"button",variant:"outline",size:"icon",onClick:()=>yt(M.password),children:(0,f.jsx)(Yt,{className:"w-4 h-4"})})]})]}),(0,f.jsx)(Se,{className:"mt-4",children:(0,f.jsx)(E,{type:"submit",disabled:X,children:X?(0,f.jsx)(Ce,{className:"animate-spin"}):p?"Create Record":"Save Changes"})})]})]})}),(0,f.jsx)(fe,{open:c,onOpenChange:w,children:(0,f.jsxs)(be,{children:[(0,f.jsxs)(ve,{children:[(0,f.jsx)(xe,{children:"Delete Student?"}),(0,f.jsx)(De,{children:"This action cannot be undone."})]}),(0,f.jsxs)(Se,{children:[(0,f.jsx)(E,{variant:"ghost",onClick:()=>w(!1),children:"Cancel"}),(0,f.jsx)(E,{variant:"destructive",onClick:Ae,disabled:X,children:"Delete"})]})]})}),(0,f.jsx)(fe,{open:S,onOpenChange:b,children:(0,f.jsxs)(be,{className:"sm:max-w-[425px]",children:[(0,f.jsxs)(ve,{children:[(0,f.jsxs)(xe,{className:"flex items-center gap-2 text-red-600",children:[(0,f.jsx)(lo,{className:"w-5 h-5"})," Reject Request?"]}),(0,f.jsx)(De,{children:"This will permanently delete the account request."})]}),(0,f.jsxs)(Se,{className:"mt-4",children:[(0,f.jsx)(E,{variant:"ghost",onClick:()=>b(!1),children:"Cancel"}),(0,f.jsx)(E,{variant:"destructive",onClick:Ve,disabled:X,children:X?(0,f.jsx)(Ce,{className:"animate-spin h-4 w-4"}):"Confirm Rejection"})]})]})})]})}var je=L(oe(),1);var D=L(V(),1);function Tn(){let[e,t]=(0,je.useState)([]),[a,r]=(0,je.useState)(!0),[o,n]=(0,je.useState)(""),[s,i]=(0,je.useState)(!1),[l,d]=(0,je.useState)(!1),[p,m]=(0,je.useState)(!1),[g,x]=(0,je.useState)(null),[c,w]=(0,je.useState)({employeeId:"",fullName:"",email:"",birthdate:"",password:""}),[S,b]=(0,je.useState)(!1),[k,T]=(0,je.useState)(!1),_=async()=>{r(!0);let{data:v,error:I}=await Z.from("users").select("*").eq("role","instructor").order("student_id",{ascending:!0});I?(console.error("Error fetching instructors:",I),$.error("Failed to load instructors.")):t(v||[]),r(!1)};(0,je.useEffect)(()=>{_()},[]);let y=v=>{let I=v?`Prof${v}`:"";w(ce=>({...ce,birthdate:v,password:I}))},B=async v=>{v.preventDefault(),b(!0);try{let{error:I}=await Z.from("users").insert([{student_id:c.employeeId,display_name:c.fullName,email:c.email,section:"CSIT",birthdate:c.birthdate,role:"instructor"}]);if(I)throw I;$.success((0,D.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,D.jsx)("span",{className:"font-bold",children:"Instructor Added!"}),(0,D.jsxs)("span",{className:"text-xs",children:["Password: ",(0,D.jsx)("span",{className:"font-mono",children:c.password})]})]})),i(!1),_()}catch(I){console.error(I),$.error("Failed to create: "+I.message)}finally{b(!1)}},O=async v=>{if(v.preventDefault(),!!g){b(!0);try{let{error:I}=await Z.from("users").update({student_id:c.employeeId,display_name:c.fullName,email:c.email,section:"CSIT",birthdate:c.birthdate}).eq("id",g.id);if(I)throw I;$.success("Instructor updated"),d(!1),_()}catch(I){$.error("Update failed: "+I.message)}finally{b(!1)}}},M=async()=>{if(g){b(!0);try{let{error:v}=await Z.from("users").delete().eq("id",g.id);if(v)throw v;$.success("Instructor deleted"),m(!1),_()}catch(v){$.error("Delete failed: "+v.message)}finally{b(!1)}}},H=v=>{navigator.clipboard.writeText(v),$.success("Password copied")},X=()=>{w({employeeId:"",fullName:"",email:"",birthdate:"",password:""}),i(!0)},Y=v=>{x(v),w({employeeId:v.student_id,fullName:v.display_name,email:v.email,birthdate:v.birthdate||"",password:""}),d(!0)},te=e.filter(v=>v.display_name?.toLowerCase().includes(o.toLowerCase())||v.student_id?.toLowerCase().includes(o.toLowerCase()));return(0,D.jsxs)("div",{className:"space-y-6",children:[(0,D.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,D.jsx)(go,{className:"w-8 h-8 text-indigo-500"}),"Instructor Management"]}),(0,D.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage CSIT faculty accounts."})]}),(0,D.jsxs)("div",{className:"flex gap-2",children:[(0,D.jsxs)(E,{variant:"outline",onClick:_,disabled:a,children:[(0,D.jsx)(Kt,{className:`w-4 h-4 mr-2 ${a?"animate-spin":""}`})," ","Refresh"]}),(0,D.jsxs)(E,{onClick:X,className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,D.jsx)(rt,{className:"w-4 h-4 mr-2"})," Add Instructor"]})]})]}),(0,D.jsxs)(ee,{className:"border-gray-200 dark:border-gray-800",children:[(0,D.jsx)(ge,{children:(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsx)(pe,{children:"Faculty Directory (CSIT)"}),(0,D.jsxs)("div",{className:"relative w-64",children:[(0,D.jsx)(Ct,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,D.jsx)(se,{placeholder:"Search name, ID...",className:"pl-8 bg-gray-50 dark:bg-gray-900",value:o,onChange:v=>n(v.target.value)})]})]})}),(0,D.jsx)(de,{children:(0,D.jsx)("div",{className:"rounded-md border border-gray-200 dark:border-gray-800 overflow-hidden",children:(0,D.jsx)("div",{className:"overflow-x-auto",children:(0,D.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,D.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700",children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{className:"px-4 py-3",children:"Employee ID"}),(0,D.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,D.jsx)("th",{className:"px-4 py-3",children:"Email"}),(0,D.jsx)("th",{className:"px-4 py-3",children:"Birthdate"}),(0,D.jsx)("th",{className:"px-4 py-3",children:"Status"}),(0,D.jsx)("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),(0,D.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800 bg-white dark:bg-gray-900",children:a?(0,D.jsx)("tr",{children:(0,D.jsx)("td",{colSpan:6,className:"p-4 text-center text-gray-500",children:"Loading..."})}):te.length===0?(0,D.jsx)("tr",{children:(0,D.jsx)("td",{colSpan:6,className:"p-4 text-center text-gray-500",children:"No instructors found."})}):te.map(v=>(0,D.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[(0,D.jsx)("td",{className:"px-4 py-3 font-mono text-gray-600 dark:text-gray-400",children:v.student_id}),(0,D.jsx)("td",{className:"px-4 py-3 font-bold text-gray-900 dark:text-white",children:v.display_name}),(0,D.jsx)("td",{className:"px-4 py-3 text-gray-500",children:v.email}),(0,D.jsx)("td",{className:"px-4 py-3 text-gray-500",children:v.birthdate||"-"}),(0,D.jsx)("td",{className:"px-4 py-3",children:v.google_bound?(0,D.jsx)(ye,{className:"bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/30 dark:text-green-400",children:"Verified"}):(0,D.jsx)(ye,{variant:"secondary",className:"text-gray-500",children:"Pending"})}),(0,D.jsx)("td",{className:"px-4 py-3 text-right",children:(0,D.jsxs)(Ge,{children:[(0,D.jsx)(Ye,{asChild:!0,children:(0,D.jsx)(E,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,D.jsx)(Qt,{className:"h-4 w-4"})})}),(0,D.jsxs)(qe,{align:"end",children:[(0,D.jsxs)(_e,{onClick:()=>Y(v),children:[(0,D.jsx)(Wt,{className:"mr-2 h-4 w-4"})," Edit"]}),(0,D.jsxs)(_e,{className:"text-red-600",onClick:()=>{x(v),m(!0)},children:[(0,D.jsx)(Jt,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},v.id))})]})})})})]}),(0,D.jsx)(fe,{open:s||l,onOpenChange:v=>{v||(i(!1),d(!1))},children:(0,D.jsxs)(be,{children:[(0,D.jsxs)(ve,{children:[(0,D.jsx)(xe,{children:s?"Add Instructor":"Edit Instructor"}),(0,D.jsx)(De,{children:s?"Create faculty account.":"Update details."})]}),(0,D.jsxs)("form",{onSubmit:s?B:O,className:"space-y-4",children:[(0,D.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsx)(ne,{children:"Employee ID"}),(0,D.jsx)(se,{required:!0,value:c.employeeId,onChange:v=>w({...c,employeeId:v.target.value})})]}),(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsx)(ne,{children:"Birthdate"}),(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsx)(Mt,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),(0,D.jsx)(se,{required:!0,type:"date",className:"pl-10",value:c.birthdate,onChange:v=>y(v.target.value)})]})]})]}),(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsx)(ne,{children:"Full Name"}),(0,D.jsx)(se,{required:!0,value:c.fullName,onChange:v=>w({...c,fullName:v.target.value})})]}),(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsx)(ne,{children:"Email"}),(0,D.jsx)(se,{required:!0,type:"email",value:c.email,onChange:v=>w({...c,email:v.target.value})})]}),s&&(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsx)(ne,{children:"Initial Password (Auto-Generated)"}),(0,D.jsxs)("div",{className:"flex gap-2",children:[(0,D.jsxs)("div",{className:"relative flex-1",children:[(0,D.jsx)(se,{disabled:!0,value:c.password,type:k?"text":"password",className:"bg-gray-100 dark:bg-gray-800 font-mono pr-10"}),(0,D.jsx)("button",{type:"button",onClick:()=>T(!k),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:k?(0,D.jsx)(Xt,{className:"w-4 h-4"}):(0,D.jsx)(kt,{className:"w-4 h-4"})})]}),(0,D.jsx)(E,{type:"button",variant:"outline",size:"icon",onClick:()=>H(c.password),children:(0,D.jsx)(Yt,{className:"w-4 h-4"})})]}),(0,D.jsxs)("p",{className:"text-[10px] text-muted-foreground",children:["Format: ",(0,D.jsx)("span",{className:"font-mono",children:"ProfYYYY-MM-DD"})]})]}),(0,D.jsx)(Se,{className:"mt-4",children:(0,D.jsx)(E,{type:"submit",disabled:S,children:S?(0,D.jsx)(Ce,{className:"animate-spin"}):s?"Create Instructor":"Save Changes"})})]})]})}),(0,D.jsx)(fe,{open:p,onOpenChange:m,children:(0,D.jsxs)(be,{children:[(0,D.jsxs)(ve,{children:[(0,D.jsx)(xe,{children:"Delete Instructor?"}),(0,D.jsx)(De,{children:"This action cannot be undone."})]}),(0,D.jsxs)(Se,{children:[(0,D.jsx)(E,{variant:"ghost",onClick:()=>m(!1),children:"Cancel"}),(0,D.jsx)(E,{variant:"destructive",onClick:M,disabled:S,children:"Delete"})]})]})})]})}var $e=L(oe(),1);var C=L(V(),1);function Rn(){let[e,t]=(0,$e.useState)([]),[a,r]=(0,$e.useState)(!0),[o,n]=(0,$e.useState)(""),[s,i]=(0,$e.useState)(!1),[l,d]=(0,$e.useState)(!1),[p,m]=(0,$e.useState)(!1),[g,x]=(0,$e.useState)(null),[c,w]=(0,$e.useState)({adminId:"",fullName:"",email:"",birthdate:"",password:""}),[S,b]=(0,$e.useState)(!1),[k,T]=(0,$e.useState)(!1),_=async()=>{r(!0);let{data:v,error:I}=await Z.from("users").select("*").in("role",["admin","superadmin"]).order("student_id",{ascending:!0});I?(console.error("Error fetching admins:",I),$.error("Failed to load admins.")):t(v||[]),r(!1)};(0,$e.useEffect)(()=>{_()},[]);let y=v=>{let I=v?`Adm${v}`:"";w(ce=>({...ce,birthdate:v,password:I}))},B=async v=>{v.preventDefault(),b(!0);try{let{error:I}=await Z.from("users").insert([{student_id:c.adminId,display_name:c.fullName,email:c.email,section:"Admin",birthdate:c.birthdate,role:"admin"}]);if(I)throw I;$.success((0,C.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,C.jsx)("span",{className:"font-bold",children:"Admin Account Created!"}),(0,C.jsxs)("span",{className:"text-xs",children:["Password: ",(0,C.jsx)("span",{className:"font-mono",children:c.password})]})]})),i(!1),_()}catch(I){console.error(I),$.error("Failed to create: "+I.message)}finally{b(!1)}},O=async v=>{if(v.preventDefault(),!!g){b(!0);try{let{error:I}=await Z.from("users").update({student_id:c.adminId,display_name:c.fullName,email:c.email,section:"Admin",birthdate:c.birthdate}).eq("id",g.id);if(I)throw I;$.success("Admin updated"),d(!1),_()}catch(I){$.error("Update failed: "+I.message)}finally{b(!1)}}},M=async()=>{if(g){if(g.role==="superadmin"){$.error("Cannot delete Superadmin accounts.");return}b(!0);try{let{error:v}=await Z.from("users").delete().eq("id",g.id);if(v)throw v;$.success("Admin deleted"),m(!1),_()}catch(v){$.error("Delete failed: "+v.message)}finally{b(!1)}}},H=v=>{navigator.clipboard.writeText(v),$.success("Password copied")},X=()=>{w({adminId:"",fullName:"",email:"",birthdate:"",password:""}),i(!0)},Y=v=>{x(v),w({adminId:v.student_id,fullName:v.display_name,email:v.email,birthdate:v.birthdate||"",password:""}),d(!0)},te=e.filter(v=>v.display_name?.toLowerCase().includes(o.toLowerCase())||v.student_id?.toLowerCase().includes(o.toLowerCase()));return(0,C.jsxs)("div",{className:"space-y-6",children:[(0,C.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,C.jsx)(Eo,{className:"w-8 h-8 text-indigo-500"}),"Admin Management"]}),(0,C.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage administrator accounts."})]}),(0,C.jsxs)("div",{className:"flex gap-2",children:[(0,C.jsxs)(E,{variant:"outline",onClick:_,disabled:a,children:[(0,C.jsx)(Kt,{className:`w-4 h-4 mr-2 ${a?"animate-spin":""}`})," ","Refresh"]}),(0,C.jsxs)(E,{onClick:X,className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,C.jsx)(rt,{className:"w-4 h-4 mr-2"})," Add Admin"]})]})]}),(0,C.jsxs)(ee,{className:"border-gray-200 dark:border-gray-800",children:[(0,C.jsx)(ge,{children:(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsx)(pe,{children:"Admin Directory"}),(0,C.jsxs)("div",{className:"relative w-64",children:[(0,C.jsx)(Ct,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,C.jsx)(se,{placeholder:"Search name, ID...",className:"pl-8 bg-gray-50 dark:bg-gray-900",value:o,onChange:v=>n(v.target.value)})]})]})}),(0,C.jsx)(de,{children:(0,C.jsx)("div",{className:"rounded-md border border-gray-200 dark:border-gray-800 overflow-hidden",children:(0,C.jsx)("div",{className:"overflow-x-auto",children:(0,C.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,C.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700",children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{className:"px-4 py-3",children:"Admin ID"}),(0,C.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,C.jsx)("th",{className:"px-4 py-3",children:"Email"}),(0,C.jsx)("th",{className:"px-4 py-3",children:"Role"}),(0,C.jsx)("th",{className:"px-4 py-3",children:"Birthdate"}),(0,C.jsx)("th",{className:"px-4 py-3",children:"Status"}),(0,C.jsx)("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),(0,C.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800 bg-white dark:bg-gray-900",children:a?(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Loading..."})}):te.length===0?(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"No admins found."})}):te.map(v=>(0,C.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[(0,C.jsx)("td",{className:"px-4 py-3 font-mono text-gray-600 dark:text-gray-400",children:v.student_id}),(0,C.jsx)("td",{className:"px-4 py-3 font-bold text-gray-900 dark:text-white",children:v.display_name}),(0,C.jsx)("td",{className:"px-4 py-3 text-gray-500",children:v.email}),(0,C.jsx)("td",{className:"px-4 py-3",children:v.role==="superadmin"?(0,C.jsx)(ye,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-400 border-yellow-200",children:"Superadmin"}):(0,C.jsx)(ye,{variant:"outline",className:"bg-gray-100 text-gray-700 border-gray-200 dark:bg-gray-800 dark:text-gray-300",children:"Admin"})}),(0,C.jsx)("td",{className:"px-4 py-3 text-gray-500",children:v.birthdate||"-"}),(0,C.jsx)("td",{className:"px-4 py-3",children:v.google_bound?(0,C.jsx)(ye,{className:"bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/30 dark:text-green-400",children:"Verified"}):(0,C.jsx)(ye,{variant:"secondary",className:"text-gray-500",children:"Pending"})}),(0,C.jsx)("td",{className:"px-4 py-3 text-right",children:(0,C.jsxs)(Ge,{children:[(0,C.jsx)(Ye,{asChild:!0,children:(0,C.jsx)(E,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,C.jsx)(Qt,{className:"h-4 w-4"})})}),(0,C.jsxs)(qe,{align:"end",children:[(0,C.jsxs)(_e,{onClick:()=>Y(v),children:[(0,C.jsx)(Wt,{className:"mr-2 h-4 w-4"})," Edit"]}),v.role!=="superadmin"&&(0,C.jsxs)(_e,{className:"text-red-600",onClick:()=>{x(v),m(!0)},children:[(0,C.jsx)(Jt,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},v.id))})]})})})})]}),(0,C.jsx)(fe,{open:s||l,onOpenChange:v=>{v||(i(!1),d(!1))},children:(0,C.jsxs)(be,{children:[(0,C.jsxs)(ve,{children:[(0,C.jsx)(xe,{children:s?"Add Admin":"Edit Admin"}),(0,C.jsx)(De,{children:s?"Create administrator account.":"Update details."})]}),(0,C.jsxs)("form",{onSubmit:s?B:O,className:"space-y-4",children:[(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(ne,{children:"Admin ID"}),(0,C.jsx)(se,{required:!0,value:c.adminId,onChange:v=>w({...c,adminId:v.target.value})})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(ne,{children:"Birthdate"}),(0,C.jsxs)("div",{className:"relative",children:[(0,C.jsx)(Mt,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),(0,C.jsx)(se,{required:!0,type:"date",className:"pl-10",value:c.birthdate,onChange:v=>y(v.target.value)})]})]})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(ne,{children:"Full Name"}),(0,C.jsx)(se,{required:!0,value:c.fullName,onChange:v=>w({...c,fullName:v.target.value})})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(ne,{children:"Email"}),(0,C.jsx)(se,{required:!0,type:"email",value:c.email,onChange:v=>w({...c,email:v.target.value})})]}),s&&(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(ne,{children:"Initial Password (Auto-Generated)"}),(0,C.jsxs)("div",{className:"flex gap-2",children:[(0,C.jsxs)("div",{className:"relative flex-1",children:[(0,C.jsx)(se,{disabled:!0,value:c.password,type:k?"text":"password",className:"bg-gray-100 dark:bg-gray-800 font-mono pr-10"}),(0,C.jsx)("button",{type:"button",onClick:()=>T(!k),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:k?(0,C.jsx)(Xt,{className:"w-4 h-4"}):(0,C.jsx)(kt,{className:"w-4 h-4"})})]}),(0,C.jsx)(E,{type:"button",variant:"outline",size:"icon",onClick:()=>H(c.password),children:(0,C.jsx)(Yt,{className:"w-4 h-4"})})]}),(0,C.jsxs)("p",{className:"text-[10px] text-muted-foreground",children:["Format: ",(0,C.jsx)("span",{className:"font-mono",children:"AdmYYYY-MM-DD"})]})]}),(0,C.jsx)(Se,{className:"mt-4",children:(0,C.jsx)(E,{type:"submit",disabled:S,children:S?(0,C.jsx)(Ce,{className:"animate-spin"}):s?"Create Admin":"Save Changes"})})]})]})}),(0,C.jsx)(fe,{open:p,onOpenChange:m,children:(0,C.jsxs)(be,{children:[(0,C.jsxs)(ve,{children:[(0,C.jsx)(xe,{children:"Delete Admin?"}),(0,C.jsx)(De,{children:"This action cannot be undone."})]}),(0,C.jsxs)(Se,{children:[(0,C.jsx)(E,{variant:"ghost",onClick:()=>m(!1),children:"Cancel"}),(0,C.jsx)(E,{variant:"destructive",onClick:M,disabled:S,children:"Delete"})]})]})})]})}var jt=L(oe(),1);var G=L(V(),1),wl=["All Sections","BSIT-1A","BSIT-1B","BSCS-1A","BSIS","BSAIS","ACT"];function Pn(){let[e,t]=(0,jt.useState)([]),[a,r]=(0,jt.useState)(!0),[o,n]=(0,jt.useState)(""),[s,i]=(0,jt.useState)("All Sections");(0,jt.useEffect)(()=>{l()},[]);let l=async()=>{r(!0);let{data:m,error:g}=await Z.from("users").select("*").eq("role","user").order("display_name");if(g)$.error("Failed to load reports");else{let x=m.map(c=>({...c,adventure_progress:c.settings?.adventure_progress||Math.floor(Math.random()*100),mp_wins:c.stats?.mp_wins||Math.floor(Math.random()*20),challenge_stars:c.stats?.stars||Math.floor(Math.random()*15)}));t(x||[])}r(!1)},d=()=>{let m=p.map(g=>({"Student ID":g.student_id,Name:g.display_name,Section:g.section,Level:Math.floor((g.xp||0)/1e3)+1,"Total XP":g.xp||0,"Adventure Progress (%)":`${g.adventure_progress}%`,"Multiplayer Wins":g.mp_wins,"Challenge Stars":g.challenge_stars,"Joined Date":new Date(g.created_at).toLocaleDateString()}));Za(m,`Student_Report_${s.replace(" ","_")}`),$.success("Report downloaded successfully")},p=e.filter(m=>{let g=m.display_name?.toLowerCase().includes(o.toLowerCase())||m.student_id?.toLowerCase().includes(o.toLowerCase()),x=s==="All Sections"||m.section===s;return g&&x});return(0,G.jsxs)(ee,{className:"border-gray-200 dark:border-gray-800",children:[(0,G.jsxs)(ge,{children:[(0,G.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,G.jsx)(pe,{children:"Student Progress Report"}),(0,G.jsx)("div",{className:"flex gap-2",children:(0,G.jsxs)(E,{variant:"outline",onClick:d,disabled:a||p.length===0,children:[(0,G.jsx)(ba,{className:"w-4 h-4 mr-2"})," Export CSV"]})})]}),(0,G.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mt-4",children:[(0,G.jsxs)("div",{className:"relative flex-1",children:[(0,G.jsx)(Ct,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,G.jsx)(se,{placeholder:"Search student name or ID...",className:"pl-8",value:o,onChange:m=>n(m.target.value)})]}),(0,G.jsx)("div",{className:"w-full md:w-48",children:(0,G.jsxs)(Ra,{value:s,onValueChange:i,children:[(0,G.jsxs)(La,{children:[(0,G.jsx)(ha,{className:"w-4 h-4 mr-2 text-gray-400"}),(0,G.jsx)(Pa,{placeholder:"Filter Section"})]}),(0,G.jsx)(Ea,{children:wl.map(m=>(0,G.jsx)(Ia,{value:m,children:m},m))})]})})]})]}),(0,G.jsx)(de,{children:(0,G.jsx)("div",{className:"rounded-md border border-gray-200 dark:border-gray-800 overflow-hidden",children:(0,G.jsx)("div",{className:"overflow-x-auto",children:(0,G.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,G.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800 font-medium text-gray-700 dark:text-gray-300",children:(0,G.jsxs)("tr",{children:[(0,G.jsx)("th",{className:"p-3",children:"Student"}),(0,G.jsx)("th",{className:"p-3",children:"Level / XP"}),(0,G.jsx)("th",{className:"p-3",children:"Adventure"}),(0,G.jsx)("th",{className:"p-3",children:"Multiplayer"}),(0,G.jsx)("th",{className:"p-3",children:"Challenges"})]})}),(0,G.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800 bg-white dark:bg-gray-900",children:a?(0,G.jsx)("tr",{children:(0,G.jsx)("td",{colSpan:5,className:"p-8 text-center",children:(0,G.jsx)(Ce,{className:"animate-spin mx-auto"})})}):p.length===0?(0,G.jsx)("tr",{children:(0,G.jsx)("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"No records found."})}):p.map(m=>(0,G.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[(0,G.jsxs)("td",{className:"p-3",children:[(0,G.jsx)("div",{className:"font-bold text-gray-900 dark:text-white",children:m.display_name}),(0,G.jsxs)("div",{className:"text-xs text-gray-500",children:[m.student_id," \u2022 ",m.section]})]}),(0,G.jsxs)("td",{className:"p-3",children:[(0,G.jsxs)("div",{className:"font-mono text-indigo-600 dark:text-indigo-400 font-bold",children:["Lvl ",Math.floor((m.xp||0)/1e3)+1]}),(0,G.jsxs)("div",{className:"text-xs text-gray-500",children:[m.xp?.toLocaleString()," XP"]})]}),(0,G.jsx)("td",{className:"p-3",children:(0,G.jsxs)("div",{className:"flex items-center gap-2",children:[(0,G.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 max-w-[80px]",children:(0,G.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${m.adventure_progress}%`}})}),(0,G.jsxs)("span",{className:"text-xs",children:[m.adventure_progress,"%"]})]})}),(0,G.jsx)("td",{className:"p-3",children:(0,G.jsxs)(ye,{variant:"outline",className:"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300",children:[m.mp_wins," Wins"]})}),(0,G.jsx)("td",{className:"p-3",children:(0,G.jsxs)("div",{className:"flex items-center gap-1 text-yellow-600 dark:text-yellow-500 font-medium",children:["\u2605 ",m.challenge_stars]})})]},m.id))})]})})})})]})}var Ne=L(V(),1);var Nl={"user-management":["superadmin","admin","instructor"],"student-management":["superadmin","admin","instructor"],"instructor-management":["superadmin","admin"],"admin-management":["superadmin"],"user-reports":["superadmin","admin","instructor"]};function En({activeTab:e,user:t,onSaveAvatar:a,onStartMultiplayerQuiz:r,onJoinMultiplayerQuiz:o}){return(0,Ln.useMemo)(()=>{let s=Nl[e];return s?s.includes(t?.role||"user"):!0},[e,t])?(0,Ne.jsxs)("div",{className:"w-full h-full relative fade-in-animation",children:[e==="home"&&(0,Ne.jsx)(Us,{onTabChange:s=>{}}),e==="play"&&(0,Ne.jsx)(zs,{}),e==="leaderboard"&&(0,Ne.jsx)(Gs,{}),e==="quest"&&(0,Ne.jsx)(qs,{}),e==="streak"&&(0,Ne.jsx)(Zs,{}),e==="store"&&(0,Ne.jsx)(Cn,{}),e==="profile"&&(0,Ne.jsx)(Sn,{user:t,onSaveAvatar:a}),e==="settings"&&(0,Ne.jsx)(ln,{}),e==="about"&&(0,Ne.jsx)(dn,{}),e==="student-management"&&(0,Ne.jsx)(Dn,{}),e==="instructor-management"&&(0,Ne.jsx)(Tn,{}),e==="admin-management"&&(0,Ne.jsx)(Rn,{}),e==="user-reports"&&(0,Ne.jsx)(Pn,{})]}):(0,Ne.jsxs)("div",{className:"flex flex-col items-center justify-center h-[50vh] text-center space-y-4",children:[(0,Ne.jsx)("div",{className:"p-4 bg-red-100 text-red-600 rounded-full",children:(0,Ne.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ne.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Ne.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Access Denied"}),(0,Ne.jsxs)("p",{className:"text-gray-500 max-w-sm",children:["You do not have permission to view the ",(0,Ne.jsx)("strong",{children:e})," ","module. Please contact your administrator."]})]})}var An=L(oe(),1);var A=L(V(),1);function In({icon:e,value:t,color:a}){return(0,A.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 px-3 py-1.5 rounded-full text-lg font-medium transition-transform hover:scale-125 cursor-default",children:[e,(0,A.jsx)("span",{className:`text-gray-900 dark:text-gray-100 ${a||""}`,children:t})]})}function kl({hearts:e,timeRemaining:t,buyHearts:a}){let r=e>=wr;return(0,A.jsxs)(Ge,{children:[(0,A.jsx)(Ye,{asChild:!0,children:(0,A.jsxs)("button",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 px-3 py-1.5 rounded-full text-lg font-medium transition-transform hover:scale-125 cursor-pointer outline-none focus:ring-2 ring-red-200 dark:ring-red-900",children:[(0,A.jsx)(Ba,{className:"h-6 w-6 text-red-500 fill-red-500"}),(0,A.jsx)("span",{className:"text-gray-900 dark:text-gray-100",children:e}),!r&&(0,A.jsx)("span",{className:"text-[10px] text-gray-400 font-mono ml-1",children:t})]})}),(0,A.jsxs)(qe,{align:"end",className:"w-72 p-2",children:[(0,A.jsxs)(xr,{className:"flex items-center justify-between",children:[(0,A.jsx)("span",{children:"Lives"}),(0,A.jsx)(ye,{variant:r?"default":"outline",className:r?"bg-green-500":"text-orange-500 border-orange-500",children:r?"MAX":"REGENERATING"})]}),(0,A.jsx)(Aa,{}),(0,A.jsxs)("div",{className:"p-3 bg-secondary/30 rounded-md mb-2 space-y-2",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,A.jsx)("span",{className:"text-muted-foreground",children:"Current Hearts"}),(0,A.jsxs)("span",{className:"font-bold",children:[e," / ",wr]})]}),!r&&(0,A.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,A.jsxs)("span",{className:"text-muted-foreground flex items-center gap-1",children:[(0,A.jsx)(Bt,{className:"w-3 h-3"})," Next in"]}),(0,A.jsx)("span",{className:"font-mono font-bold text-orange-500",children:t})]})]}),(0,A.jsxs)(E,{className:"w-full gap-2 font-bold bg-green-500 hover:bg-green-600 text-white",size:"lg",disabled:r,onClick:()=>{r||a()},children:[(0,A.jsx)(He,{className:"w-4 h-4 fill-white"}),r?"Hearts are Full":`Refill Full (${Jo})`]})]})]})}var Cl={streaks:0,coins:0,hearts:0};function Mn({user:e,sidebarCollapsed:t,onToggleSidebar:a,stats:r=Cl,onSwitchTheme:o,onLogout:n}){let[s,i]=(0,An.useState)(!1),{currentLevel:l,progressPercent:d}=Ma(e?.xp||0),{hearts:p,timeRemaining:m,buyHearts:g}=es(e),x=28,c=32,w=2*Math.PI*x,S=w-d/100*w,b=()=>{i(!1),setTimeout(()=>{document.body.style.pointerEvents="",document.body.style.overflow="",n()},300)};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("header",{className:"border-b bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm sticky top-0 z-10 transition-colors",children:(0,A.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between",children:[(0,A.jsx)("div",{className:"flex-none",children:(0,A.jsx)(E,{variant:"ghost",size:"icon",onClick:a,className:"h-9 w-9",children:t?(0,A.jsx)(To,{className:"h-5 w-5"}):(0,A.jsx)(Do,{className:"h-5 w-5"})})}),(0,A.jsx)("div",{className:"flex-1 flex justify-center no-scrollbar mx-4",children:(0,A.jsxs)("div",{className:"flex items-center space-x-3 md:space-x-6",children:[(0,A.jsxs)("div",{className:"flex items-center gap-2 bg-yellow-100 dark:bg-yellow-900/30 px-3 py-1.5 rounded-full text-lg font-black text-yellow-600 dark:text-yellow-400 transition-transform hover:scale-125 cursor-default",children:["Lvl ",l]}),(0,A.jsx)("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-700 hidden sm:block"}),(0,A.jsx)(In,{icon:(0,A.jsx)(Tt,{className:"h-6 w-5"}),value:r.streaks}),(0,A.jsx)(In,{icon:(0,A.jsx)(Fa,{className:"h-6 w-6"}),value:r.coins}),(0,A.jsx)(kl,{hearts:p,timeRemaining:m,buyHearts:g})]})}),(0,A.jsx)("div",{className:"flex-none",children:(0,A.jsxs)(Ge,{children:[(0,A.jsx)(Ye,{asChild:!0,children:(0,A.jsxs)("div",{className:"flex items-center space-x-3 cursor-pointer p-1 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group select-none",children:[(0,A.jsxs)("div",{className:"relative flex items-center justify-center w-16 h-16",children:[(0,A.jsxs)("svg",{className:"absolute w-full h-full transform -rotate-90",children:[(0,A.jsx)("circle",{cx:c,cy:c,r:x,fill:"none",className:"stroke-gray-200 dark:stroke-gray-700",strokeWidth:"6"}),(0,A.jsx)("circle",{cx:c,cy:c,r:x,fill:"none",className:"stroke-indigo-500 transition-all duration-1000 ease-out",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:w,strokeDashoffset:S})]}),(0,A.jsx)("div",{className:"h-14 w-14 rounded-full overflow-hidden border-2 border-white dark:border-gray-800 bg-gray-100 dark:bg-gray-800 z-10",children:(0,A.jsx)(Dt,{config:e?.avatarConfig,headOnly:!0})})]}),(0,A.jsxs)("div",{className:"hidden md:block text-left",children:[(0,A.jsx)("p",{className:"text-sm font-bold text-gray-900 dark:text-gray-100 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:e?.displayName||"User"}),(0,A.jsxs)("p",{className:"text-[10px] text-muted-foreground font-mono",children:[Math.floor(d),"% to Lvl ",l+1]})]})]})}),(0,A.jsxs)(qe,{align:"end",className:"w-56",children:[(0,A.jsxs)(xr,{children:["My Account",(0,A.jsx)("span",{className:"ml-2 text-xs font-normal text-muted-foreground bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded capitalize",children:e?.role||"Student"})]}),(0,A.jsx)(Aa,{}),(0,A.jsxs)(_e,{onClick:o,className:"cursor-pointer",children:[(0,A.jsx)(Na,{className:"mr-2 h-4 w-4"}),(0,A.jsx)("span",{children:"Switch Theme"})]}),(0,A.jsx)(Aa,{}),(0,A.jsxs)(_e,{onSelect:k=>k.preventDefault(),onClick:()=>i(!0),className:"cursor-pointer text-red-600 focus:text-red-600 focus:bg-red-50 dark:focus:bg-red-950/20",children:[(0,A.jsx)(wa,{className:"mr-2 h-4 w-4"}),(0,A.jsx)("span",{children:"Logout"})]})]})]})})]})}),(0,A.jsx)(fe,{open:s,onOpenChange:i,children:(0,A.jsxs)(be,{children:[(0,A.jsxs)(ve,{children:[(0,A.jsx)(xe,{children:"Sign out?"}),(0,A.jsx)(De,{children:"Are you sure you want to sign out? You will need to log back in to access your dashboard."})]}),(0,A.jsxs)(Se,{className:"gap-2 sm:gap-0",children:[(0,A.jsx)(E,{variant:"ghost",onClick:()=>i(!1),children:"Cancel"}),(0,A.jsx)(E,{variant:"destructive",onClick:b,className:"bg-red-600 hover:bg-red-700",children:"Sign out"})]})]})})]})}var re=L(V(),1);async function Bn({request:e}){let{data:{session:t}}=await Z.auth.getSession();if(!t)return{user:null};let{data:a,error:r}=await Z.from("users").select("*").eq("id",t.user.id).single();return r||!a?{user:null}:{user:{uid:a.id,email:a.email,studentId:a.student_id,displayName:a.display_name||"Coder",photoURL:a.photo_url,avatarConfig:a.avatar_config,isOnboarded:a.is_onboarded??!1,settings:a.settings,xp:a.xp,level:a.level,streaks:a.streaks,coins:a.coins,hearts:a.hearts,streakFreezes:a.streak_freezes||0,hints:a.hints||0,ownedCosmetics:a.owned_cosmetics||[],inventory:a.inventory||[],trophies:a.trophies,league:a.league,joinedAt:a.joined_at,role:a.role,activeDates:a.active_dates||[],badges:a.badges||[],googleBound:!!a.google_provider_id}}}Bn.hydrate=!0;var Sl=({formMethod:e,defaultShouldRevalidate:t})=>e==="GET"?!1:t;function Dl(){return(0,re.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 transition-colors duration-300",children:[(0,re.jsxs)("div",{className:"w-64 h-screen border-r border-indigo-100 dark:border-gray-800 bg-white/50 dark:bg-gray-900/50 p-4 space-y-6 hidden md:block backdrop-blur-sm",children:[(0,re.jsx)(J,{className:"h-12 w-40 mb-10 bg-indigo-200/50 dark:bg-gray-700"}),(0,re.jsxs)("div",{className:"space-y-3",children:[(0,re.jsx)(J,{className:"h-10 w-full bg-indigo-100 dark:bg-gray-800"}),(0,re.jsx)(J,{className:"h-10 w-full bg-indigo-100 dark:bg-gray-800"}),(0,re.jsx)(J,{className:"h-10 w-full bg-indigo-100 dark:bg-gray-800"}),(0,re.jsx)(J,{className:"h-10 w-full bg-indigo-100 dark:bg-gray-800"})]})]}),(0,re.jsxs)("div",{className:"flex-1 flex flex-col p-6 space-y-8",children:[(0,re.jsxs)("div",{className:"flex justify-between items-center",children:[(0,re.jsxs)("div",{className:"space-y-2",children:[(0,re.jsx)(J,{className:"h-8 w-64 bg-indigo-200 dark:bg-gray-700"}),(0,re.jsx)(J,{className:"h-4 w-48 bg-indigo-100 dark:bg-gray-800"})]}),(0,re.jsxs)("div",{className:"flex space-x-3",children:[(0,re.jsx)(J,{className:"h-10 w-10 rounded-full bg-indigo-200 dark:bg-gray-700"}),(0,re.jsx)(J,{className:"h-10 w-10 rounded-full bg-indigo-200 dark:bg-gray-700"})]})]}),(0,re.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pt-4",children:[(0,re.jsx)(J,{className:"h-48 w-full rounded-3xl bg-white/60 dark:bg-gray-800/60"}),(0,re.jsx)(J,{className:"h-48 w-full rounded-3xl bg-white/60 dark:bg-gray-800/60"}),(0,re.jsx)(J,{className:"h-48 w-full rounded-3xl bg-white/60 dark:bg-gray-800/60"})]})]})]})}var Tl=()=>[{title:"Dashboard | CodeON"},{name:"description",content:"Your CodeON dashboard"}];function _n(){let{user:e}=no(),{user:t,logout:a,updateProfile:r,syncUser:o}=Le(),n=Vt(),s=(0,it.useRef)(!1);(0,it.useEffect)(()=>{e&&!s.current&&(JSON.stringify(e)!==JSON.stringify(t)&&(console.log("Syncing fresh loader data..."),o(e)),s.current=!0)},[e,t,o]);let i=t||e;(0,it.useEffect)(()=>{i&&i.isOnboarded===!1&&n("/onboarding")},[i,n]);let[l,d]=(0,it.useState)("home"),[p,m]=(0,it.useState)(!1);(0,it.useEffect)(()=>{let T=localStorage.getItem("active_dashboard_tab");T&&d(T)},[]),(0,it.useEffect)(()=>{localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]);let g=()=>{let T=document.documentElement.classList.toggle("dark");localStorage.theme=T?"dark":"light"},x=async()=>{try{localStorage.removeItem("active_dashboard_tab"),await a(),n("/login")}catch(T){console.error("Error logging out:",T)}},c=()=>m(!p),w=()=>{let T=Math.random().toString(36).substring(2,8);n(`/multiplayer/${T}`)},S=()=>{let T=prompt("Enter game code:");T&&n(`/multiplayer/${T}`)},b=async T=>{try{await r({avatarConfig:T})}catch(_){console.error("Error saving avatar:",_)}},k=T=>{if(T==="logout"){x();return}d(T),localStorage.setItem("active_dashboard_tab",T)};return i&&i.isOnboarded===!1?null:(0,re.jsxs)(as,{children:[(0,re.jsx)("style",{children:`
        .scrollbar-hide::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        .scrollbar-hide::-webkit-scrollbar-track {
            background: transparent; 
        }
        .scrollbar-hide::-webkit-scrollbar-thumb {
            background-color: rgba(156, 163, 175, 0.3); /* Gray-400 with opacity */
            border-radius: 9999px;
        }
        .scrollbar-hide::-webkit-scrollbar-thumb:hover {
            background-color: rgba(156, 163, 175, 0.5);
        }
        /* For Firefox */
        .scrollbar-hide {
            scrollbar-width: thin;
            scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
        }
      `}),(0,re.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 transition-colors duration-300",children:[(0,re.jsx)("div",{className:`flex-shrink-0 transition-all duration-300 ${p?"w-24":"w-64"} h-screen hidden md:block`,children:(0,re.jsx)(us,{activeTab:l,onTabChange:k,onLogout:x,user:i,collapsed:p})}),(0,re.jsxs)("div",{className:"flex-1 flex flex-col overflow-y-auto transition-all duration-300 scrollbar-hide",children:[(0,re.jsx)(Mn,{user:i,sidebarCollapsed:p,onToggleSidebar:c,stats:{streaks:i?.streaks||0,coins:i?.coins||0,hearts:i?.hearts||5},onSwitchTheme:g,onLogout:x}),(0,re.jsx)("main",{className:"p-4 md:p-6 z-0",children:(0,re.jsx)(En,{activeTab:l,user:i,onSaveAvatar:b,onStartMultiplayerQuiz:w,onJoinMultiplayerQuiz:S})})]})]})]})}export{Dl as HydrateFallback,Bn as clientLoader,_n as default,Tl as meta,Sl as shouldRevalidate};
