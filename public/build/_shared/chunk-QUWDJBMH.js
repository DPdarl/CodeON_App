import{a as R}from"/build/_shared/chunk-NRPYLUQ5.js";import{a as S,b as L,c as q,e as I}from"/build/_shared/chunk-MWUWTNJM.js";import{a as j,b as V}from"/build/_shared/chunk-GQOCD34X.js";import{g as $}from"/build/_shared/chunk-ERM4YBQE.js";import{Ea as d,Fa as E,G,ea as O,ga as D,ia as M,ta as T,va as _}from"/build/_shared/chunk-UEXE7SL4.js";import{a as K,d as B,m}from"/build/_shared/chunk-UN5IVU4J.js";import{e as c}from"/build/_shared/chunk-ADMCF34Z.js";var U=c(m(),1);function b({className:s,...r}){return(0,U.jsx)("div",{className:d("animate-pulse rounded-md bg-primary/10",s),...r})}var g=c(K(),1);var W=s=>{let{body:r="male",eyes:i="normal",hair:t="default",mouth:x="smile",top:o="tshirt",bottom:k="pants",shoes:h="shoes",accessory:w="none"}=s||{},N=r==="female"?"/assets/body/BaseBodyFemale.png":"/assets/body/BaseBodyMale.png",n=`${i}.png`;i==="angry"?n=r==="female"?"angryf.png":"angrym.png":i==="normal"&&(n=r==="female"?"normalf.png":"normalm.png");let A=`/assets/eyes/${n}`,a=null;if(t!=="none"){let l="HairDefaultM1.png";r==="female"?t==="default"?l="HairDefaultF2.png":t==="style1"?l="HairStyleF1.png":t==="style2"?l="HairStyleF3.png":l="HairDefaultF2.png":t==="default"?l="HairDefaultM1.png":t==="style1"?l="HairStyleM2.png":t==="style2"?l="HairStyleM3.png":l="HairDefaultM1.png",a=`/assets/hair/${l}`}let C=`/assets/mouth/${x}.png`,y=null;if(o!=="none"){let l=["leatherjacket","sando","sweater","tshirt"],F=`${o}.png`;r==="female"&&l.includes(o)&&(F=`${o}f.png`),y=`/assets/tops/${F}`}let H=null;k!=="none"&&(H=`/assets/bottoms/${k}.png`);let z=null;if(h!=="none"){let l=`${h}.png`;h==="shoes"&&r==="female"&&(l="shoesf.png"),z=`/assets/shoes/${l}`}let J=w!=="none"?`/assets/accessories/${w}.png`:null;return{bodyPath:N,eyesPath:A,hairPath:a,mouthPath:C,topPath:y,bottomPath:H,shoesPath:z,accessoryPath:J}};var P=c(m(),1);function Z({config:s,className:r,headOnly:i=!1}){let t=W(s),x=[{src:t.bodyPath,z:0,name:"Body"},{src:t.eyesPath,z:10,name:"Eyes"},{src:t.mouthPath,z:10,name:"Mouth"},t.bottomPath?{src:t.bottomPath,z:20,name:"Bottoms"}:null,t.shoesPath?{src:t.shoesPath,z:20,name:"Shoes"}:null,t.topPath?{src:t.topPath,z:30,name:"Top"}:null,t.hairPath?{src:t.hairPath,z:40,name:"Hair"}:null,t.accessoryPath?{src:t.accessoryPath,z:50,name:"Accessory"}:null].filter(Boolean);return(0,P.jsx)("div",{className:d("relative w-full h-full overflow-hidden",r),children:(0,P.jsx)("div",{className:d("relative w-full h-full transition-transform duration-300 ease-in-out",i?"scale-[1.7] origin-[50%_10%]":"scale-100 origin-center"),children:x.map(o=>(0,P.jsx)("img",{src:o.src,alt:o.name,className:"absolute inset-0 w-full h-full object-contain",style:{zIndex:o.z},draggable:!1,onError:k=>{k.currentTarget.style.display="none"}},o.name))})})}var e=c(m(),1),Q=[{id:"body",label:"Body",icon:T},{id:"hair",label:"Hair",icon:M},{id:"face",label:"Face",icon:D},{id:"outfit",label:"Outfit",icon:O},{id:"gear",label:"Gear",icon:G}],p={body:["male","female"],hair:["none","default","style1","style2"],eyes:["normal","angry","disgust","eepy","nonchalant","shock","sideeye"],mouth:["smile","small","sad","kissy","cat","nonchalant"],top:["none","tshirt","sweater","sando","leatherjacket"],bottom:["none","pants","short","skirt"],shoes:["none","shoes","shoesf","boots","slides","fp"],accessory:["none","glassesfull","glassesround","glassessquare","semisquaredglasses","bowtie","scarf1","scarf2","scarf3"]},X={body:"male",hair:"default",eyes:"normal",mouth:"smile",top:"tshirt",bottom:"pants",shoes:"shoes",accessory:"none"};function ue({initialConfig:s,onSave:r,saveLabel:i="Save Avatar"}){let[t,x]=(0,g.useState)(null),[o,k]=(0,g.useState)("body"),[h,w]=(0,g.useState)(!1),N=(0,g.useRef)(null);if((0,g.useEffect)(()=>{x({...X,...s})},[s]),(0,g.useEffect)(()=>{let a=()=>{N.current&&N.current.scrollIntoView({behavior:"smooth",block:"start"})};requestAnimationFrame(()=>{requestAnimationFrame(a)})},[]),!t)return(0,e.jsx)(Y,{});let n=(a,C)=>{x(y=>({...y,[a]:C}))};return(0,e.jsxs)(S,{ref:N,className:"bg-white dark:bg-gray-900 shadow-xl border-gray-100 dark:border-gray-800 rounded-3xl overflow-hidden scroll-mt-24",children:[(0,e.jsx)(L,{className:"border-b border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:(0,e.jsxs)(q,{className:"text-2xl font-black flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[(0,e.jsx)(_,{className:"w-6 h-6 text-indigo-500"}),"Avatar Studio"]})}),(0,e.jsx)(I,{className:"p-0",children:(0,e.jsxs)("div",{className:"flex flex-col lg:flex-row h-[800px] lg:h-[650px]",children:[(0,e.jsxs)("div",{className:"w-full lg:w-[55%] bg-gray-100/50 dark:bg-gray-900/50 p-6 flex flex-col justify-between border-r border-gray-100 dark:border-gray-800",children:[(0,e.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,e.jsxs)("div",{className:"w-full max-w-[450px] aspect-square rounded-3xl overflow-hidden bg-white dark:bg-gray-800 shadow-sm border-4 border-white dark:border-gray-700 relative",children:[(0,e.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-50 to-white dark:from-gray-800 dark:to-gray-900 opacity-50"}),(0,e.jsx)("div",{className:"relative z-10 h-full",children:(0,e.jsx)(Z,{config:t})})]})}),(0,e.jsx)("div",{className:"mt-6 max-w-[450px] mx-auto w-full",children:(0,e.jsx)(E,{onClick:async()=>{w(!0);try{await r(t)}catch(a){console.error(a),R.error("Failed to save avatar.")}finally{w(!1)}},disabled:h,className:d("w-full h-14 rounded-2xl font-black text-xl shadow-lg shadow-indigo-200 dark:shadow-none transition-all","bg-indigo-600 hover:bg-indigo-700 text-white hover:scale-[1.02] active:scale-[0.98]",h&&"opacity-80 cursor-wait"),children:h?"Saving...":i})})]}),(0,e.jsxs)("div",{className:"w-full lg:w-[45%] flex flex-col bg-white dark:bg-gray-900",children:[(0,e.jsx)("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800",children:(0,e.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide snap-x",children:Q.map(a=>{let C=a.icon,y=o===a.id;return(0,e.jsxs)("button",{onClick:()=>k(a.id),className:d("flex items-center gap-2 px-4 py-2.5 rounded-2xl font-bold text-sm transition-all whitespace-nowrap snap-start border-b-4",y?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 border-indigo-500":"bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400 border-transparent hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:[(0,e.jsx)(C,{className:d("w-4 h-4",y?"fill-current":"stroke-current")}),a.label]},a.id)})})}),(0,e.jsx)("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:(0,e.jsx)(j,{mode:"wait",children:(0,e.jsxs)(V.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.15},className:"space-y-8",children:[o==="body"&&(0,e.jsx)(f,{title:"Body Base",children:(0,e.jsx)("div",{className:"grid grid-cols-2 gap-4",children:p.body.map(a=>(0,e.jsx)(u,{label:a,isSelected:t.body===a,onClick:()=>n("body",a)},a))})}),o==="hair"&&(0,e.jsx)(f,{title:"Hairstyles",children:(0,e.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-4",children:p.hair.map(a=>(0,e.jsx)(u,{label:a,isSelected:t.hair===a,onClick:()=>n("hair",a)},a))})}),o==="face"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(f,{title:"Eyes",children:(0,e.jsx)("div",{className:"grid grid-cols-2 gap-4",children:p.eyes.map(a=>(0,e.jsx)(u,{label:a,isSelected:t.eyes===a,onClick:()=>n("eyes",a)},a))})}),(0,e.jsx)(f,{title:"Mouth",children:(0,e.jsx)("div",{className:"grid grid-cols-2 gap-4",children:p.mouth.map(a=>(0,e.jsx)(u,{label:a,isSelected:t.mouth===a,onClick:()=>n("mouth",a)},a))})})]}),o==="outfit"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(f,{title:"Tops",children:(0,e.jsx)("div",{className:"grid grid-cols-2 gap-4",children:p.top.map(a=>(0,e.jsx)(u,{label:a,isSelected:t.top===a,onClick:()=>n("top",a)},a))})}),(0,e.jsx)(f,{title:"Bottoms",children:(0,e.jsx)("div",{className:"grid grid-cols-2 gap-4",children:p.bottom.map(a=>(0,e.jsx)(u,{label:a,isSelected:t.bottom===a,onClick:()=>n("bottom",a)},a))})}),(0,e.jsx)(f,{title:"Shoes",children:(0,e.jsx)("div",{className:"grid grid-cols-2 gap-4",children:p.shoes.map(a=>(0,e.jsx)(u,{label:a,isSelected:t.shoes===a,onClick:()=>n("shoes",a)},a))})})]}),o==="gear"&&(0,e.jsx)(f,{title:"Accessories",children:(0,e.jsx)("div",{className:"grid grid-cols-2 gap-4",children:p.accessory.map(a=>(0,e.jsx)(u,{label:a,isSelected:t.accessory===a,onClick:()=>n("accessory",a)},a))})})]},o)})})]})]})})]})}function f({title:s,children:r}){return(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500 ml-1",children:s}),r]})}function u({label:s,isSelected:r,onClick:i}){let t=s.replace(/([A-Z])/g," $1").replace(/(\d+)/g," $1").trim();return(0,e.jsx)("button",{type:"button",onClick:i,className:d("h-16 rounded-2xl border-2 transition-all flex items-center justify-center px-2 text-center relative overflow-hidden group",r?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 shadow-[0_0_0_2px_rgba(99,102,241,0.2)]":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-indigo-300 dark:hover:border-indigo-700 hover:shadow-md"),title:t,children:(0,e.jsx)("span",{className:d("text-xs font-bold uppercase tracking-tight truncate w-full z-10 transition-colors",r?"text-indigo-600 dark:text-indigo-300":"text-gray-600 dark:text-gray-400 group-hover:text-indigo-500"),children:t})})}function Y(){return(0,e.jsx)(S,{className:"bg-white dark:bg-gray-900 shadow-xl rounded-3xl h-[650px] overflow-hidden",children:(0,e.jsxs)("div",{className:"flex flex-col lg:flex-row h-full",children:[(0,e.jsxs)("div",{className:"w-full lg:w-[55%] p-6 flex flex-col gap-6 bg-gray-50 dark:bg-gray-800/50",children:[(0,e.jsx)(b,{className:"w-full max-w-[450px] aspect-square rounded-3xl mx-auto"}),(0,e.jsx)(b,{className:"w-full max-w-[450px] h-14 rounded-2xl mx-auto"})]}),(0,e.jsxs)("div",{className:"w-full lg:w-[45%] p-6 space-y-6",children:[(0,e.jsxs)("div",{className:"flex gap-3 overflow-hidden",children:[(0,e.jsx)(b,{className:"w-20 h-10 rounded-2xl flex-shrink-0"}),(0,e.jsx)(b,{className:"w-20 h-10 rounded-2xl flex-shrink-0"}),(0,e.jsx)(b,{className:"w-20 h-10 rounded-2xl flex-shrink-0"})]}),(0,e.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[...Array(8)].map((s,r)=>(0,e.jsx)(b,{className:"h-16 rounded-2xl"},r))})]})]})})}var v=c(m(),1),ve=({children:s})=>{let{user:r,loading:i}=$();return i&&!r?(0,v.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,v.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):!r&&!i?(0,v.jsx)(B,{to:"/login",replace:!0}):(0,v.jsx)(v.Fragment,{children:s})};export{Z as a,b,ue as c,ve as d};
